!function(){"use strict";function Touche(nodes){if(!(this instanceof Touche))return new Touche(nodes);if(!nodes)throw new Error("No DOM elements passed into Touche");return this.nodes=nodes,this}var isTouch="ontouchstart"in window||"msmaxtouchpoints"in window.navigator;if(Touche.prototype.on=function(event,fn){var touchend,ev,nodes=this.nodes,len=nodes.length;if(isTouch&&"click"===event&&(touchend=!0),ev=function(el,event,fn){var called,once=function(){!called&&(called=!0)&&fn.apply(this,arguments)};el.addEventListener(event,once,!1),touchend&&el.addEventListener("touchend",once,!1)},len)for(;len--;)ev(nodes[len],event,fn);else ev(nodes,event,fn);return this},window.Touche=Touche,window.jQuery&&isTouch){var originalOnMethod=jQuery.fn.on;jQuery.fn.on=function(){var event=arguments[0];return"click"==event.slice(0,4)&&(arguments[0]=event.replace("click","touchend")),originalOnMethod.apply(this,arguments),this}}}();var Twig=function(Twig){return Twig.VERSION="0.5.13",Twig}(Twig||{}),Twig=function(Twig){"use strict";function is(type,obj){var clas=Object.prototype.toString.call(obj).slice(8,-1);return void 0!==obj&&null!==obj&&clas===type}function relativePath(template,file){var base,base_path,val,sep_chr="/",new_path=[];if(template.url)base="undefined"!=typeof template.base?template.base+("/"===template.base.charAt(template.base.length-1)?"":"/"):template.url;else{if(!template.path)throw new Twig.Error("Cannot extend an inline template.");var path=require("path"),sep=path.sep||sep_chr,relative=new RegExp("^\\.{1,2}"+sep.replace("\\","\\\\"));void 0!==template.base&&null==file.match(relative)?(file=file.replace(template.base,""),base=template.base+sep):base=template.path,base=base.replace(sep+sep,sep),sep_chr=sep}for(base_path=base.split(sep_chr),base_path.pop(),base_path=base_path.concat(file.split(sep_chr));base_path.length>0;)val=base_path.shift(),"."==val||(".."==val&&new_path.length>0&&".."!=new_path[new_path.length-1]?new_path.pop():new_path.push(val));return new_path.join(sep_chr)}return Twig.trace=!1,Twig.debug=!1,Twig.cache=!0,Twig.placeholders={parent:"{{|PARENT|}}"},Twig.indexOf=function(arr,searchElement){if(Array.prototype.hasOwnProperty("indexOf"))return arr.indexOf(searchElement);if(void 0===arr||null===arr)throw new TypeError;var t=Object(arr),len=t.length>>>0;if(0===len)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&1/0!==n&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=len)return-1;for(var k=n>=0?n:Math.max(len-Math.abs(n),0);len>k;k++)if(k in t&&t[k]===searchElement)return k;return arr==searchElement?0:-1},Twig.forEach=function(arr,callback,thisArg){if(Array.prototype.forEach)return arr.forEach(callback,thisArg);var T,k;if(null==arr)throw new TypeError(" this is null or not defined");var O=Object(arr),len=O.length>>>0;if("[object Function]"!={}.toString.call(callback))throw new TypeError(callback+" is not a function");for(thisArg&&(T=thisArg),k=0;len>k;){var kValue;k in O&&(kValue=O[k],callback.call(T,kValue,k,O)),k++}},Twig.Error=function(message){this.message=message,this.name="TwigException",this.type="TwigException"},Twig.Error.prototype.toString=function(){return this.name+": "+this.message},Twig.log={trace:function(){Twig.trace&&console&&console.log(Array.prototype.slice.call(arguments))},debug:function(){Twig.debug&&console&&console.log(Array.prototype.slice.call(arguments))}},Twig.token={},Twig.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw"},Twig.token.definitions=[{type:Twig.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:Twig.token.type.output,open:"{{",close:"}}"},{type:Twig.token.type.logic,open:"{%",close:"%}"},{type:Twig.token.type.comment,open:"{#",close:"#}"}],Twig.token.strings=['"',"'"],Twig.token.findStart=function(template){var i,token_template,first_key_position,output={position:null,def:null};for(i=0;i<Twig.token.definitions.length;i++)token_template=Twig.token.definitions[i],first_key_position=template.indexOf(token_template.open),Twig.log.trace("Twig.token.findStart: ","Searching for ",token_template.open," found at ",first_key_position),first_key_position>=0&&(null===output.position||first_key_position<output.position)&&(output.position=first_key_position,output.def=token_template);return output},Twig.token.findEnd=function(template,token_def,start){for(var i,l,end=null,found=!1,offset=0,str_pos=null,str_found=null,pos=null,end_offset=null,this_str_pos=null,end_str_pos=null;!found;){if(str_pos=null,str_found=null,pos=template.indexOf(token_def.close,offset),!(pos>=0))throw new Twig.Error("Unable to find closing bracket '"+token_def.close+"' opened near template position "+start);if(end=pos,found=!0,token_def.type===Twig.token.type.comment)break;for(l=Twig.token.strings.length,i=0;l>i;i+=1)this_str_pos=template.indexOf(Twig.token.strings[i],offset),this_str_pos>0&&pos>this_str_pos&&(null===str_pos||str_pos>this_str_pos)&&(str_pos=this_str_pos,str_found=Twig.token.strings[i]);if(null!==str_pos)for(end_offset=str_pos+1,end=null,found=!1;;){if(end_str_pos=template.indexOf(str_found,end_offset),0>end_str_pos)throw"Unclosed string in template";if("\\"!==template.substr(end_str_pos-1,1)){offset=end_str_pos+1;break}end_offset=end_str_pos+1}}return end},Twig.tokenize=function(template){for(var tokens=[],error_offset=0,found_token=null,end=null;template.length>0;)found_token=Twig.token.findStart(template),Twig.log.trace("Twig.tokenize: ","Found token: ",found_token),null!==found_token.position?(found_token.position>0&&tokens.push({type:Twig.token.type.raw,value:template.substring(0,found_token.position)}),template=template.substr(found_token.position+found_token.def.open.length),error_offset+=found_token.position+found_token.def.open.length,end=Twig.token.findEnd(template,found_token.def,error_offset),Twig.log.trace("Twig.tokenize: ","Token ends at ",end),tokens.push({type:found_token.def.type,value:template.substring(0,end).trim()}),"logic"===found_token.def.type&&"\n"===template.substr(end+found_token.def.close.length,1)&&(end+=1),template=template.substr(end+found_token.def.close.length),error_offset+=end+found_token.def.close.length):(tokens.push({type:Twig.token.type.raw,value:template}),template="");return tokens},Twig.compile=function(tokens){for(var output=[],stack=[],intermediate_output=[],token=null,logic_token=null,unclosed_token=null,prev_token=null,prev_template=null,tok_output=null,type=null,open=null,next=null;tokens.length>0;){switch(token=tokens.shift(),Twig.log.trace("Compiling token ",token),token.type){case Twig.token.type.raw:stack.length>0?intermediate_output.push(token):output.push(token);break;case Twig.token.type.logic:if(logic_token=Twig.logic.compile.apply(this,[token]),type=logic_token.type,open=Twig.logic.handler[type].open,next=Twig.logic.handler[type].next,Twig.log.trace("Twig.compile: ","Compiled logic token to ",logic_token," next is: ",next," open is : ",open),void 0!==open&&!open){if(prev_token=stack.pop(),prev_template=Twig.logic.handler[prev_token.type],Twig.indexOf(prev_template.next,type)<0)throw new Error(type+" not expected after a "+prev_token.type);prev_token.output=prev_token.output||[],prev_token.output=prev_token.output.concat(intermediate_output),intermediate_output=[],tok_output={type:Twig.token.type.logic,token:prev_token},stack.length>0?intermediate_output.push(tok_output):output.push(tok_output)}void 0!==next&&next.length>0?(Twig.log.trace("Twig.compile: ","Pushing ",logic_token," to logic stack."),stack.length>0&&(prev_token=stack.pop(),prev_token.output=prev_token.output||[],prev_token.output=prev_token.output.concat(intermediate_output),stack.push(prev_token),intermediate_output=[]),stack.push(logic_token)):void 0!==open&&open&&(tok_output={type:Twig.token.type.logic,token:logic_token},stack.length>0?intermediate_output.push(tok_output):output.push(tok_output));break;case Twig.token.type.comment:break;case Twig.token.type.output:Twig.expression.compile.apply(this,[token]),stack.length>0?intermediate_output.push(token):output.push(token)}Twig.log.trace("Twig.compile: "," Output: ",output," Logic Stack: ",stack," Pending Output: ",intermediate_output)}if(stack.length>0)throw unclosed_token=stack.pop(),new Error("Unable to find an end tag for "+unclosed_token.type+", expecting one of "+unclosed_token.next);return output},Twig.parse=function(tokens,context){var output=[],chain=!0,that=this;return context=context||{},Twig.forEach(tokens,function(token){switch(Twig.log.debug("Twig.parse: ","Parsing token: ",token),token.type){case Twig.token.type.raw:output.push(token.value);break;case Twig.token.type.logic:var logic_token=token.token,logic=Twig.logic.parse.apply(that,[logic_token,context,chain]);void 0!==logic.chain&&(chain=logic.chain),void 0!==logic.context&&(context=logic.context),void 0!==logic.output&&output.push(logic.output);break;case Twig.token.type.comment:break;case Twig.token.type.output:Twig.log.debug("Twig.parse: ","Output token: ",token.stack),output.push(Twig.expression.parse.apply(that,[token.stack,context]))}}),output.join("")},Twig.prepare=function(data){var tokens,raw_tokens;return Twig.log.debug("Twig.prepare: ","Tokenizing ",data),raw_tokens=Twig.tokenize.apply(this,[data]),Twig.log.debug("Twig.prepare: ","Compiling ",raw_tokens),tokens=Twig.compile.apply(this,[raw_tokens]),Twig.log.debug("Twig.prepare: ","Compiled ",tokens),tokens},Twig.Templates={registry:{}},Twig.validateId=function(id){if("prototype"===id)throw new Twig.Error(id+" is not a valid twig identifier");if(Twig.Templates.registry.hasOwnProperty(id))throw new Twig.Error("There is already a template with the ID "+id);return!0},Twig.Templates.save=function(template){if(void 0===template.id)throw new Twig.Error("Unable to save template with no id");Twig.Templates.registry[template.id]=template},Twig.Templates.load=function(id){return Twig.Templates.registry.hasOwnProperty(id)?Twig.Templates.registry[id]:null},Twig.Templates.loadRemote=function(location,params,callback,error_callback){var id=params.id,method=params.method,async=params.async,precompiled=params.precompiled,template=null;if(void 0===async&&(async=!0),void 0===id&&(id=location),params.id=id,Twig.cache&&Twig.Templates.registry.hasOwnProperty(id))return callback&&callback(Twig.Templates.registry[id]),Twig.Templates.registry[id];if("ajax"==method){if("undefined"==typeof XMLHttpRequest)throw new Twig.Error("Unsupported platform: Unable to do remote requests because there is no XMLHTTPRequest implementation");var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){var data=null;4==xmlhttp.readyState&&(200==xmlhttp.status?(Twig.log.debug("Got template ",xmlhttp.responseText),data=precompiled===!0?JSON.parse(xmlhttp.responseText):xmlhttp.responseText,params.url=location,params.data=data,template=new Twig.Template(params),callback&&callback(template)):error_callback&&error_callback(xmlhttp))},xmlhttp.open("GET",location,async),xmlhttp.send()}else!function(){var fs=require("fs"),data=(require("path"),null),loadTemplateFn=function(err,data){return err?(error_callback&&error_callback(err),void 0):(precompiled===!0&&(data=JSON.parse(data)),params.data=data,params.path=location,template=new Twig.Template(params),callback&&callback(template),void 0)};if(async===!0)fs.stat(location,function(err,stats){if(err||!stats.isFile())throw new Twig.Error("Unable to find template file "+location);fs.readFile(location,"utf8",loadTemplateFn)});else{if(!fs.statSync(location).isFile())throw new Twig.Error("Unable to find template file "+location);data=fs.readFileSync(location,"utf8"),loadTemplateFn(void 0,data)}}();return async===!1?template:!0},Twig.Template=function(params){var data=params.data,id=params.id,blocks=params.blocks,base=params.base,path=params.path,url=params.url,options=params.options;this.id=id,this.base=base,this.path=path,this.url=url,this.options=options,this.reset(blocks),this.tokens=is("String",data)?Twig.prepare.apply(this,[data]):data,void 0!==id&&Twig.Templates.save(this)},Twig.Template.prototype.reset=function(blocks){Twig.log.debug("Twig.Template.reset","Reseting template "+this.id),this.blocks={},this.child={blocks:blocks||{}},this.extend=null},Twig.Template.prototype.render=function(context,params){params=params||{};var output,url;if(this.context=context||{},this.reset(),params.blocks&&(this.blocks=params.blocks),output=Twig.parse.apply(this,[this.tokens,this.context]),this.extend){var ext_template;return this.options.allowInlineIncludes&&(ext_template=Twig.Templates.load(this.extend),ext_template&&(ext_template.options=this.options)),ext_template||(url=relativePath(this,this.extend),ext_template=Twig.Templates.loadRemote(url,{method:this.url?"ajax":"fs",base:this.base,async:!1,id:url,options:this.options})),this.parent=ext_template,this.parent.render(this.context,{blocks:this.blocks})}return"blocks"==params.output?this.blocks:output},Twig.Template.prototype.importFile=function(file){var url,sub_template;if(!this.url&&!this.path&&this.options.allowInlineIncludes){if(sub_template=Twig.Templates.load(file),sub_template.options=this.options,sub_template)return sub_template;throw new Twig.Error("Didn't find the inline template by id")}return url=relativePath(this,file),sub_template=Twig.Templates.loadRemote(url,{method:this.url?"ajax":"fs",base:this.base,async:!1,options:this.options,id:url})},Twig.Template.prototype.importBlocks=function(file,override){var sub_template=this.importFile(file),context=this.context,that=this;override=override||!1,sub_template.render(context),Twig.forEach(Object.keys(sub_template.blocks),function(key){(override||void 0===that.blocks[key])&&(that.blocks[key]=sub_template.blocks[key])})},Twig.Template.prototype.compile=function(options){return Twig.compiler.compile(this,options)},Twig}(Twig||{});!function(){"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Object.keys||(Object.keys=function(o){if(o!==Object(o))throw new TypeError("Object.keys called on non-object");var p,ret=[];for(p in o)Object.prototype.hasOwnProperty.call(o,p)&&ret.push(p);return ret})}();var Twig=function(Twig){Twig.lib={};var sprintf=function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}function str_repeat(input,multiplier){for(var output=[];multiplier>0;output[--multiplier]=input);return output.join("")}var str_format=function(){return str_format.cache.hasOwnProperty(arguments[0])||(str_format.cache[arguments[0]]=str_format.parse(arguments[0])),str_format.format.call(null,str_format.cache[arguments[0]],arguments)};return str_format.format=function(parse_tree,argv){var arg,i,k,match,pad,pad_character,pad_length,cursor=1,tree_length=parse_tree.length,node_type="",output=[];for(i=0;tree_length>i;i++)if(node_type=get_type(parse_tree[i]),"string"===node_type)output.push(parse_tree[i]);else if("array"===node_type){if(match=parse_tree[i],match[2])for(arg=argv[cursor],k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k]))throw sprintf('[sprintf] property "%s" does not exist',match[2][k]);arg=arg[match[2][k]]}else arg=match[1]?argv[match[1]]:argv[cursor++];if(/[^s]/.test(match[8])&&"number"!=get_type(arg))throw sprintf("[sprintf] expecting number but found %s",get_type(arg));switch(match[8]){case"b":arg=arg.toString(2);break;case"c":arg=String.fromCharCode(arg);break;case"d":arg=parseInt(arg,10);break;case"e":arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case"f":arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case"o":arg=arg.toString(8);break;case"s":arg=(arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg;break;case"u":arg=Math.abs(arg);break;case"x":arg=arg.toString(16);break;case"X":arg=arg.toString(16).toUpperCase()}arg=/[def]/.test(match[8])&&match[3]&&arg>=0?"+"+arg:arg,pad_character=match[4]?"0"==match[4]?"0":match[4].charAt(1):" ",pad_length=match[6]-String(arg).length,pad=match[6]?str_repeat(pad_character,pad_length):"",output.push(match[5]?arg+pad:pad+arg)}return output.join("")},str_format.cache={},str_format.parse=function(fmt){for(var _fmt=fmt,match=[],parse_tree=[],arg_names=0;_fmt;){if(null!==(match=/^[^\x25]+/.exec(_fmt)))parse_tree.push(match[0]);else if(null!==(match=/^\x25{2}/.exec(_fmt)))parse_tree.push("%");else{if(null===(match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt)))throw"[sprintf] huh?";if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if(null===(field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field)))throw"[sprintf] huh?";for(field_list.push(field_match[1]);""!==(replacement_field=replacement_field.substring(field_match[0].length));)if(null!==(field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field)))field_list.push(field_match[1]);else{if(null===(field_match=/^\[(\d+)\]/.exec(replacement_field)))throw"[sprintf] huh?";field_list.push(field_match[1])}match[2]=field_list}else arg_names|=2;if(3===arg_names)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";parse_tree.push(match)}_fmt=_fmt.substring(match[0].length)}return parse_tree},str_format}(),vsprintf=function(fmt,argv){return argv.unshift(fmt),sprintf.apply(null,argv)};return Twig.lib.sprintf=sprintf,Twig.lib.vsprintf=vsprintf,function(){function getOrdinalFor(intNum){return(intNum=Math.abs(intNum)%100)%10==1&&11!=intNum?"st":intNum%10==2&&12!=intNum?"nd":intNum%10==3&&13!=intNum?"rd":"th"}function getISO8601Year(aDate){var d=new Date(aDate.getFullYear()+1,0,4);return 7>(d-aDate)/864e5&&(aDate.getDay()+6)%7<(d.getDay()+6)%7?d.getFullYear():aDate.getMonth()>0||aDate.getDate()>=4?aDate.getFullYear():aDate.getFullYear()-((aDate.getDay()+6)%7-aDate.getDate()>2?1:0)}function getISO8601Week(aDate){var d=new Date(getISO8601Year(aDate),0,4);return d.setDate(d.getDate()-(d.getDay()+6)%7),parseInt((aDate-d)/6048e5)+1}var shortDays="Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),fullDays="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),shortMonths="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),fullMonths="January,February,March,April,May,June,July,August,September,October,November,December".split(",");Twig.lib.formatDate=function(date,format){if("string"!=typeof format||/^\s*$/.test(format))return date+"";var jan1st=new Date(date.getFullYear(),0,1),me=date;return format.replace(/[dDjlNSwzWFmMntLoYyaABgGhHisu]/g,function(option){switch(option){case"d":return("0"+me.getDate()).replace(/^.+(..)$/,"$1");case"D":return shortDays[me.getDay()];case"j":return me.getDate();case"l":return fullDays[me.getDay()];case"N":return(me.getDay()+6)%7+1;case"S":return getOrdinalFor(me.getDate());case"w":return me.getDay();case"z":return Math.ceil((jan1st-me)/864e5);case"W":return("0"+getISO8601Week(me)).replace(/^.(..)$/,"$1");case"F":return fullMonths[me.getMonth()];case"m":return("0"+(me.getMonth()+1)).replace(/^.+(..)$/,"$1");case"M":return shortMonths[me.getMonth()];case"n":return me.getMonth()+1;case"t":return new Date(me.getFullYear(),me.getMonth()+1,-1).getDate();case"L":return 29==new Date(me.getFullYear(),1,29).getDate()?1:0;case"o":return getISO8601Year(me);case"Y":return me.getFullYear();case"y":return(me.getFullYear()+"").replace(/^.+(..)$/,"$1");case"a":return me.getHours()<12?"am":"pm";case"A":return me.getHours()<12?"AM":"PM";case"B":return Math.floor(1e3*((me.getUTCHours()+1)%24+me.getUTCMinutes()/60+me.getUTCSeconds()/3600)/24);case"g":return me.getHours()%12!=0?me.getHours()%12:12;case"G":return me.getHours();case"h":return("0"+(me.getHours()%12!=0?me.getHours()%12:12)).replace(/^.+(..)$/,"$1");case"H":return("0"+me.getHours()).replace(/^.+(..)$/,"$1");case"i":return("0"+me.getMinutes()).replace(/^.+(..)$/,"$1");case"s":return("0"+me.getSeconds()).replace(/^.+(..)$/,"$1");case"u":return me.getMilliseconds()}})}}(),Twig.lib.strip_tags=function(input,allowed){allowed=(((allowed||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var tags=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,commentsAndPhpTags=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return input.replace(commentsAndPhpTags,"").replace(tags,function($0,$1){return allowed.indexOf("<"+$1.toLowerCase()+">")>-1?$0:""})},Twig.lib.parseISO8601Date=function(s){var re=/(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)(\.\d+)?(Z|([+-])(\d\d):(\d\d))/,d=[];if(d=s.match(re),!d)throw"Couldn't parse ISO 8601 date string '"+s+"'";var a=[1,2,3,4,5,6,10,11];for(var i in a)d[a[i]]=parseInt(d[a[i]],10);d[7]=parseFloat(d[7]);var ms=Date.UTC(d[1],d[2]-1,d[3],d[4],d[5],d[6]);if(d[7]>0&&(ms+=Math.round(1e3*d[7])),"Z"!=d[8]&&d[10]){var offset=60*d[10]*60*1e3;d[11]&&(offset+=60*d[11]*1e3),"-"==d[9]?ms-=offset:ms+=offset}return new Date(ms)},Twig.lib.strtotime=function(str,now){var i,l,match,s,parse="";if(str=str.replace(/\s{2,}|^\s|\s$/g," "),str=str.replace(/[\t\r\n]/g,""),"now"===str)return null===now||isNaN(now)?(new Date).getTime()/1e3|0:0|now;if(!isNaN(parse=Date.parse(str)))return parse/1e3|0;now=now?new Date(1e3*now):new Date;var upperCaseStr=str;str=str.toLowerCase();var __is={day:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},mon:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]},process=function(m){var ago=m[2]&&"ago"===m[2],num=(num="last"===m[0]?-1:1)*(ago?-1:1);switch(m[0]){case"last":case"next":switch(m[1].substring(0,3)){case"yea":now.setFullYear(now.getFullYear()+num);break;case"wee":now.setDate(now.getDate()+7*num);break;case"day":now.setDate(now.getDate()+num);break;case"hou":now.setHours(now.getHours()+num);break;case"min":now.setMinutes(now.getMinutes()+num);break;case"sec":now.setSeconds(now.getSeconds()+num);break;case"mon":if("month"===m[1]){now.setMonth(now.getMonth()+num);break}default:var day=__is.day[m[1].substring(0,3)];if("undefined"!=typeof day){var diff=day-now.getDay();0===diff?diff=7*num:diff>0?"last"===m[0]&&(diff-=7):"next"===m[0]&&(diff+=7),now.setDate(now.getDate()+diff),now.setHours(0,0,0,0)}}break;default:if(!/\d+/.test(m[0]))return!1;switch(num*=parseInt(m[0],10),m[1].substring(0,3)){case"yea":now.setFullYear(now.getFullYear()+num);break;case"mon":now.setMonth(now.getMonth()+num);break;case"wee":now.setDate(now.getDate()+7*num);break;case"day":now.setDate(now.getDate()+num);break;case"hou":now.setHours(now.getHours()+num);break;case"min":now.setMinutes(now.getMinutes()+num);break;case"sec":now.setSeconds(now.getSeconds()+num)}}return!0};if(match=str.match(/^(\d{2,4}-\d{2}-\d{2})(?:\s(\d{1,2}:\d{2}(:\d{2})?)?(?:\.(\d+))?)?$/),null!==match)return match[2]?match[3]||(match[2]+=":00"):match[2]="00:00:00",s=match[1].split(/-/g),s[1]=__is.mon[s[1]-1]||s[1],s[0]=+s[0],s[0]=s[0]>=0&&s[0]<=69?"20"+(s[0]<10?"0"+s[0]:s[0]+""):s[0]>=70&&s[0]<=99?"19"+s[0]:s[0]+"",parseInt(this.strtotime(s[2]+" "+s[1]+" "+s[0]+" "+match[2])+(match[4]?match[4]/1e3:""),10);var regex="([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday)|(last|next)\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday))(\\sago)?";if(match=str.match(new RegExp(regex,"gi")),null===match){try{if(num=Twig.lib.parseISO8601Date(upperCaseStr))return num/1e3|0}catch(err){return!1}return!1}for(i=0,l=match.length;l>i;i++)if(!process(match[i].split(" ")))return!1;return now.getTime()/1e3|0},Twig.lib.is=function(type,obj){var clas=Object.prototype.toString.call(obj).slice(8,-1);return void 0!==obj&&null!==obj&&clas===type},Twig.lib.copy=function(src){var key,target={};for(key in src)target[key]=src[key];return target},Twig.lib.replaceAll=function(string,search,replace){return string.split(search).join(replace)},Twig}(Twig||{}),Twig=function(Twig){"use strict";for(Twig.logic={},Twig.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends",use:"Twig.logic.type.use",include:"Twig.logic.type.include",spaceless:"Twig.logic.type.spaceless",endspaceless:"Twig.logic.type.endspaceless"},Twig.logic.definitions=[{type:Twig.logic.type.if_,regex:/^if\s+([^\s].+)$/,next:[Twig.logic.type.else_,Twig.logic.type.elseif,Twig.logic.type.endif],open:!0,compile:function(token){var expression=token.match[1];return token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,delete token.match,token},parse:function(token,context,chain){var output="",result=Twig.expression.parse.apply(this,[token.stack,context]);return chain=!0,result&&(chain=!1,output=Twig.parse.apply(this,[token.output,context])),{chain:chain,output:output}}},{type:Twig.logic.type.elseif,regex:/^elseif\s+([^\s].*)$/,next:[Twig.logic.type.else_,Twig.logic.type.elseif,Twig.logic.type.endif],open:!1,compile:function(token){var expression=token.match[1];return token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,delete token.match,token},parse:function(token,context,chain){var output="";return chain&&Twig.expression.parse.apply(this,[token.stack,context])===!0&&(chain=!1,output=Twig.parse.apply(this,[token.output,context])),{chain:chain,output:output}}},{type:Twig.logic.type.else_,regex:/^else$/,next:[Twig.logic.type.endif,Twig.logic.type.endfor],open:!1,parse:function(token,context,chain){var output="";return chain&&(output=Twig.parse.apply(this,[token.output,context])),{chain:chain,output:output}}},{type:Twig.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:Twig.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([^\s].*?)(?:\s+if\s+([^\s].*))?$/,next:[Twig.logic.type.else_,Twig.logic.type.endfor],open:!0,compile:function(token){var key_value=token.match[1],expression=token.match[2],conditional=token.match[3],kv_split=null;if(token.key_var=null,token.value_var=null,key_value.indexOf(",")>=0){if(kv_split=key_value.split(","),2!==kv_split.length)throw new Twig.Error("Invalid expression in for loop: "+key_value);token.key_var=kv_split[0].trim(),token.value_var=kv_split[1].trim()}else token.value_var=key_value;return token.expression=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,conditional&&(token.conditional=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:conditional}]).stack),delete token.match,token},parse:function(token,context,continue_chain){var len,keyset,result=Twig.expression.parse.apply(this,[token.expression,context]),output=[],index=0,that=this,conditional=token.conditional,buildLoop=function(index,len){var isConditional=void 0!==conditional;return{index:index+1,index0:index,revindex:isConditional?void 0:len-index,revindex0:isConditional?void 0:len-index-1,first:0===index,last:isConditional?void 0:index===len-1,length:isConditional?void 0:len,parent:context}},loop=function(key,value){var inner_context=Twig.lib.copy(context);inner_context[token.value_var]=value,token.key_var&&(inner_context[token.key_var]=key),inner_context.loop=buildLoop(index,len),(void 0===conditional||Twig.expression.parse.apply(that,[conditional,inner_context]))&&(output.push(Twig.parse.apply(that,[token.output,inner_context])),index+=1)};return result instanceof Array?(len=result.length,Twig.forEach(result,function(value){var key=index;loop(key,value)})):result instanceof Object&&(keyset=void 0!==result._keys?result._keys:Object.keys(result),len=keyset.length,Twig.forEach(keyset,function(key){"_keys"!==key&&loop(key,result[key])})),continue_chain=0===output.length,{chain:continue_chain,output:output.join("")}}},{type:Twig.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:Twig.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*(.+)$/,next:[],open:!0,compile:function(token){var key=token.match[1].trim(),expression=token.match[2],expression_stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack;return token.key=key,token.expression=expression_stack,delete token.match,token},parse:function(token,context,continue_chain){var value=Twig.expression.parse.apply(this,[token.expression,context]),key=token.key;return this.context[key]=value,context[key]=value,{chain:continue_chain,context:context}}},{type:Twig.logic.type.filter,regex:/^filter\s+(.+)$/,next:[Twig.logic.type.endfilter],open:!0,compile:function(token){var expression="|"+token.match[1].trim();return token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,delete token.match,token},parse:function(token,context,chain){var unfiltered=Twig.parse.apply(this,[token.output,context]),stack=[{type:Twig.expression.type.string,value:unfiltered}].concat(token.stack),output=Twig.expression.parse.apply(this,[stack,context]);return{chain:chain,output:output}}},{type:Twig.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:Twig.logic.type.block,regex:/^block\s+([a-zA-Z0-9_]+)$/,next:[Twig.logic.type.endblock],open:!0,compile:function(token){return token.block=token.match[1].trim(),delete token.match,token},parse:function(token,context,chain){var block_output="",output="",hasParent=this.blocks[token.block]&&this.blocks[token.block].indexOf(Twig.placeholders.parent)>-1;return(void 0===this.blocks[token.block]||hasParent)&&(block_output=Twig.expression.parse.apply(this,[{type:Twig.expression.type.string,value:Twig.parse.apply(this,[token.output,context])},context]),this.blocks[token.block]=hasParent?this.blocks[token.block].replace(Twig.placeholders.parent,block_output):block_output),output=this.child.blocks[token.block]?this.child.blocks[token.block]:this.blocks[token.block],{chain:chain,output:output}}},{type:Twig.logic.type.endblock,regex:/^endblock(?:\s+([a-zA-Z0-9_]+))?$/,next:[],open:!1},{type:Twig.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile:function(token){var expression=token.match[1].trim();return delete token.match,token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,token},parse:function(token,context,chain){var file=Twig.expression.parse.apply(this,[token.stack,context]);return this.extend=file,{chain:chain,output:""}}},{type:Twig.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile:function(token){var expression=token.match[1].trim();return delete token.match,token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,token},parse:function(token,context,chain){var file=Twig.expression.parse.apply(this,[token.stack,context]);return this.importBlocks(file),{chain:chain,output:""}}},{type:Twig.logic.type.include,regex:/^include\s+(ignore missing\s+)?(.+?)\s*(?:with\s+(.+?))?\s*(only)?$/,next:[],open:!0,compile:function(token){var match=token.match,includeMissing=void 0!==match[1],expression=match[2].trim(),withContext=match[3],only=void 0!==match[4]&&match[4].length;return delete token.match,token.only=only,token.includeMissing=includeMissing,token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,void 0!==withContext&&(token.withStack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:withContext.trim()}]).stack),token},parse:function(token,context,chain){var withContext,i,template,innerContext={};if(!token.only)for(i in context)context.hasOwnProperty(i)&&(innerContext[i]=context[i]);if(void 0!==token.withStack){withContext=Twig.expression.parse.apply(this,[token.withStack,context]);for(i in withContext)withContext.hasOwnProperty(i)&&(innerContext[i]=withContext[i])}var file=Twig.expression.parse.apply(this,[token.stack,innerContext]);
return template=this.importFile(file),{chain:chain,output:template.render(innerContext)}}},{type:Twig.logic.type.spaceless,regex:/^spaceless$/,next:[Twig.logic.type.endspaceless],open:!0,parse:function(token,context,chain){var unfiltered=Twig.parse.apply(this,[token.output,context]),rBetweenTagSpaces=/>\s+</g,output=unfiltered.replace(rBetweenTagSpaces,"><").trim();return{chain:chain,output:output}}},{type:Twig.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1}],Twig.logic.handler={},Twig.logic.extendType=function(type,value){value=value||"Twig.logic.type"+type,Twig.logic.type[type]=value},Twig.logic.extend=function(definition){if(!definition.type)throw new Twig.Error("Unable to extend logic definition. No type provided for "+definition);if(Twig.logic.type[definition.type])throw new Twig.Error("Unable to extend logic definitions. Type "+definition.type+" is already defined.");Twig.logic.extendType(definition.type),Twig.logic.handler[definition.type]=definition};Twig.logic.definitions.length>0;)Twig.logic.extend(Twig.logic.definitions.shift());return Twig.logic.compile=function(raw_token){var expression=raw_token.value.trim(),token=Twig.logic.tokenize.apply(this,[expression]),token_template=Twig.logic.handler[token.type];return token_template.compile&&(token=token_template.compile.apply(this,[token]),Twig.log.trace("Twig.logic.compile: ","Compiled logic token to ",token)),token},Twig.logic.tokenize=function(expression){var token={},token_template_type=null,token_type=null,token_regex=null,regex_array=null,regex=null,match=null;expression=expression.trim();for(token_template_type in Twig.logic.handler)if(Twig.logic.handler.hasOwnProperty(token_template_type))for(token_type=Twig.logic.handler[token_template_type].type,token_regex=Twig.logic.handler[token_template_type].regex,regex_array=[],token_regex instanceof Array?regex_array=token_regex:regex_array.push(token_regex);regex_array.length>0;)if(regex=regex_array.shift(),match=regex.exec(expression.trim()),null!==match)return token.type=token_type,token.match=match,Twig.log.trace("Twig.logic.tokenize: ","Matched a ",token_type," regular expression of ",match),token;throw new Twig.Error("Unable to parse '"+expression.trim()+"'")},Twig.logic.parse=function(token,context,chain){var token_template,output="";return context=context||{},Twig.log.debug("Twig.logic.parse: ","Parsing logic token ",token),token_template=Twig.logic.handler[token.type],token_template.parse&&(output=token_template.parse.apply(this,[token,context,chain])),output},Twig}(Twig||{}),Twig=function(Twig){"use strict";Twig.expression={},Twig.expression.reservedWords=["true","false","null"],Twig.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",test:"Twig.expression.type.test"},Twig.expression.set={operations:[Twig.expression.type.filter,Twig.expression.type.operator.unary,Twig.expression.type.operator.binary,Twig.expression.type.array.end,Twig.expression.type.object.end,Twig.expression.type.parameter.end,Twig.expression.type.comma,Twig.expression.type.test],expressions:[Twig.expression.type._function,Twig.expression.type.bool,Twig.expression.type.string,Twig.expression.type.variable,Twig.expression.type.number,Twig.expression.type._null,Twig.expression.type.parameter.start,Twig.expression.type.array.start,Twig.expression.type.object.start]},Twig.expression.set.operations_extended=Twig.expression.set.operations.concat([Twig.expression.type.key.period,Twig.expression.type.key.brackets]),Twig.expression.fn={compile:{push:function(token,stack,output){output.push(token)},push_both:function(token,stack,output){output.push(token),stack.push(token)}},parse:{push:function(token,stack){stack.push(token)},push_value:function(token,stack){stack.push(token.value)}}},Twig.expression.definitions=[{type:Twig.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_][a-zA-Z0-9_]*)/,next:Twig.expression.set.operations.concat([Twig.expression.type.parameter.start]),compile:function(token,stack,output){token.filter=token.match[2],token.modifier=token.match[1],delete token.match,delete token.value,output.push(token)},parse:function(token,stack,context){var value=stack.pop(),params=token.params&&Twig.expression.parse.apply(this,[token.params,context]),result=Twig.test(token.filter,value,params);"not"==token.modifier?stack.push(!result):stack.push(result)}},{type:Twig.expression.type.comma,regex:/^,/,next:Twig.expression.set.expressions.concat([Twig.expression.type.array.end,Twig.expression.type.object.end]),compile:function(token,stack,output){var stack_token,i=stack.length-1;for(delete token.match,delete token.value;i>=0;i--){if(stack_token=stack.pop(),stack_token.type===Twig.expression.type.object.start||stack_token.type===Twig.expression.type.parameter.start||stack_token.type===Twig.expression.type.array.start){stack.push(stack_token);break}output.push(stack_token)}output.push(token)}},{type:Twig.expression.type.operator.binary,regex:/(^[\+\-~%\?\:]|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^and\s+|^or\s+|^in\s+|^not in\s+|^\.\.)/,next:Twig.expression.set.expressions.concat([Twig.expression.type.operator.unary]),compile:function(token,stack,output){delete token.match,token.value=token.value.trim();var value=token.value,operator=Twig.expression.operator.lookup(value,token);for(Twig.log.trace("Twig.expression.compile: ","Operator: ",operator," from ",value);stack.length>0&&(stack[stack.length-1].type==Twig.expression.type.operator.unary||stack[stack.length-1].type==Twig.expression.type.operator.binary)&&(operator.associativity===Twig.expression.operator.leftToRight&&operator.precidence>=stack[stack.length-1].precidence||operator.associativity===Twig.expression.operator.rightToLeft&&operator.precidence>stack[stack.length-1].precidence);){var temp=stack.pop();output.push(temp)}if(":"===value){if(!stack[stack.length-1]||"?"!==stack[stack.length-1].value){var key_token=output.pop();if(key_token.type!==Twig.expression.type.string&&key_token.type!==Twig.expression.type.variable&&key_token.type!==Twig.expression.type.number)throw new Twig.Error("Unexpected value before ':' of "+key_token.type+" = "+key_token.value);return token.key=key_token.value,output.push(token),void 0}}else stack.push(operator)},parse:function(token,stack){token.key?stack.push(token):Twig.expression.operator.parse(token.value,stack)}},{type:Twig.expression.type.operator.unary,regex:/(^not\s+)/,next:Twig.expression.set.expressions,compile:function(token,stack,output){delete token.match,token.value=token.value.trim();var value=token.value,operator=Twig.expression.operator.lookup(value,token);for(Twig.log.trace("Twig.expression.compile: ","Operator: ",operator," from ",value);stack.length>0&&(stack[stack.length-1].type==Twig.expression.type.operator.unary||stack[stack.length-1].type==Twig.expression.type.operator.binary)&&(operator.associativity===Twig.expression.operator.leftToRight&&operator.precidence>=stack[stack.length-1].precidence||operator.associativity===Twig.expression.operator.rightToLeft&&operator.precidence>stack[stack.length-1].precidence);){var temp=stack.pop();output.push(temp)}stack.push(operator)},parse:function(token,stack){Twig.expression.operator.parse(token.value,stack)}},{type:Twig.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2.)*?\1/,next:Twig.expression.set.operations,compile:function(token,stack,output){var value=token.value;delete token.match,value='"'===value.substring(0,1)?value.replace('\\"','"'):value.replace("\\'","'"),token.value=value.substring(1,value.length-1).replace(/\\n/g,"\n").replace(/\\r/g,"\r"),Twig.log.trace("Twig.expression.compile: ","String value: ",token.value),output.push(token)},parse:Twig.expression.fn.parse.push_value},{type:Twig.expression.type.parameter.start,regex:/^\(/,next:Twig.expression.set.expressions.concat([Twig.expression.type.parameter.end]),compile:Twig.expression.fn.compile.push_both,parse:Twig.expression.fn.parse.push},{type:Twig.expression.type.parameter.end,regex:/^\)/,next:Twig.expression.set.operations_extended,compile:function(token,stack,output){var stack_token,end_token=token;for(stack_token=stack.pop();stack.length>0&&stack_token.type!=Twig.expression.type.parameter.start;)output.push(stack_token),stack_token=stack.pop();for(var param_stack=[];token.type!==Twig.expression.type.parameter.start;)param_stack.unshift(token),token=output.pop();param_stack.unshift(token);token=output[output.length-1],void 0===token||token.type!==Twig.expression.type._function&&token.type!==Twig.expression.type.filter&&token.type!==Twig.expression.type.test&&token.type!==Twig.expression.type.key.brackets&&token.type!==Twig.expression.type.key.period?(end_token.expression=!0,param_stack.pop(),param_stack.shift(),end_token.params=param_stack,output.push(end_token)):(end_token.expression=!1,token.params=param_stack)},parse:function(token,stack,context){var new_array=[],array_ended=!1,value=null;if(token.expression)value=Twig.expression.parse.apply(this,[token.params,context]),stack.push(value);else{for(;stack.length>0;){if(value=stack.pop(),value&&value.type&&value.type==Twig.expression.type.parameter.start){array_ended=!0;break}new_array.unshift(value)}if(!array_ended)throw new Twig.Error("Expected end of parameter set.");stack.push(new_array)}}},{type:Twig.expression.type.array.start,regex:/^\[/,next:Twig.expression.set.expressions.concat([Twig.expression.type.array.end]),compile:Twig.expression.fn.compile.push_both,parse:Twig.expression.fn.parse.push},{type:Twig.expression.type.array.end,regex:/^\]/,next:Twig.expression.set.operations_extended,compile:function(token,stack,output){for(var stack_token,i=stack.length-1;i>=0&&(stack_token=stack.pop(),stack_token.type!==Twig.expression.type.array.start);i--)output.push(stack_token);output.push(token)},parse:function(token,stack){for(var new_array=[],array_ended=!1,value=null;stack.length>0;){if(value=stack.pop(),value.type&&value.type==Twig.expression.type.array.start){array_ended=!0;break}new_array.unshift(value)}if(!array_ended)throw new Twig.Error("Expected end of array.");stack.push(new_array)}},{type:Twig.expression.type.object.start,regex:/^\{/,next:Twig.expression.set.expressions.concat([Twig.expression.type.object.end]),compile:Twig.expression.fn.compile.push_both,parse:Twig.expression.fn.parse.push},{type:Twig.expression.type.object.end,regex:/^\}/,next:Twig.expression.set.operations_extended,compile:function(token,stack,output){for(var stack_token,i=stack.length-1;i>=0&&(stack_token=stack.pop(),!stack_token||stack_token.type!==Twig.expression.type.object.start);i--)output.push(stack_token);output.push(token)},parse:function(end_token,stack){for(var new_object={},object_ended=!1,token=null,has_value=!1,value=null;stack.length>0;){if(token=stack.pop(),token&&token.type&&token.type===Twig.expression.type.object.start){object_ended=!0;break}if(token&&token.type&&(token.type===Twig.expression.type.operator.binary||token.type===Twig.expression.type.operator.unary)&&token.key){if(!has_value)throw new Twig.Error("Missing value for key '"+token.key+"' in object definition.");new_object[token.key]=value,void 0===new_object._keys&&(new_object._keys=[]),new_object._keys.unshift(token.key),value=null,has_value=!1}else has_value=!0,value=token}if(!object_ended)throw new Twig.Error("Unexpected end of object.");stack.push(new_object)}},{type:Twig.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_\-]*)/,next:Twig.expression.set.operations_extended.concat([Twig.expression.type.parameter.start]),compile:function(token,stack,output){token.value=token.match[1],output.push(token)},parse:function(token,stack,context){var input=stack.pop(),params=token.params&&Twig.expression.parse.apply(this,[token.params,context]);stack.push(Twig.filter.apply(this,[token.value,input,params]))}},{type:Twig.expression.type._function,regex:/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/,next:Twig.expression.type.parameter.start,transform:function(){return"("},compile:function(token,stack,output){var fn=token.match[1];token.fn=fn,delete token.match,delete token.value,output.push(token)},parse:function(token,stack,context){var value,params=token.params&&Twig.expression.parse.apply(this,[token.params,context]),fn=token.fn;if(Twig.functions[fn])value=Twig.functions[fn].apply(this,params);else{if("function"!=typeof context[fn])throw new Twig.Error(fn+" function does not exist and is not defined in the context");value=context[fn].apply(context,params)}stack.push(value)}},{type:Twig.expression.type.variable,regex:/^[a-zA-Z_][a-zA-Z0-9_]*/,next:Twig.expression.set.operations_extended.concat([Twig.expression.type.parameter.start]),compile:Twig.expression.fn.compile.push,validate:function(match){return Twig.indexOf(Twig.expression.reservedWords,match[0])<0},parse:function(token,stack,context){var value=Twig.expression.resolve(context[token.value],context);stack.push(value)}},{type:Twig.expression.type.key.period,regex:/^\.([a-zA-Z0-9_]+)/,next:Twig.expression.set.operations_extended.concat([Twig.expression.type.parameter.start]),compile:function(token,stack,output){token.key=token.match[1],delete token.match,delete token.value,output.push(token)},parse:function(token,stack,context){var value,params=token.params&&Twig.expression.parse.apply(this,[token.params,context]),key=token.key,object=stack.pop();if(null===object||void 0===object){if(this.options.strict_variables)throw new Twig.Error("Can't access a key "+key+" on an null or undefined object.");return null}var capitalize=function(value){return value.substr(0,1).toUpperCase()+value.substr(1)};value="object"==typeof object&&key in object?object[key]:void 0!==object["get"+capitalize(key)]?object["get"+capitalize(key)]:void 0!==object["is"+capitalize(key)]?object["is"+capitalize(key)]:null,stack.push(Twig.expression.resolve(value,object,params))}},{type:Twig.expression.type.key.brackets,regex:/^\[([^\]]*)\]/,next:Twig.expression.set.operations_extended.concat([Twig.expression.type.parameter.start]),compile:function(token,stack,output){var match=token.match[1];delete token.value,delete token.match,token.stack=Twig.expression.compile({value:match}).stack,output.push(token)},parse:function(token,stack,context){var value,params=token.params&&Twig.expression.parse.apply(this,[token.params,context]),key=Twig.expression.parse.apply(this,[token.stack,context]),object=stack.pop();if(null===object||void 0===object){if(this.options.strict_variables)throw new Twig.Error("Can't access a key "+key+" on an null or undefined object.");return null}value="object"==typeof object&&key in object?object[key]:null,stack.push(Twig.expression.resolve(value,object,params))}},{type:Twig.expression.type._null,regex:/^null/,next:Twig.expression.set.operations,compile:function(token,stack,output){delete token.match,token.value=null,output.push(token)},parse:Twig.expression.fn.parse.push_value},{type:Twig.expression.type.number,regex:/^\-?\d+(\.\d+)?/,next:Twig.expression.set.operations,compile:function(token,stack,output){token.value=Number(token.value),output.push(token)},parse:Twig.expression.fn.parse.push_value},{type:Twig.expression.type.bool,regex:/^(true|false)/,next:Twig.expression.set.operations,compile:function(token,stack,output){token.value="true"==token.match[0],delete token.match,output.push(token)},parse:Twig.expression.fn.parse.push_value}],Twig.expression.resolve=function(value,context,params){return"function"==typeof value?value.apply(context,params||[]):value},Twig.expression.handler={},Twig.expression.extendType=function(type){Twig.expression.type[type]="Twig.expression.type."+type},Twig.expression.extend=function(definition){if(!definition.type)throw new Twig.Error("Unable to extend logic definition. No type provided for "+definition);Twig.expression.handler[definition.type]=definition};for(;Twig.expression.definitions.length>0;)Twig.expression.extend(Twig.expression.definitions.shift());return Twig.expression.tokenize=function(expression){var type,regex,regex_array,token_next,match_found,match_function,tokens=[],exp_offset=0,next=null,invalid_matches=[];for(match_function=function(){{var match=Array.prototype.slice.apply(arguments);match.pop(),match.pop()}return Twig.log.trace("Twig.expression.tokenize","Matched a ",type," regular expression of ",match),next&&Twig.indexOf(next,type)<0?(invalid_matches.push(type+" cannot follow a "+tokens[tokens.length-1].type+" at template:"+exp_offset+" near '"+match[0].substring(0,20)+"...'"),match[0]):Twig.expression.handler[type].validate&&!Twig.expression.handler[type].validate(match,tokens)?match[0]:(invalid_matches=[],tokens.push({type:type,value:match[0],match:match}),match_found=!0,next=token_next,exp_offset+=match[0].length,Twig.expression.handler[type].transform?Twig.expression.handler[type].transform(match,tokens):"")},Twig.log.debug("Twig.expression.tokenize","Tokenizing expression ",expression);expression.length>0;){expression=expression.trim();for(type in Twig.expression.handler)if(Twig.expression.handler.hasOwnProperty(type)){for(token_next=Twig.expression.handler[type].next,regex=Twig.expression.handler[type].regex,regex_array=regex instanceof Array?regex:[regex],match_found=!1;regex_array.length>0;)regex=regex_array.pop(),expression=expression.replace(regex,match_function);if(match_found)break}if(!match_found)throw invalid_matches.length>0?new Twig.Error(invalid_matches.join(" OR ")):new Twig.Error("Unable to parse '"+expression+"' at template position"+exp_offset)}return Twig.log.trace("Twig.expression.tokenize","Tokenized to ",tokens),tokens},Twig.expression.compile=function(raw_token){var expression=raw_token.value,tokens=Twig.expression.tokenize(expression),token=null,output=[],stack=[],token_template=null;for(Twig.log.trace("Twig.expression.compile: ","Compiling ",expression);tokens.length>0;)token=tokens.shift(),token_template=Twig.expression.handler[token.type],Twig.log.trace("Twig.expression.compile: ","Compiling ",token),token_template.compile&&token_template.compile(token,stack,output),Twig.log.trace("Twig.expression.compile: ","Stack is",stack),Twig.log.trace("Twig.expression.compile: ","Output is",output);for(;stack.length>0;)output.push(stack.pop());return Twig.log.trace("Twig.expression.compile: ","Final output is",output),raw_token.stack=output,delete raw_token.value,raw_token},Twig.expression.parse=function(tokens,context){var that=this;tokens instanceof Array||(tokens=[tokens]);var stack=[],token_template=null;return Twig.forEach(tokens,function(token){token_template=Twig.expression.handler[token.type],token_template.parse&&token_template.parse.apply(that,[token,stack,context])}),stack.pop()},Twig}(Twig||{}),Twig=function(Twig){"use strict";Twig.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};var containment=function(a,b){if(void 0!==b.indexOf)return a===b||""!==a&&b.indexOf(a)>-1;var el;for(el in b)if(b.hasOwnProperty(el)&&b[el]===a)return!0;return!1};return Twig.expression.operator.lookup=function(operator,token){switch(operator){case"..":case"not in":case"in":token.precidence=20,token.associativity=Twig.expression.operator.leftToRight;break;case",":token.precidence=18,token.associativity=Twig.expression.operator.leftToRight;break;case"?":case":":token.precidence=16,token.associativity=Twig.expression.operator.rightToLeft;break;case"or":token.precidence=14,token.associativity=Twig.expression.operator.leftToRight;break;case"and":token.precidence=13,token.associativity=Twig.expression.operator.leftToRight;break;case"==":case"!=":token.precidence=9,token.associativity=Twig.expression.operator.leftToRight;break;case"<":case"<=":case">":case">=":token.precidence=8,token.associativity=Twig.expression.operator.leftToRight;break;case"~":case"+":case"-":token.precidence=6,token.associativity=Twig.expression.operator.leftToRight;break;case"//":case"**":case"*":case"/":case"%":token.precidence=5,token.associativity=Twig.expression.operator.leftToRight;break;case"not":token.precidence=3,token.associativity=Twig.expression.operator.rightToLeft;break;default:throw new Twig.Error(operator+" is an unknown operator.")}return token.operator=operator,token},Twig.expression.operator.parse=function(operator,stack){Twig.log.trace("Twig.expression.operator.parse: ","Handling ",operator);var a,b,c;switch(operator){case":":break;case"?":c=stack.pop(),b=stack.pop(),a=stack.pop(),a?stack.push(b):stack.push(c);break;case"+":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(a+b);break;case"-":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(a-b);break;case"*":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(a*b);break;case"/":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(a/b);break;case"//":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(parseInt(a/b));break;case"%":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(a%b);break;case"~":b=stack.pop(),a=stack.pop(),stack.push((void 0!==a?a.toString():"")+(void 0!==b?b.toString():""));break;case"not":case"!":stack.push(!stack.pop());break;case"<":b=stack.pop(),a=stack.pop(),stack.push(b>a);break;case"<=":b=stack.pop(),a=stack.pop(),stack.push(b>=a);break;case">":b=stack.pop(),a=stack.pop(),stack.push(a>b);break;case">=":b=stack.pop(),a=stack.pop(),stack.push(a>=b);break;case"===":b=stack.pop(),a=stack.pop(),stack.push(a===b);break;case"==":b=stack.pop(),a=stack.pop(),stack.push(a==b);break;case"!==":b=stack.pop(),a=stack.pop(),stack.push(a!==b);break;case"!=":b=stack.pop(),a=stack.pop(),stack.push(a!=b);break;case"or":b=stack.pop(),a=stack.pop(),stack.push(a||b);break;case"and":b=stack.pop(),a=stack.pop(),stack.push(a&&b);break;case"**":b=stack.pop(),a=stack.pop(),stack.push(Math.pow(a,b));break;case"not in":b=stack.pop(),a=stack.pop(),stack.push(!containment(a,b));break;case"in":b=stack.pop(),a=stack.pop(),stack.push(containment(a,b));break;case"..":b=stack.pop(),a=stack.pop(),stack.push(Twig.functions.range(a,b));break;default:throw new Twig.Error(operator+" is an unknown operator.")}},Twig}(Twig||{}),Twig=function(Twig){function is(type,obj){var clas=Object.prototype.toString.call(obj).slice(8,-1);return void 0!==obj&&null!==obj&&clas===type}return Twig.filters={upper:function(value){return"string"!=typeof value?value:value.toUpperCase()},lower:function(value){return"string"!=typeof value?value:value.toLowerCase()},capitalize:function(value){return"string"!=typeof value?value:value.substr(0,1).toUpperCase()+value.substr(1)},title:function(value){return"string"!=typeof value?value:value.replace(/(^|\s)([a-z])/g,function(m,p1,p2){return p1+p2.toUpperCase()})},length:function(value){return value instanceof Array||"string"==typeof value?value.length:value instanceof Object?void 0===value._keys?Object.keys(value).length:value._keys.length:0},reverse:function(value){if(is("Array",value))return value.reverse();if(is("String",value))return value.split("").reverse().join("");if(value instanceof Object){var keys=value._keys||Object.keys(value).reverse();return value._keys=keys,value}},sort:function(value){if(is("Array",value))return value.sort();if(value instanceof Object){delete value._keys;var keys=Object.keys(value),sorted_keys=keys.sort(function(a,b){return value[a]>value[b]});return value._keys=sorted_keys,value}},keys:function(value){if(void 0!==value&&null!==value){var keyset=value._keys||Object.keys(value),output=[];return Twig.forEach(keyset,function(key){"_keys"!==key&&value.hasOwnProperty(key)&&output.push(key)}),output}},url_encode:function(value){return void 0!==value&&null!==value?encodeURIComponent(value):void 0},join:function(value,params){if(void 0!==value&&null!==value){var join_str="",output=[],keyset=null;return params&&params[0]&&(join_str=params[0]),value instanceof Array?output=value:(keyset=value._keys||Object.keys(value),Twig.forEach(keyset,function(key){"_keys"!==key&&value.hasOwnProperty(key)&&output.push(value[key])})),output.join(join_str)}},"default":function(value,params){if(void 0===params||1!==params.length)throw new Twig.Error("default filter expects one argument");return void 0===value||null===value||""===value?params[0]:value},json_encode:function(value){return value&&value.hasOwnProperty("_keys")&&delete value._keys,void 0===value||null===value?"null":JSON.stringify(value)},merge:function(value,params){var obj=[],arr_index=0,keyset=[];if(value instanceof Array?Twig.forEach(params,function(param){param instanceof Array||(obj={})}):obj={},obj instanceof Array||(obj._keys=[]),value instanceof Array?Twig.forEach(value,function(val){obj._keys&&obj._keys.push(arr_index),obj[arr_index]=val,arr_index++}):(keyset=value._keys||Object.keys(value),Twig.forEach(keyset,function(key){obj[key]=value[key],obj._keys.push(key);var int_key=parseInt(key,10);!isNaN(int_key)&&int_key>=arr_index&&(arr_index=int_key+1)})),Twig.forEach(params,function(param){param instanceof Array?Twig.forEach(param,function(val){obj._keys&&obj._keys.push(arr_index),obj[arr_index]=val,arr_index++}):(keyset=param._keys||Object.keys(param),Twig.forEach(keyset,function(key){obj[key]||obj._keys.push(key),obj[key]=param[key];var int_key=parseInt(key,10);!isNaN(int_key)&&int_key>=arr_index&&(arr_index=int_key+1)}))}),0===params.length)throw new Twig.Error("Filter merge expects at least one parameter");return obj},date:function(value,params){if(void 0!==value&&null!==value){var date=Twig.functions.date(value);return Twig.lib.formatDate(date,params[0])}},replace:function(value,params){if(void 0!==value&&null!==value){var tag,pairs=params[0];for(tag in pairs)pairs.hasOwnProperty(tag)&&"_keys"!==tag&&(value=Twig.lib.replaceAll(value,tag,pairs[tag]));return value}},format:function(value,params){return void 0!==value&&null!==value?Twig.lib.vsprintf(value,params):void 0},striptags:function(value){return void 0!==value&&null!==value?Twig.lib.strip_tags(value):void 0},escape:function(value){return void 0!==value&&null!==value?value.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):void 0},e:function(value){return Twig.filters.escape(value)},nl2br:function(value){if(void 0!==value&&null!==value){var linebreak_tag="BACKSLASH_n_replace",br="<br />"+linebreak_tag;return value=Twig.filters.escape(value).replace(/\r\n/g,br).replace(/\r/g,br).replace(/\n/g,br),Twig.lib.replaceAll(value,linebreak_tag,"\n")}},number_format:function(value,params){var number=value,decimals=params&&params[0]?params[0]:void 0,dec=params&&void 0!==params[1]?params[1]:".",sep=params&&void 0!==params[2]?params[2]:",";number=(number+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+number)?+number:0,prec=isFinite(+decimals)?Math.abs(decimals):0,s="",toFixedFix=function(n,prec){var k=Math.pow(10,prec);return""+Math.round(n*k)/k};return s=(prec?toFixedFix(n,prec):""+Math.round(n)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep)),(s[1]||"").length<prec&&(s[1]=s[1]||"",s[1]+=new Array(prec-s[1].length+1).join("0")),s.join(dec)},trim:function(value,params){if(void 0!==value&&null!==value){var whitespace,str=Twig.filters.escape(""+value);whitespace=params&&params[0]?""+params[0]:" \n\r	\f            ​\u2028\u2029　";for(var i=0;i<str.length;i++)if(-1===whitespace.indexOf(str.charAt(i))){str=str.substring(i);break}for(i=str.length-1;i>=0;i--)if(-1===whitespace.indexOf(str.charAt(i))){str=str.substring(0,i+1);break}return-1===whitespace.indexOf(str.charAt(0))?str:""}},slice:function(value,params){if(void 0!==value&&null!==value){if(void 0===params||params.length<1)throw new Twig.Error("slice filter expects at least 1 argument");var start=params[0]||0,length=params.length>1?params[1]:value.length,startIndex=start>=0?start:Math.max(value.length+start,0);if(Twig.lib.is("Array",value)){for(var output=[],i=startIndex;startIndex+length>i&&i<value.length;i++)output.push(value[i]);return output}if(Twig.lib.is("String",value))return value.substr(startIndex,length);throw new Twig.Error("slice filter expects value to be an array or string")}},abs:function(value){return void 0!==value&&null!==value?Math.abs(value):void 0},first:function(value){if(value instanceof Array)return value[0];if(value instanceof Object){if("_keys"in value)return value[value._keys[0]]}else if("string"==typeof value)return value.substr(0,1)},split:function(value,params){if(void 0!==value&&null!==value){if(void 0===params||params.length<1||params.length>2)throw new Twig.Error("split filter expects 1 or 2 argument");if(Twig.lib.is("String",value)){var delimiter=params[0],limit=params[1],split=value.split(delimiter);if(void 0===limit)return split;if(0>limit)return value.split(delimiter,split.length+limit);var limitedSplit=[];if(""==delimiter)for(;split.length>0;){for(var temp="",i=0;limit>i&&split.length>0;i++)temp+=split.shift();limitedSplit.push(temp)}else{for(var i=0;limit-1>i&&split.length>0;i++)limitedSplit.push(split.shift());split.length>0&&limitedSplit.push(split.join(delimiter))}return limitedSplit}throw new Twig.Error("split filter expects value to be a string")}}},Twig.filter=function(filter,value,params){if(!Twig.filters[filter])throw"Unable to find filter "+filter;return Twig.filters[filter].apply(this,[value,params])},Twig.filter.extend=function(filter,definition){Twig.filters[filter]=definition},Twig}(Twig||{}),Twig=function(Twig){return Twig.functions={range:function(low,high,step){var inival,endval,plus,matrix=[],walker=step||1,chars=!1;if(isNaN(low)||isNaN(high)?isNaN(low)&&isNaN(high)?(chars=!0,inival=low.charCodeAt(0),endval=high.charCodeAt(0)):(inival=isNaN(low)?0:low,endval=isNaN(high)?0:high):(inival=parseInt(low,10),endval=parseInt(high,10)),plus=inival>endval?!1:!0)for(;endval>=inival;)matrix.push(chars?String.fromCharCode(inival):inival),inival+=walker;else for(;inival>=endval;)matrix.push(chars?String.fromCharCode(inival):inival),inival-=walker;return matrix},cycle:function(arr,i){var pos=i%arr.length;return arr[pos]},dump:function(){var EOL="\n",indentChar="  ",indentTimes=0,out="",args=Array.prototype.slice.call(arguments),indent=function(times){for(var ind="";times>0;)times--,ind+=indentChar;return ind},displayVar=function(variable){out+=indent(indentTimes),"object"==typeof variable?dumpVar(variable):"function"==typeof variable?out+="function()"+EOL:"string"==typeof variable?out+="string("+variable.length+') "'+variable+'"'+EOL:"number"==typeof variable?out+="number("+variable+")"+EOL:"boolean"==typeof variable&&(out+="bool("+variable+")"+EOL)},dumpVar=function(variable){var i;if(null===variable)out+="NULL"+EOL;else if(void 0===variable)out+="undefined"+EOL;else if("object"==typeof variable){out+=indent(indentTimes)+typeof variable,indentTimes++,out+="("+function(obj){var key,size=0;for(key in obj)obj.hasOwnProperty(key)&&size++;return size}(variable)+") {"+EOL;for(i in variable)out+=indent(indentTimes)+"["+i+"]=> "+EOL,displayVar(variable[i]);indentTimes--,out+=indent(indentTimes)+"}"+EOL}else displayVar(variable)};return 0==args.length&&args.push(this.context),Twig.forEach(args,function(variable){dumpVar(variable)}),out},date:function(date){var dateObj;if(void 0===date)dateObj=new Date;else if(Twig.lib.is("Date",date))dateObj=date;else if(Twig.lib.is("String",date))dateObj=new Date(1e3*Twig.lib.strtotime(date));else{if(!Twig.lib.is("Number",date))throw new Twig.Error("Unable to parse date "+date);dateObj=new Date(1e3*date)
}return dateObj},block:function(block){return this.blocks[block]},parent:function(){return Twig.placeholders.parent}},Twig._function=function(_function,value,params){if(!Twig.functions[_function])throw"Unable to find function "+_function;return Twig.functions[_function](value,params)},Twig._function.extend=function(_function,definition){Twig.functions[_function]=definition},Twig}(Twig||{}),Twig=function(Twig){"use strict";return Twig.tests={empty:function(value){if(null===value||void 0===value)return!0;if("number"==typeof value)return!1;if(value.length&&value.length>0)return!1;for(var key in value)if(value.hasOwnProperty(key))return!1;return!0},odd:function(value){return value%2===1},even:function(value){return value%2===0},divisibleby:function(value,params){return value%params[0]===0},defined:function(value){return void 0!==value},none:function(value){return null===value},"null":function(value){return this.none(value)},sameas:function(value,params){return value===params[0]}},Twig.test=function(test,value,params){if(!Twig.tests[test])throw"Test "+test+" is not defined.";return Twig.tests[test](value,params)},Twig.test.extend=function(test,definition){Twig.tests[test]=definition},Twig}(Twig||{}),Twig=function(Twig){"use strict";return Twig.exports={VERSION:Twig.VERSION},Twig.exports.twig=function(params){var id=params.id,options={strict_variables:params.strict_variables||!1,allowInlineIncludes:params.allowInlineIncludes||!1};if(id&&Twig.validateId(id),void 0!==params.debug&&(Twig.debug=params.debug),void 0!==params.trace&&(Twig.trace=params.trace),void 0!==params.data)return new Twig.Template({data:params.data,module:params.module,id:id,options:options});if(void 0!==params.ref){if(void 0!==params.id)throw new Error("Both ref and id cannot be set on a twig.js template.");return Twig.Templates.load(params.ref)}return void 0!==params.href?Twig.Templates.loadRemote(params.href,{id:id,method:"ajax",base:params.base,module:params.module,precompiled:params.precompiled,async:params.async,options:options},params.load,params.error):void 0!==params.path?Twig.Templates.loadRemote(params.path,{id:id,method:"fs",base:params.base,module:params.module,precompiled:params.precompiled,async:params.async,options:options},params.load,params.error):void 0},Twig.exports.extendFilter=function(filter,definition){Twig.filter.extend(filter,definition)},Twig.exports.extendFunction=function(fn,definition){Twig._function.extend(fn,definition)},Twig.exports.extendTest=function(test,definition){Twig.test.extend(test,definition)},Twig.exports.extendTag=function(definition){Twig.logic.extend(definition)},Twig.exports.extend=function(fn){fn(Twig)},Twig.exports.compile=function(markup,options){var template,id=options.filename,path=options.filename;return template=new Twig.Template({data:markup,path:path,id:id,options:options.settings["twig options"]}),function(context){return template.render(context)}},Twig.exports.renderFile=function(path,options,fn){"function"==typeof options&&(fn=options,options={}),options=options||{};var params={path:path,base:options.settings.views,load:function(template){fn(null,template.render(options))}},view_options=options.settings["twig options"];if(view_options)for(var option in view_options)view_options.hasOwnProperty(option)&&(params[option]=view_options[option]);Twig.exports.twig(params)},Twig.exports.__express=Twig.exports.renderFile,Twig.exports.cache=function(cache){Twig.cache=cache},Twig}(Twig||{}),Twig=function(Twig){return Twig.compiler={module:{}},Twig.compiler.compile=function(template,options){var output,tokens=JSON.stringify(template.tokens),id=template.id;if(options.module){if(void 0===Twig.compiler.module[options.module])throw new Twig.Error("Unable to find module type "+options.module);output=Twig.compiler.module[options.module](id,tokens,options.twig)}else output=Twig.compiler.wrap(id,tokens);return output},Twig.compiler.module={amd:function(id,tokens,pathToTwig){return'define(["'+pathToTwig+'"], function (Twig) {\n	var twig, templates;\ntwig = Twig.twig;\ntemplates = '+Twig.compiler.wrap(id,tokens)+"\n	return templates;\n});"},node:function(id,tokens){return'var twig = require("twig").twig;\nexports.template = '+Twig.compiler.wrap(id,tokens)},cjs2:function(id,tokens,pathToTwig){return'module.declare([{ twig: "'+pathToTwig+'" }], function (require, exports, module) {\n	var twig = require("twig").twig;\n	exports.template = '+Twig.compiler.wrap(id,tokens)+"\n});"}},Twig.compiler.wrap=function(id,tokens){return'twig({id:"'+id.replace('"','\\"')+'", data:'+tokens+", precompiled: true});\n"},Twig}(Twig||{});"undefined"!=typeof module&&module.declare?module.declare([],function(require,exports){for(key in Twig.exports)Twig.exports.hasOwnProperty(key)&&(exports[key]=Twig.exports[key])}):"function"==typeof define&&define.amd?define(function(){return Twig.exports}):"undefined"!=typeof module&&module.exports?module.exports=Twig.exports:(window.twig=Twig.exports.twig,window.Twig=Twig.exports);var twigs={};twigs["views-client/politician.twig"]=Twig.twig({data:[{type:"raw",value:'<div class="politician">\n    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"politician",match:["politician"]},{type:"Twig.expression.type.key.period",key:"photoUrl"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"}],output:[{type:"raw",value:'        <div class="politician__photo" style="background-image: url('},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"politician",match:["politician"]},{type:"Twig.expression.type.key.period",key:"photoUrl"}]},{type:"raw",value:');" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"politician",match:["politician"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'"></div>\n    '}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'        <div class="politician__photo" style="background-image: url(/wp-content/themes/nationswell/img/placeholder.jpg);" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"politician",match:["politician"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'"></div>\n    '}]}},{type:"raw",value:'\n    <div class="politician__information">\n        <h4 class="hd-l politician__name">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"politician",match:["politician"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</h4>\n        <span class="politician__office">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"politician",match:["politician"]},{type:"Twig.expression.type.key.period",key:"party"}]},{type:"raw",value:" - "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"politician",match:["politician"]},{type:"Twig.expression.type.key.period",key:"office"}]},{type:"raw",value:'</span>\n\n        <a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"twitterUrl",match:["twitterUrl"]}]},{type:"raw",value:'" class="btn btn--solid btn--twitter btn--share">Tweet @'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"politician",match:["politician"]},{type:"Twig.expression.type.key.period",key:"twitter"}]},{type:"raw",value:"</a>\n    </div>\n</div>"}]}),window.matchMedia||(window.matchMedia=function(win){"use strict";var _doc=win.document,_viewport=_doc.documentElement,_queries=[],_queryID=0,_type="",_features={},_typeExpr=/\s*(only|not)?\s*(screen|print|[a-z\-]+)\s*(and)?\s*/i,_mediaExpr=/^\s*\(\s*(-[a-z]+-)?(min-|max-)?([a-z\-]+)\s*(:?\s*([0-9]+(\.[0-9]+)?|portrait|landscape)(px|em|dppx|dpcm|rem|%|in|cm|mm|ex|pt|pc|\/([0-9]+(\.[0-9]+)?))?)?\s*\)\s*$/,_timer=0,_matches=function(media){var mql=-1!==media.indexOf(",")&&media.split(",")||[media],mqIndex=mql.length-1,mqLength=mqIndex,mq=null,negateType=null,negateTypeFound="",negateTypeIndex=0,negate=!1,type="",exprListStr="",exprList=null,exprIndex=0,exprLength=0,expr=null,prefix="",length="",unit="",value="",feature="",match=!1;if(""===media)return!0;do if(mq=mql[mqLength-mqIndex],negate=!1,negateType=mq.match(_typeExpr),negateType&&(negateTypeFound=negateType[0],negateTypeIndex=negateType.index),!negateType||-1===mq.substring(0,negateTypeIndex).indexOf("(")&&(negateTypeIndex||!negateType[3]&&negateTypeFound!==negateType.input))match=!1;else{if(exprListStr=mq,negate="not"===negateType[1],negateTypeIndex||(type=negateType[2],exprListStr=mq.substring(negateTypeFound.length)),match=type===_type||"all"===type||""===type,exprList=-1!==exprListStr.indexOf(" and ")&&exprListStr.split(" and ")||[exprListStr],exprIndex=exprList.length-1,exprLength=exprIndex,match&&exprIndex>=0&&""!==exprListStr)do{if(expr=exprList[exprIndex].match(_mediaExpr),!expr||!_features[expr[3]]){match=!1;break}if(prefix=expr[2],length=expr[5],value=length,unit=expr[7],feature=_features[expr[3]],unit&&(value="px"===unit?Number(length):"em"===unit||"rem"===unit?16*length:expr[8]?(length/expr[8]).toFixed(2):"dppx"===unit?96*length:"dpcm"===unit?.3937*length:Number(length)),match="min-"===prefix&&value?feature>=value:"max-"===prefix&&value?value>=feature:value?feature===value:!!feature,!match)break}while(exprIndex--);if(match)break}while(mqIndex--);return negate?!match:match},_setFeature=function(){var w=win.innerWidth||_viewport.clientWidth,h=win.innerHeight||_viewport.clientHeight,dw=win.screen.width,dh=win.screen.height,c=win.screen.colorDepth,x=win.devicePixelRatio;_features.width=w,_features.height=h,_features["aspect-ratio"]=(w/h).toFixed(2),_features["device-width"]=dw,_features["device-height"]=dh,_features["device-aspect-ratio"]=(dw/dh).toFixed(2),_features.color=c,_features["color-index"]=Math.pow(2,c),_features.orientation=h>=w?"portrait":"landscape",_features.resolution=x&&96*x||win.screen.deviceXDPI||96,_features["device-pixel-ratio"]=x||1},_watch=function(){clearTimeout(_timer),_timer=setTimeout(function(){var query=null,qIndex=_queryID-1,qLength=qIndex,match=!1;if(qIndex>=0){_setFeature();do if(query=_queries[qLength-qIndex],query&&(match=_matches(query.mql.media),(match&&!query.mql.matches||!match&&query.mql.matches)&&(query.mql.matches=match,query.listeners)))for(var i=0,il=query.listeners.length;il>i;i++)query.listeners[i]&&query.listeners[i].call(win,query.mql);while(qIndex--)}},10)},_init=function(){var head=_doc.getElementsByTagName("head")[0],style=_doc.createElement("style"),info=null,typeList=["screen","print","speech","projection","handheld","tv","braille","embossed","tty"],typeIndex=0,typeLength=typeList.length,cssText="#mediamatchjs { position: relative; z-index: 0; }",eventPrefix="",addEvent=win.addEventListener||(eventPrefix="on")&&win.attachEvent;for(style.type="text/css",style.id="mediamatchjs",head.appendChild(style),info=win.getComputedStyle&&win.getComputedStyle(style)||style.currentStyle;typeLength>typeIndex;typeIndex++)cssText+="@media "+typeList[typeIndex]+" { #mediamatchjs { position: relative; z-index: "+typeIndex+" } }";style.styleSheet?style.styleSheet.cssText=cssText:style.textContent=cssText,_type=typeList[1*info.zIndex||0],head.removeChild(style),_setFeature(),addEvent(eventPrefix+"resize",_watch),addEvent(eventPrefix+"orientationchange",_watch)};return _init(),function(media){var id=_queryID,mql={matches:!1,media:media,addListener:function(listener){_queries[id].listeners||(_queries[id].listeners=[]),listener&&_queries[id].listeners.push(listener)},removeListener:function(listener){var query=_queries[id],i=0,il=0;if(query)for(il=query.listeners.length;il>i;i++)query.listeners[i]===listener&&query.listeners.splice(i,1)}};return""===media?(mql.matches=!0,mql):(mql.matches=_matches(media),_queryID=_queries.push({mql:mql,listeners:null}),mql)}}(window)),function(name,context,factory){var matchMedia=context.matchMedia;"undefined"!=typeof module&&module.exports?module.exports=factory(matchMedia):"function"==typeof define&&define.amd?define(function(){return context[name]=factory(matchMedia)}):context[name]=factory(matchMedia)}("enquire",this,function(matchMedia){"use strict";function each(collection,fn){var cont,i=0,length=collection.length;for(i;length>i&&(cont=fn(collection[i],i),cont!==!1);i++);}function isArray(target){return"[object Array]"===Object.prototype.toString.apply(target)}function isFunction(target){return"function"==typeof target}function QueryHandler(options){this.options=options,!options.deferSetup&&this.setup()}function MediaQuery(query,isUnconditional){this.query=query,this.isUnconditional=isUnconditional,this.handlers=[],this.mql=matchMedia(query);var self=this;this.listener=function(mql){self.mql=mql,self.assess()},this.mql.addListener(this.listener)}function MediaQueryDispatch(){if(!matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!matchMedia("only all").matches}return QueryHandler.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(target){return this.options===target||this.options.match===target}},MediaQuery.prototype={addHandler:function(handler){var qh=new QueryHandler(handler);this.handlers.push(qh),this.matches()&&qh.on()},removeHandler:function(handler){var handlers=this.handlers;each(handlers,function(h,i){return h.equals(handler)?(h.destroy(),!handlers.splice(i,1)):void 0})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){each(this.handlers,function(handler){handler.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var action=this.matches()?"on":"off";each(this.handlers,function(handler){handler[action]()})}},MediaQueryDispatch.prototype={register:function(q,options,shouldDegrade){var queries=this.queries,isUnconditional=shouldDegrade&&this.browserIsIncapable;return queries[q]||(queries[q]=new MediaQuery(q,isUnconditional)),isFunction(options)&&(options={match:options}),isArray(options)||(options=[options]),each(options,function(handler){queries[q].addHandler(handler)}),this},unregister:function(q,handler){var query=this.queries[q];return query&&(handler?query.removeHandler(handler):(query.clear(),delete this.queries[q])),this}},new MediaQueryDispatch}),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery)}(function($){function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){0===s.indexOf('"')&&(s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s=decodeURIComponent(s.replace(pluses," ")),config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var pluses=/\+/g,config=$.cookie=function(key,value,options){if(void 0!==value&&!$.isFunction(value)){if(options=$.extend({},config.defaults,options),"number"==typeof options.expires){var days=options.expires,t=options.expires=new Date;t.setDate(t.getDate()+days)}return document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}for(var result=key?void 0:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;l>i;i++){var parts=cookies[i].split("="),name=decode(parts.shift()),cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}key||void 0===(cookie=read(cookie))||(result[name]=cookie)}return result};config.defaults={},$.removeCookie=function(key,options){return void 0===$.cookie(key)?!1:($.cookie(key,"",$.extend({},options,{expires:-1})),!$.cookie(key))}}),jQuery&&function($){function _init(opts){if($body=$("body"),$.extend(options,opts),!$body.data("scouting")){$body.find("a").not("[data-scout-event]").each(_buildEvent),$body.data("scouting",!0).on("click.scout","*[data-scout-event]",_track);for(var i in $.scout.extensions)$.scout.extensions[i](options.extensions[i]||null)}}function _track(e){e.preventDefault();var $target=$(this),url=$target.attr("href"),data=$target.data("scout-event").split(",");for(var i in data)data[i]=$.trim(data[i]);_push(data[0],data[1],data[2]||url,data[3],data[4]),url&&!$target.data("scout-stop")&&setTimeout(function(){$target.attr("target")?window.open(url,$target.attr("target")):document.location.href=url},options.delay)}function _buildEvent(){var eventData,$target=$(this),href="undefined"!=typeof $target.attr("href")?$target.attr("href"):"",internal=href.match(document.domain.split(".").reverse()[1]+"."+document.domain.split(".").reverse()[0]);if(href.match(/^mailto\:/i))eventData="Email, Click, "+href.replace(/^mailto\:/i,"");else if(href.match(/^tel\:/i))eventData="Telephone, Click, "+href.replace(/^tel\:/i,"");else if(href.match(options.filetypes)){var extension=/[.]/.exec(href)?/[^.]+$/.exec(href):void 0;eventData="File, Download:"+extension[0]+", "+href.replace(/ /g,"-")}else href.match(/^https?\:/i)&&!internal&&(eventData="ExternalLink, Click, "+href.replace(/^https?\:\/\//i,""));$target.attr("data-scout-event",eventData)}function _push(category,action,label,value,noninteraction){"undefined"==typeof _gaq&&(_gaq=[]),_gaq.push(["_trackEvent",category,action,label,value,noninteraction])}var $body,options={delay:100,extensions:{},filetypes:/\.(zip|exe|dmg|pdf|doc.*|xls.*|ppt.*|mp3|txt|rar|wma|mov|avi|wmv|flv|wav)$/i};$.scout=function(){arguments.length&&"object"!=typeof arguments[0]?_push.apply(this,arguments):_init.apply(this,arguments)},$.scout.extensions={}}(jQuery),jQuery&&function($){function _init(opts){options=$.extend(options,opts),$window.on("scroll.scout-maxscroll",_onScroll).on("unload.scout-maxscroll, pronto.request",_pushScroll),_onScroll()}function _onScroll(){var scrollTop=$window.scrollTop();scrollMax=scrollMax>scrollTop?scrollMax:scrollTop,_clearTimer(),eventTimer=setTimeout(_pushScroll,1e3*options.time)}function _pushScroll(){_clearTimer();var properties=_getProperties();$.scout("ScrollPosition","Device:"+properties.device,properties.path,properties.position)}function _getProperties(){var windowWidth=$window.width(),windowHeight=$window.height(),documentHeight=$document.outerHeight(!1),device="Mobile";windowWidth>460&&(device="Tablet"),windowWidth>740&&(device="Desktop");var position=Math.floor(scrollMax/(documentHeight-windowHeight)*100);return 0>position&&(position=0),position>100&&(position=100),{device:device,position:position,path:window.location.pathname}}function _clearTimer(){null!==eventTimer&&(clearTimeout(eventTimer),eventTimer=null)}var options={time:60},$window=$(window),$document=$(document),eventTimer=null,scrollMax=0;$.scout&&($.scout.extensions.maxScroll=function(opts){_init(opts)})}(jQuery),function($){"use strict";$.fn.ajaxChimp=function(options){return $(this).each(function(i,el){var form=$(el),email=form.find("input[type=email]"),label=form.find("label[for="+email.attr("id")+"]"),settings=$.extend({url:form.attr("action")},options),url=settings.url.replace("/post?","/post-json?").concat("&c=?");form.attr("novalidate","true"),email.attr("name","EMAIL"),form.submit(function(){function successCallback(resp){if("success"===resp.result)label.html("We have sent you a confirmation email."),label.removeClass("error").addClass("valid"),email.removeClass("error").addClass("valid");else{email.removeClass("valid").addClass("error"),label.removeClass("valid").addClass("error");var msg,index=-1;try{var parts=resp.msg.split(" - ",2);if(void 0===parts[1])msg=resp.msg;else{var i=parseInt(parts[0],10);i.toString()===parts[0]?(index=parts[0],msg=parts[1]):(index=-1,msg=resp.msg)}}catch(e){index=-1,msg=resp.msg}label.html(msg)}label.show(2e3),settings.callback&&settings.callback(resp)}var data={},dataArray=form.serializeArray();return $.each(dataArray,function(index,item){data[item.name]=item.value}),$.ajax({url:url,data:data,success:successCallback,dataType:"jsonp",error:function(resp,text){console.log("mailchimp ajax submit error: "+text)}}),label.html("Submitting...").show(2e3),!1})}),this}}(jQuery),function(d){function m(a){if(a in j.style)return a;var b=["Moz","Webkit","O","ms"],c=a.charAt(0).toUpperCase()+a.substr(1);if(a in j.style)return a;for(a=0;a<b.length;++a){var d=b[a]+c;if(d in j.style)return d}}function l(a){return"string"==typeof a&&this.parse(a),this}function q(a,b,c,e){var h=[];d.each(a,function(a){a=d.camelCase(a),a=d.transit.propertyMap[a]||d.cssProps[a]||a,a=a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}),-1===d.inArray(a,h)&&h.push(a)}),d.cssEase[c]&&(c=d.cssEase[c]);var f=""+n(b)+" "+c;0<parseInt(e,10)&&(f+=" "+n(e));var g=[];return d.each(h,function(a,b){g.push(b+" "+f)}),g.join(", ")}function f(a,b){b||(d.cssNumber[a]=!0),d.transit.propertyMap[a]=e.transform,d.cssHooks[a]={get:function(b){return d(b).css("transit:transform").get(a)},set:function(b,e){var h=d(b).css("transit:transform");h.setFromString(a,e),d(b).css({"transit:transform":h})}}}function g(a,b){return"string"!=typeof a||a.match(/^[\-0-9\.]+$/)?""+a+b:a}function n(a){return d.fx.speeds[a]&&(a=d.fx.speeds[a]),g(a,"ms")}d.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var j=document.createElement("div"),e={},r=-1<navigator.userAgent.toLowerCase().indexOf("chrome");e.transition=m("transition"),e.transitionDelay=m("transitionDelay"),e.transform=m("transform"),e.transformOrigin=m("transformOrigin"),j.style[e.transform]="",j.style[e.transform]="rotateY(90deg)",e.transform3d=""!==j.style[e.transform];var k,p=e.transitionEnd={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"}[e.transition]||null;for(k in e)e.hasOwnProperty(k)&&"undefined"==typeof d.support[k]&&(d.support[k]=e[k]);j=null,d.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},d.cssHooks["transit:transform"]={get:function(a){return d(a).data("transform")||new l},set:function(a,b){var c=b;c instanceof l||(c=new l(c)),a.style[e.transform]="WebkitTransform"!==e.transform||r?c.toString():c.toString(!0),d(a).data("transform",c)}},d.cssHooks.transform={set:d.cssHooks["transit:transform"].set},"1.8">d.fn.jquery&&(d.cssHooks.transformOrigin={get:function(a){return a.style[e.transformOrigin]},set:function(a,b){a.style[e.transformOrigin]=b}},d.cssHooks.transition={get:function(a){return a.style[e.transition]},set:function(a,b){a.style[e.transition]=b}}),f("scale"),f("translate"),f("rotate"),f("rotateX"),f("rotateY"),f("rotate3d"),f("perspective"),f("skewX"),f("skewY"),f("x",!0),f("y",!0),l.prototype={setFromString:function(a,b){var c="string"==typeof b?b.split(","):b.constructor===Array?b:[b];c.unshift(a),l.prototype.set.apply(this,c)},set:function(a){var b=Array.prototype.slice.apply(arguments,[1]);this.setter[a]?this.setter[a].apply(this,b):this[a]=b.join(",")},get:function(a){return this.getter[a]?this.getter[a].apply(this):this[a]||0},setter:{rotate:function(a){this.rotate=g(a,"deg")},rotateX:function(a){this.rotateX=g(a,"deg")},rotateY:function(a){this.rotateY=g(a,"deg")},scale:function(a,b){void 0===b&&(b=a),this.scale=a+","+b},skewX:function(a){this.skewX=g(a,"deg")},skewY:function(a){this.skewY=g(a,"deg")},perspective:function(a){this.perspective=g(a,"px")},x:function(a){this.set("translate",a,null)},y:function(a){this.set("translate",null,a)},translate:function(a,b){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==a&&void 0!==a&&(this._translateX=g(a,"px")),null!==b&&void 0!==b&&(this._translateY=g(b,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var a=(this.scale||"1,1").split(",");return a[0]&&(a[0]=parseFloat(a[0])),a[1]&&(a[1]=parseFloat(a[1])),a[0]===a[1]?a[0]:a},rotate3d:function(){for(var a=(this.rotate3d||"0,0,0,0deg").split(","),b=0;3>=b;++b)a[b]&&(a[b]=parseFloat(a[b]));return a[3]&&(a[3]=g(a[3],"deg")),a}},parse:function(a){var b=this;a.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(a,d,e){b.setFromString(d,e)})},toString:function(a){var c,b=[];for(c in this)this.hasOwnProperty(c)&&(e.transform3d||"rotateX"!==c&&"rotateY"!==c&&"perspective"!==c&&"transformOrigin"!==c)&&"_"!==c[0]&&(a&&"scale"===c?b.push(c+"3d("+this[c]+",1)"):a&&"translate"===c?b.push(c+"3d("+this[c]+",0)"):b.push(c+"("+this[c]+")"));return b.join(" ")}},d.fn.transition=d.fn.transit=function(a,b,c,f){var h=this,g=0,j=!0;"function"==typeof b&&(f=b,b=void 0),"function"==typeof c&&(f=c,c=void 0),"undefined"!=typeof a.easing&&(c=a.easing,delete a.easing),"undefined"!=typeof a.duration&&(b=a.duration,delete a.duration),"undefined"!=typeof a.complete&&(f=a.complete,delete a.complete),"undefined"!=typeof a.queue&&(j=a.queue,delete a.queue),"undefined"!=typeof a.delay&&(g=a.delay,delete a.delay),"undefined"==typeof b&&(b=d.fx.speeds._default),"undefined"==typeof c&&(c=d.cssEase._default),b=n(b);var l=q(a,b,c,g),k=d.transit.enabled&&e.transition?parseInt(b,10)+parseInt(g,10):0;if(0===k)return b=j,c=function(b){h.css(a),f&&f.apply(h),b&&b()},!0===b?h.queue(c):b?h.queue(b,c):c(),h;var m={};return b=j,c=function(b){this.offsetWidth;var c=!1,g=function(){c&&h.unbind(p,g),k>0&&h.each(function(){this.style[e.transition]=m[this]||null}),"function"==typeof f&&f.apply(h),"function"==typeof b&&b()};k>0&&p&&d.transit.useTransitionEnd?(c=!0,h.bind(p,g)):window.setTimeout(g,k),h.each(function(){k>0&&(this.style[e.transition]=l),d(this).css(a)})},!0===b?h.queue(c):b?h.queue(b,c):c(),this},d.transit.getTransitionValue=q}(jQuery),function(g){function P(c){return!c||void 0!==c.allowPageScroll||void 0===c.swipe&&void 0===c.swipeStatus||(c.allowPageScroll=G),c||(c={}),c=g.extend({},g.fn.swipe.defaults,c),this.each(function(){var b=g(this),f=b.data(w);f||(f=new W(this,c),b.data(w,f))})}function W(c,b){function H(a){var c,a=a.originalEvent,Q=n?a.touches[0]:a;return d=R,n?h=a.touches.length:a.preventDefault(),i=0,j=null,k=0,n&&h!==b.fingers&&b.fingers!==x?t(a):(r=f=Q.pageX,s=p=Q.pageY,y=(new Date).getTime(),b.swipeStatus&&(c=l(a,d))),!1===c?(d=m,l(a,d),c):(e.bind(I,J),e.bind(K,L),void 0)}function J(a){if(a=a.originalEvent,d!==q&&d!==m){var c,e=n?a.touches[0]:a;f=e.pageX,p=e.pageY,u=(new Date).getTime(),j=S(),n&&(h=a.touches.length),d=z;var e=a,g=j;if(b.allowPageScroll===G)e.preventDefault();else{var o=b.allowPageScroll===T;switch(g){case v:(b.swipeLeft&&o||!o&&b.allowPageScroll!=M)&&e.preventDefault();break;case A:(b.swipeRight&&o||!o&&b.allowPageScroll!=M)&&e.preventDefault();break;case B:(b.swipeUp&&o||!o&&b.allowPageScroll!=N)&&e.preventDefault();break;case C:(b.swipeDown&&o||!o&&b.allowPageScroll!=N)&&e.preventDefault()}}h!==b.fingers&&b.fingers!==x&&n?(d=m,l(a,d)):(i=U(),k=u-y,b.swipeStatus&&(c=l(a,d,j,i,k)),b.triggerOnTouchEnd||(e=!(b.maxTimeThreshold?!(k>=b.maxTimeThreshold):1),!0===D()?(d=q,c=l(a,d)):e&&(d=m,l(a,d)))),!1===c&&(d=m,l(a,d))}}function L(a){if(a=a.originalEvent,a.preventDefault(),u=(new Date).getTime(),i=U(),j=S(),k=u-y,b.triggerOnTouchEnd||!1===b.triggerOnTouchEnd&&d===z)if(d=q,h!==b.fingers&&b.fingers!==x&&n||0===f)d=m,l(a,d);else{var c=!(b.maxTimeThreshold?!(k>=b.maxTimeThreshold):1);!0!==D()&&null!==D()||c?(c||!1===D())&&(d=m,l(a,d)):l(a,d)}else d===z&&(d=m,l(a,d));e.unbind(I,J,!1),e.unbind(K,L,!1)}function t(){y=u=p=f=s=r=h=0}function l(a,c){var d=void 0;if(b.swipeStatus&&(d=b.swipeStatus.call(e,a,c,j||null,i||0,k||0,h)),c!==m||!b.click||1!==h&&n||!isNaN(i)&&0!==i||(d=b.click.call(e,a,a.target)),c==q)switch(b.swipe&&(d=b.swipe.call(e,a,j,i,k,h)),j){case v:b.swipeLeft&&(d=b.swipeLeft.call(e,a,j,i,k,h));break;case A:b.swipeRight&&(d=b.swipeRight.call(e,a,j,i,k,h));break;case B:b.swipeUp&&(d=b.swipeUp.call(e,a,j,i,k,h));break;case C:b.swipeDown&&(d=b.swipeDown.call(e,a,j,i,k,h))}return(c===m||c===q)&&t(a),d}function D(){return null!==b.threshold?i>=b.threshold:null}function U(){return Math.round(Math.sqrt(Math.pow(f-r,2)+Math.pow(p-s,2)))}function S(){var a;return a=Math.atan2(p-s,r-f),a=Math.round(180*a/Math.PI),0>a&&(a=360-Math.abs(a)),45>=a&&a>=0?v:360>=a&&a>=315?v:a>=135&&225>=a?A:a>45&&135>a?C:B}function V(){e.unbind(E,H),e.unbind(F,t),e.unbind(I,J),e.unbind(K,L)}var f,p,r,s,O=n||!b.fallbackToMouseEvents,E=O?"touchstart":"mousedown",I=O?"touchmove":"mousemove",K=O?"touchend":"mouseup",F="touchcancel",i=0,j=null,k=0,e=g(c),d="start",h=0,y=p=f=s=r=0,u=0;try{e.bind(E,H),e.bind(F,t)}catch(P){g.error("events not supported "+E+","+F+" on jQuery.swipe")}this.enable=function(){return e.bind(E,H),e.bind(F,t),e},this.disable=function(){return V(),e},this.destroy=function(){return V(),e.data(w,null),e}}var v="left",A="right",B="up",C="down",G="none",T="auto",M="horizontal",N="vertical",x="all",R="start",z="move",q="end",m="cancel",n="ontouchstart"in window,w="TouchSwipe";g.fn.swipe=function(c){var b=g(this),f=b.data(w);if(f&&"string"==typeof c){if(f[c])return f[c].apply(this,Array.prototype.slice.call(arguments,1));g.error("Method "+c+" does not exist on jQuery.swipe")}else if(!(f||"object"!=typeof c&&c))return P.apply(this,arguments);return b},g.fn.swipe.defaults={fingers:1,threshold:75,maxTimeThreshold:null,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,click:null,triggerOnTouchEnd:!0,allowPageScroll:"auto",fallbackToMouseEvents:!0},g.fn.swipe.phases={PHASE_START:R,PHASE_MOVE:z,PHASE_END:q,PHASE_CANCEL:m},g.fn.swipe.directions={LEFT:v,RIGHT:A,UP:B,DOWN:C},g.fn.swipe.pageScroll={NONE:G,HORIZONTAL:M,VERTICAL:N,AUTO:T},g.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:x}}(jQuery),function($){function sc_setScroll(a,b,c){return"transition"==c.transition&&"swing"==b&&(b="ease"),{anims:[],duration:a,orgDuration:a,easing:b,startTime:getTime()}}function sc_startScroll(a,b){for(var c=0,d=a.anims.length;d>c;c++){var e=a.anims[c];e&&e[0][b.transition](e[1],a.duration,a.easing,e[2])}}function sc_stopScroll(a,b){is_boolean(b)||(b=!0),is_object(a.pre)&&sc_stopScroll(a.pre,b);for(var c=0,d=a.anims.length;d>c;c++){var e=a.anims[c];e[0].stop(!0),b&&(e[0].css(e[1]),is_function(e[2])&&e[2]())}is_object(a.post)&&sc_stopScroll(a.post,b)}function sc_afterScroll(a,b,c){switch(b&&b.remove(),c.fx){case"fade":case"crossfade":case"cover-fade":case"uncover-fade":a.css("opacity",1),a.css("filter","")
}}function sc_fireCallbacks(a,b,c,d,e){if(b[c]&&b[c].call(a,d),e[c].length)for(var f=0,g=e[c].length;g>f;f++)e[c][f].call(a,d);return[]}function sc_fireQueue(a,b,c){return b.length&&(a.trigger(cf_e(b[0][0],c),b[0][1]),b.shift()),b}function sc_hideHiddenItems(a){a.each(function(){var a=$(this);a.data("_cfs_isHidden",a.is(":hidden")).hide()})}function sc_showHiddenItems(a){a&&a.each(function(){var a=$(this);a.data("_cfs_isHidden")||a.show()})}function sc_clearTimers(a){return a.auto&&clearTimeout(a.auto),a.progress&&clearInterval(a.progress),a}function sc_mapCallbackArguments(a,b,c,d,e,f,g){return{width:g.width,height:g.height,items:{old:a,skipped:b,visible:c},scroll:{items:d,direction:e,duration:f}}}function sc_getDuration(a,b,c,d){var e=a.duration;return"none"==a.fx?0:("auto"==e?e=b.scroll.duration/b.scroll.items*c:10>e&&(e=d/e),1>e?0:("fade"==a.fx&&(e/=2),Math.round(e)))}function nv_showNavi(a,b,c){var d=is_number(a.items.minimum)?a.items.minimum:a.items.visible+1;if("show"==b||"hide"==b)var e=b;else if(d>b){debug(c,"Not enough items ("+b+" total, "+d+" needed): Hiding navigation.");var e="hide"}else var e="show";var f="show"==e?"removeClass":"addClass",g=cf_c("hidden",c);a.auto.button&&a.auto.button[e]()[f](g),a.prev.button&&a.prev.button[e]()[f](g),a.next.button&&a.next.button[e]()[f](g),a.pagination.container&&a.pagination.container[e]()[f](g)}function nv_enableNavi(a,b,c){if(!a.circular&&!a.infinite){var d="removeClass"==b||"addClass"==b?b:!1,e=cf_c("disabled",c);if(a.auto.button&&d&&a.auto.button[d](e),a.prev.button){var f=d||0==b?"addClass":"removeClass";a.prev.button[f](e)}if(a.next.button){var f=d||b==a.items.visible?"addClass":"removeClass";a.next.button[f](e)}}}function go_getObject(a,b){return is_function(b)?b=b.call(a):is_undefined(b)&&(b={}),b}function go_getItemsObject(a,b){return b=go_getObject(a,b),is_number(b)?b={visible:b}:"variable"==b?b={visible:b,width:b,height:b}:is_object(b)||(b={}),b}function go_getScrollObject(a,b){return b=go_getObject(a,b),is_number(b)?b=50>=b?{items:b}:{duration:b}:is_string(b)?b={easing:b}:is_object(b)||(b={}),b}function go_getNaviObject(a,b){if(b=go_getObject(a,b),is_string(b)){var c=cf_getKeyCode(b);b=-1==c?$(b):c}return b}function go_getAutoObject(a,b){return b=go_getNaviObject(a,b),is_jquery(b)?b={button:b}:is_boolean(b)?b={play:b}:is_number(b)&&(b={timeoutDuration:b}),b.progress&&(is_string(b.progress)||is_jquery(b.progress))&&(b.progress={bar:b.progress}),b}function go_complementAutoObject(a,b){return is_function(b.button)&&(b.button=b.button.call(a)),is_string(b.button)&&(b.button=$(b.button)),is_boolean(b.play)||(b.play=!0),is_number(b.delay)||(b.delay=0),is_undefined(b.pauseOnEvent)&&(b.pauseOnEvent=!0),is_boolean(b.pauseOnResize)||(b.pauseOnResize=!0),is_number(b.timeoutDuration)||(b.timeoutDuration=10>b.duration?2500:5*b.duration),b.progress&&(is_function(b.progress.bar)&&(b.progress.bar=b.progress.bar.call(a)),is_string(b.progress.bar)&&(b.progress.bar=$(b.progress.bar)),b.progress.bar?(is_function(b.progress.updater)||(b.progress.updater=$.fn.carouFredSel.progressbarUpdater),is_number(b.progress.interval)||(b.progress.interval=50)):b.progress=!1),b}function go_getPrevNextObject(a,b){return b=go_getNaviObject(a,b),is_jquery(b)?b={button:b}:is_number(b)&&(b={key:b}),b}function go_complementPrevNextObject(a,b){return is_function(b.button)&&(b.button=b.button.call(a)),is_string(b.button)&&(b.button=$(b.button)),is_string(b.key)&&(b.key=cf_getKeyCode(b.key)),b}function go_getPaginationObject(a,b){return b=go_getNaviObject(a,b),is_jquery(b)?b={container:b}:is_boolean(b)&&(b={keys:b}),b}function go_complementPaginationObject(a,b){return is_function(b.container)&&(b.container=b.container.call(a)),is_string(b.container)&&(b.container=$(b.container)),is_number(b.items)||(b.items=!1),is_boolean(b.keys)||(b.keys=!1),is_function(b.anchorBuilder)||is_false(b.anchorBuilder)||(b.anchorBuilder=$.fn.carouFredSel.pageAnchorBuilder),is_number(b.deviation)||(b.deviation=0),b}function go_getSwipeObject(a,b){return is_function(b)&&(b=b.call(a)),is_undefined(b)&&(b={onTouch:!1}),is_true(b)?b={onTouch:b}:is_number(b)&&(b={items:b}),b}function go_complementSwipeObject(a,b){return is_boolean(b.onTouch)||(b.onTouch=!0),is_boolean(b.onMouse)||(b.onMouse=!1),is_object(b.options)||(b.options={}),is_boolean(b.options.triggerOnTouchEnd)||(b.options.triggerOnTouchEnd=!1),b}function go_getMousewheelObject(a,b){return is_function(b)&&(b=b.call(a)),is_true(b)?b={}:is_number(b)?b={items:b}:is_undefined(b)&&(b=!1),b}function go_complementMousewheelObject(a,b){return b}function gn_getItemIndex(a,b,c,d,e){if(is_string(a)&&(a=$(a,e)),is_object(a)&&(a=$(a,e)),is_jquery(a)?(a=e.children().index(a),is_boolean(c)||(c=!1)):is_boolean(c)||(c=!0),is_number(a)||(a=0),is_number(b)||(b=0),c&&(a+=d.first),a+=b,d.total>0){for(;a>=d.total;)a-=d.total;for(;0>a;)a+=d.total}return a}function gn_getVisibleItemsPrev(a,b,c){for(var d=0,e=0,f=c;f>=0;f--){var g=a.eq(f);if(d+=g.is(":visible")?g[b.d.outerWidth](!0):0,d>b.maxDimension)return e;0==f&&(f=a.length),e++}}function gn_getVisibleItemsPrevFilter(a,b,c){return gn_getItemsPrevFilter(a,b.items.filter,b.items.visibleConf.org,c)}function gn_getScrollItemsPrevFilter(a,b,c,d){return gn_getItemsPrevFilter(a,b.items.filter,d,c)}function gn_getItemsPrevFilter(a,b,c,d){for(var e=0,f=0,g=d,h=a.length;g>=0;g--){if(f++,f==h)return f;var i=a.eq(g);if(i.is(b)&&(e++,e==c))return f;0==g&&(g=h)}}function gn_getVisibleOrg(a,b){return b.items.visibleConf.org||a.children().slice(0,b.items.visible).filter(b.items.filter).length}function gn_getVisibleItemsNext(a,b,c){for(var d=0,e=0,f=c,g=a.length-1;g>=f;f++){var h=a.eq(f);if(d+=h.is(":visible")?h[b.d.outerWidth](!0):0,d>b.maxDimension)return e;if(e++,e==g+1)return e;f==g&&(f=-1)}}function gn_getVisibleItemsNextTestCircular(a,b,c,d){var e=gn_getVisibleItemsNext(a,b,c);return b.circular||c+e>d&&(e=d-c),e}function gn_getVisibleItemsNextFilter(a,b,c){return gn_getItemsNextFilter(a,b.items.filter,b.items.visibleConf.org,c,b.circular)}function gn_getScrollItemsNextFilter(a,b,c,d){return gn_getItemsNextFilter(a,b.items.filter,d+1,c,b.circular)-1}function gn_getItemsNextFilter(a,b,c,d){for(var f=0,g=0,h=d,i=a.length-1;i>=h;h++){if(g++,g>=i)return g;var j=a.eq(h);if(j.is(b)&&(f++,f==c))return g;h==i&&(h=-1)}}function gi_getCurrentItems(a,b){return a.slice(0,b.items.visible)}function gi_getOldItemsPrev(a,b,c){return a.slice(c,b.items.visibleConf.old+c)}function gi_getNewItemsPrev(a,b){return a.slice(0,b.items.visible)}function gi_getOldItemsNext(a,b){return a.slice(0,b.items.visibleConf.old)}function gi_getNewItemsNext(a,b,c){return a.slice(c,b.items.visible+c)}function sz_storeMargin(a,b,c){b.usePadding&&(is_string(c)||(c="_cfs_origCssMargin"),a.each(function(){var a=$(this),d=parseInt(a.css(b.d.marginRight),10);is_number(d)||(d=0),a.data(c,d)}))}function sz_resetMargin(a,b,c){if(b.usePadding){var d=is_boolean(c)?c:!1;is_number(c)||(c=0),sz_storeMargin(a,b,"_cfs_tempCssMargin"),a.each(function(){var a=$(this);a.css(b.d.marginRight,d?a.data("_cfs_tempCssMargin"):c+a.data("_cfs_origCssMargin"))})}}function sz_storeOrigCss(a){a.each(function(){var a=$(this);a.data("_cfs_origCss",a.attr("style")||"")})}function sz_restoreOrigCss(a){a.each(function(){var a=$(this);a.attr("style",a.data("_cfs_origCss")||"")})}function sz_setResponsiveSizes(a,b){var d=(a.items.visible,a.items[a.d.width]),e=a[a.d.height],f=is_percentage(e);b.each(function(){var b=$(this),c=d-ms_getPaddingBorderMargin(b,a,"Width");b[a.d.width](c),f&&b[a.d.height](ms_getPercentage(c,e))})}function sz_setSizes(a,b){var c=a.parent(),d=a.children(),e=gi_getCurrentItems(d,b),f=cf_mapWrapperSizes(ms_getSizes(e,b,!0),b,!1);if(c.css(f),b.usePadding){var g=b.padding,h=g[b.d[1]];b.align&&0>h&&(h=0);var i=e.last();i.css(b.d.marginRight,i.data("_cfs_origCssMargin")+h),a.css(b.d.top,g[b.d[0]]),a.css(b.d.left,g[b.d[3]])}return a.css(b.d.width,f[b.d.width]+2*ms_getTotalSize(d,b,"width")),a.css(b.d.height,ms_getLargestSize(d,b,"height")),f}function ms_getSizes(a,b,c){return[ms_getTotalSize(a,b,"width",c),ms_getLargestSize(a,b,"height",c)]}function ms_getLargestSize(a,b,c,d){return is_boolean(d)||(d=!1),is_number(b[b.d[c]])&&d?b[b.d[c]]:is_number(b.items[b.d[c]])?b.items[b.d[c]]:(c=c.toLowerCase().indexOf("width")>-1?"outerWidth":"outerHeight",ms_getTrueLargestSize(a,b,c))}function ms_getTrueLargestSize(a,b,c){for(var d=0,e=0,f=a.length;f>e;e++){var g=a.eq(e),h=g.is(":visible")?g[b.d[c]](!0):0;h>d&&(d=h)}return d}function ms_getTotalSize(a,b,c,d){if(is_boolean(d)||(d=!1),is_number(b[b.d[c]])&&d)return b[b.d[c]];if(is_number(b.items[b.d[c]]))return b.items[b.d[c]]*a.length;for(var e=c.toLowerCase().indexOf("width")>-1?"outerWidth":"outerHeight",f=0,g=0,h=a.length;h>g;g++){var i=a.eq(g);f+=i.is(":visible")?i[b.d[e]](!0):0}return f}function ms_getParentSize(a,b,c){var d=a.is(":visible");d&&a.hide();var e=a.parent()[b.d[c]]();return d&&a.show(),e}function ms_getMaxDimension(a,b){return is_number(a[a.d.width])?a[a.d.width]:b}function ms_hasVariableSizes(a,b,c){for(var d=!1,e=!1,f=0,g=a.length;g>f;f++){var h=a.eq(f),i=h.is(":visible")?h[b.d[c]](!0):0;d===!1?d=i:d!=i&&(e=!0),0==d&&(e=!0)}return e}function ms_getPaddingBorderMargin(a,b,c){return a[b.d["outer"+c]](!0)-a[b.d[c.toLowerCase()]]()}function ms_getPercentage(a,b){if(is_percentage(b)){if(b=parseInt(b.slice(0,-1),10),!is_number(b))return a;a*=b/100}return a}function cf_e(a,b,c,d,e){return is_boolean(c)||(c=!0),is_boolean(d)||(d=!0),is_boolean(e)||(e=!1),c&&(a=b.events.prefix+a),d&&(a=a+"."+b.events.namespace),d&&e&&(a+=b.serialNumber),a}function cf_c(a,b){return is_string(b.classnames[a])?b.classnames[a]:a}function cf_mapWrapperSizes(a,b,c){is_boolean(c)||(c=!0);var d=b.usePadding&&c?b.padding:[0,0,0,0],e={};return e[b.d.width]=a[0]+d[1]+d[3],e[b.d.height]=a[1]+d[0]+d[2],e}function cf_sortParams(a,b){for(var c=[],d=0,e=a.length;e>d;d++)for(var f=0,g=b.length;g>f;f++)if(b[f].indexOf(typeof a[d])>-1&&is_undefined(c[f])){c[f]=a[d];break}return c}function cf_getPadding(a){if(is_undefined(a))return[0,0,0,0];if(is_number(a))return[a,a,a,a];if(is_string(a)&&(a=a.split("px").join("").split("em").join("").split(" ")),!is_array(a))return[0,0,0,0];for(var b=0;4>b;b++)a[b]=parseInt(a[b],10);switch(a.length){case 0:return[0,0,0,0];case 1:return[a[0],a[0],a[0],a[0]];case 2:return[a[0],a[1],a[0],a[1]];case 3:return[a[0],a[1],a[2],a[1]];default:return[a[0],a[1],a[2],a[3]]}}function cf_getAlignPadding(a,b){var c=is_number(b[b.d.width])?Math.ceil(b[b.d.width]-ms_getTotalSize(a,b,"width")):0;switch(b.align){case"left":return[0,c];case"right":return[c,0];case"center":default:return[Math.ceil(c/2),Math.floor(c/2)]}}function cf_getDimensions(a){for(var b=[["width","innerWidth","outerWidth","height","innerHeight","outerHeight","left","top","marginRight",0,1,2,3],["height","innerHeight","outerHeight","width","innerWidth","outerWidth","top","left","marginBottom",3,2,1,0]],c=b[0].length,d="right"==a.direction||"left"==a.direction?0:1,e={},f=0;c>f;f++)e[b[0][f]]=b[d][f];return e}function cf_getAdjust(a,b,c,d){var e=a;if(is_function(c))e=c.call(d,e);else if(is_string(c)){var f=c.split("+"),g=c.split("-");if(g.length>f.length)var h=!0,i=g[0],j=g[1];else var h=!1,i=f[0],j=f[1];switch(i){case"even":e=1==a%2?a-1:a;break;case"odd":e=0==a%2?a-1:a;break;default:e=a}j=parseInt(j,10),is_number(j)&&(h&&(j=-j),e+=j)}return(!is_number(e)||1>e)&&(e=1),e}function cf_getItemsAdjust(a,b,c,d){return cf_getItemAdjustMinMax(cf_getAdjust(a,b,c,d),b.items.visibleConf)}function cf_getItemAdjustMinMax(a,b){return is_number(b.min)&&b.min>a&&(a=b.min),is_number(b.max)&&a>b.max&&(a=b.max),1>a&&(a=1),a}function cf_getSynchArr(a){is_array(a)||(a=[[a]]),is_array(a[0])||(a=[a]);for(var b=0,c=a.length;c>b;b++)is_string(a[b][0])&&(a[b][0]=$(a[b][0])),is_boolean(a[b][1])||(a[b][1]=!0),is_boolean(a[b][2])||(a[b][2]=!0),is_number(a[b][3])||(a[b][3]=0);return a}function cf_getKeyCode(a){return"right"==a?39:"left"==a?37:"up"==a?38:"down"==a?40:-1}function cf_setCookie(a,b,c){if(a){var d=b.triggerHandler(cf_e("currentPosition",c));$.fn.carouFredSel.cookie.set(a,d)}}function cf_getCookie(a){var b=$.fn.carouFredSel.cookie.get(a);return""==b?0:b}function in_mapCss(a,b){for(var c={},d=0,e=b.length;e>d;d++)c[b[d]]=a.css(b[d]);return c}function in_complementItems(a,b,c,d){return is_object(a.visibleConf)||(a.visibleConf={}),is_object(a.sizesConf)||(a.sizesConf={}),0==a.start&&is_number(d)&&(a.start=d),is_object(a.visible)?(a.visibleConf.min=a.visible.min,a.visibleConf.max=a.visible.max,a.visible=!1):is_string(a.visible)?("variable"==a.visible?a.visibleConf.variable=!0:a.visibleConf.adjust=a.visible,a.visible=!1):is_function(a.visible)&&(a.visibleConf.adjust=a.visible,a.visible=!1),is_string(a.filter)||(a.filter=c.filter(":hidden").length>0?":visible":"*"),a[b.d.width]||(b.responsive?(debug(!0,"Set a "+b.d.width+" for the items!"),a[b.d.width]=ms_getTrueLargestSize(c,b,"outerWidth")):a[b.d.width]=ms_hasVariableSizes(c,b,"outerWidth")?"variable":c[b.d.outerWidth](!0)),a[b.d.height]||(a[b.d.height]=ms_hasVariableSizes(c,b,"outerHeight")?"variable":c[b.d.outerHeight](!0)),a.sizesConf.width=a.width,a.sizesConf.height=a.height,a}function in_complementVisibleItems(a,b){return"variable"==a.items[a.d.width]&&(a.items.visibleConf.variable=!0),a.items.visibleConf.variable||(is_number(a[a.d.width])?a.items.visible=Math.floor(a[a.d.width]/a.items[a.d.width]):(a.items.visible=Math.floor(b/a.items[a.d.width]),a[a.d.width]=a.items.visible*a.items[a.d.width],a.items.visibleConf.adjust||(a.align=!1)),("Infinity"==a.items.visible||1>a.items.visible)&&(debug(!0,'Not a valid number of visible items: Set to "variable".'),a.items.visibleConf.variable=!0)),a}function in_complementPrimarySize(a,b,c){return"auto"==a&&(a=ms_getTrueLargestSize(c,b,"outerWidth")),a}function in_complementSecondarySize(a,b,c){return"auto"==a&&(a=ms_getTrueLargestSize(c,b,"outerHeight")),a||(a=b.items[b.d.height]),a}function in_getAlignPadding(a,b){var c=cf_getAlignPadding(gi_getCurrentItems(b,a),a);return a.padding[a.d[1]]=c[1],a.padding[a.d[3]]=c[0],a}function in_getResponsiveValues(a,b){var d=cf_getItemAdjustMinMax(Math.ceil(a[a.d.width]/a.items[a.d.width]),a.items.visibleConf);d>b.length&&(d=b.length);var e=Math.floor(a[a.d.width]/d);return a.items.visible=d,a.items[a.d.width]=e,a[a.d.width]=d*e,a}function bt_pauseOnHoverConfig(a){if(is_string(a))var b=a.indexOf("immediate")>-1?!0:!1,c=a.indexOf("resume")>-1?!0:!1;else var b=c=!1;return[b,c]}function bt_mousesheelNumber(a){return is_number(a)?a:null}function is_null(a){return null===a}function is_undefined(a){return is_null(a)||void 0===a||""===a||"undefined"===a}function is_array(a){return a instanceof Array}function is_jquery(a){return a instanceof jQuery}function is_object(a){return(a instanceof Object||"object"==typeof a)&&!is_null(a)&&!is_jquery(a)&&!is_array(a)&&!is_function(a)}function is_number(a){return(a instanceof Number||"number"==typeof a)&&!isNaN(a)}function is_string(a){return(a instanceof String||"string"==typeof a)&&!is_undefined(a)&&!is_true(a)&&!is_false(a)}function is_function(a){return a instanceof Function||"function"==typeof a}function is_boolean(a){return a instanceof Boolean||"boolean"==typeof a||is_true(a)||is_false(a)}function is_true(a){return a===!0||"true"===a}function is_false(a){return a===!1||"false"===a}function is_percentage(a){return is_string(a)&&"%"==a.slice(-1)}function getTime(){return(new Date).getTime()}function deprecated(a,b){debug(!0,a+" is DEPRECATED, support for it will be removed. Use "+b+" instead.")}function debug(a,b){if(!is_undefined(window.console)&&!is_undefined(window.console.log)){if(is_object(a)){var c=" ("+a.selector+")";a=a.debug}else var c="";if(!a)return!1;b=is_string(b)?"carouFredSel"+c+": "+b:["carouFredSel"+c+":",b],window.console.log(b)}return!1}$.fn.carouFredSel||($.fn.caroufredsel=$.fn.carouFredSel=function(options,configs){if(0==this.length)return debug(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){$(this).carouFredSel(options,configs)});var $cfs=this,$tt0=this[0],starting_position=!1;$cfs.data("_cfs_isCarousel")&&(starting_position=$cfs.triggerHandler("_cfs_triggerEvent","currentPosition"),$cfs.trigger("_cfs_triggerEvent",["destroy",!0]));var FN={};FN._init=function(a,b,c){a=go_getObject($tt0,a),a.items=go_getItemsObject($tt0,a.items),a.scroll=go_getScrollObject($tt0,a.scroll),a.auto=go_getAutoObject($tt0,a.auto),a.prev=go_getPrevNextObject($tt0,a.prev),a.next=go_getPrevNextObject($tt0,a.next),a.pagination=go_getPaginationObject($tt0,a.pagination),a.swipe=go_getSwipeObject($tt0,a.swipe),a.mousewheel=go_getMousewheelObject($tt0,a.mousewheel),b&&(opts_orig=$.extend(!0,{},$.fn.carouFredSel.defaults,a)),opts=$.extend(!0,{},$.fn.carouFredSel.defaults,a),opts.d=cf_getDimensions(opts),crsl.direction="up"==opts.direction||"left"==opts.direction?"next":"prev";var d=$cfs.children(),e=ms_getParentSize($wrp,opts,"width");if(is_true(opts.cookie)&&(opts.cookie="caroufredsel_cookie_"+conf.serialNumber),opts.maxDimension=ms_getMaxDimension(opts,e),opts.items=in_complementItems(opts.items,opts,d,c),opts[opts.d.width]=in_complementPrimarySize(opts[opts.d.width],opts,d),opts[opts.d.height]=in_complementSecondarySize(opts[opts.d.height],opts,d),opts.responsive&&(is_percentage(opts[opts.d.width])||(opts[opts.d.width]="100%")),is_percentage(opts[opts.d.width])&&(crsl.upDateOnWindowResize=!0,crsl.primarySizePercentage=opts[opts.d.width],opts[opts.d.width]=ms_getPercentage(e,crsl.primarySizePercentage),opts.items.visible||(opts.items.visibleConf.variable=!0)),opts.responsive?(opts.usePadding=!1,opts.padding=[0,0,0,0],opts.align=!1,opts.items.visibleConf.variable=!1):(opts.items.visible||(opts=in_complementVisibleItems(opts,e)),opts[opts.d.width]||(!opts.items.visibleConf.variable&&is_number(opts.items[opts.d.width])&&"*"==opts.items.filter?(opts[opts.d.width]=opts.items.visible*opts.items[opts.d.width],opts.align=!1):opts[opts.d.width]="variable"),is_undefined(opts.align)&&(opts.align=is_number(opts[opts.d.width])?"center":!1),opts.items.visibleConf.variable&&(opts.items.visible=gn_getVisibleItemsNext(d,opts,0))),"*"==opts.items.filter||opts.items.visibleConf.variable||(opts.items.visibleConf.org=opts.items.visible,opts.items.visible=gn_getVisibleItemsNextFilter(d,opts,0)),opts.items.visible=cf_getItemsAdjust(opts.items.visible,opts,opts.items.visibleConf.adjust,$tt0),opts.items.visibleConf.old=opts.items.visible,opts.responsive)opts.items.visibleConf.min||(opts.items.visibleConf.min=opts.items.visible),opts.items.visibleConf.max||(opts.items.visibleConf.max=opts.items.visible),opts=in_getResponsiveValues(opts,d,e);else switch(opts.padding=cf_getPadding(opts.padding),"top"==opts.align?opts.align="left":"bottom"==opts.align&&(opts.align="right"),opts.align){case"center":case"left":case"right":"variable"!=opts[opts.d.width]&&(opts=in_getAlignPadding(opts,d),opts.usePadding=!0);break;default:opts.align=!1,opts.usePadding=0==opts.padding[0]&&0==opts.padding[1]&&0==opts.padding[2]&&0==opts.padding[3]?!1:!0}is_number(opts.scroll.duration)||(opts.scroll.duration=500),is_undefined(opts.scroll.items)&&(opts.scroll.items=opts.responsive||opts.items.visibleConf.variable||"*"!=opts.items.filter?"visible":opts.items.visible),opts.auto=$.extend(!0,{},opts.scroll,opts.auto),opts.prev=$.extend(!0,{},opts.scroll,opts.prev),opts.next=$.extend(!0,{},opts.scroll,opts.next),opts.pagination=$.extend(!0,{},opts.scroll,opts.pagination),opts.auto=go_complementAutoObject($tt0,opts.auto),opts.prev=go_complementPrevNextObject($tt0,opts.prev),opts.next=go_complementPrevNextObject($tt0,opts.next),opts.pagination=go_complementPaginationObject($tt0,opts.pagination),opts.swipe=go_complementSwipeObject($tt0,opts.swipe),opts.mousewheel=go_complementMousewheelObject($tt0,opts.mousewheel),opts.synchronise&&(opts.synchronise=cf_getSynchArr(opts.synchronise)),opts.auto.onPauseStart&&(opts.auto.onTimeoutStart=opts.auto.onPauseStart,deprecated("auto.onPauseStart","auto.onTimeoutStart")),opts.auto.onPausePause&&(opts.auto.onTimeoutPause=opts.auto.onPausePause,deprecated("auto.onPausePause","auto.onTimeoutPause")),opts.auto.onPauseEnd&&(opts.auto.onTimeoutEnd=opts.auto.onPauseEnd,deprecated("auto.onPauseEnd","auto.onTimeoutEnd")),opts.auto.pauseDuration&&(opts.auto.timeoutDuration=opts.auto.pauseDuration,deprecated("auto.pauseDuration","auto.timeoutDuration"))},FN._build=function(){$cfs.data("_cfs_isCarousel",!0);var a=$cfs.children(),b=in_mapCss($cfs,["textAlign","float","position","top","right","bottom","left","zIndex","width","height","marginTop","marginRight","marginBottom","marginLeft"]),c="relative";switch(b.position){case"absolute":case"fixed":c=b.position}"parent"==conf.wrapper?sz_storeOrigCss($wrp):$wrp.css(b),$wrp.css({overflow:"hidden",position:c}),sz_storeOrigCss($cfs),$cfs.data("_cfs_origCssZindex",b.zIndex),$cfs.css({textAlign:"left","float":"none",position:"absolute",top:0,right:"auto",bottom:"auto",left:0,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0}),sz_storeMargin(a,opts),sz_storeOrigCss(a),opts.responsive&&sz_setResponsiveSizes(opts,a)},FN._bind_events=function(){FN._unbind_events(),$cfs.bind(cf_e("stop",conf),function(a,b){return a.stopPropagation(),crsl.isStopped||opts.auto.button&&opts.auto.button.addClass(cf_c("stopped",conf)),crsl.isStopped=!0,opts.auto.play&&(opts.auto.play=!1,$cfs.trigger(cf_e("pause",conf),b)),!0}),$cfs.bind(cf_e("finish",conf),function(a){return a.stopPropagation(),crsl.isScrolling&&sc_stopScroll(scrl),!0}),$cfs.bind(cf_e("pause",conf),function(a,b,c){if(a.stopPropagation(),tmrs=sc_clearTimers(tmrs),b&&crsl.isScrolling){scrl.isStopped=!0;var d=getTime()-scrl.startTime;scrl.duration-=d,scrl.pre&&(scrl.pre.duration-=d),scrl.post&&(scrl.post.duration-=d),sc_stopScroll(scrl,!1)}if(crsl.isPaused||crsl.isScrolling||c&&(tmrs.timePassed+=getTime()-tmrs.startTime),crsl.isPaused||opts.auto.button&&opts.auto.button.addClass(cf_c("paused",conf)),crsl.isPaused=!0,opts.auto.onTimeoutPause){var e=opts.auto.timeoutDuration-tmrs.timePassed,f=100-Math.ceil(100*e/opts.auto.timeoutDuration);opts.auto.onTimeoutPause.call($tt0,f,e)}return!0}),$cfs.bind(cf_e("play",conf),function(a,b,c,d){a.stopPropagation(),tmrs=sc_clearTimers(tmrs);var e=[b,c,d],f=["string","number","boolean"],g=cf_sortParams(e,f);if(b=g[0],c=g[1],d=g[2],"prev"!=b&&"next"!=b&&(b=crsl.direction),is_number(c)||(c=0),is_boolean(d)||(d=!1),d&&(crsl.isStopped=!1,opts.auto.play=!0),!opts.auto.play)return a.stopImmediatePropagation(),debug(conf,"Carousel stopped: Not scrolling.");crsl.isPaused&&opts.auto.button&&(opts.auto.button.removeClass(cf_c("stopped",conf)),opts.auto.button.removeClass(cf_c("paused",conf))),crsl.isPaused=!1,tmrs.startTime=getTime();var h=opts.auto.timeoutDuration+c;return dur2=h-tmrs.timePassed,perc=100-Math.ceil(100*dur2/h),opts.auto.progress&&(tmrs.progress=setInterval(function(){var a=getTime()-tmrs.startTime+tmrs.timePassed,b=Math.ceil(100*a/h);opts.auto.progress.updater.call(opts.auto.progress.bar[0],b)},opts.auto.progress.interval)),tmrs.auto=setTimeout(function(){opts.auto.progress&&opts.auto.progress.updater.call(opts.auto.progress.bar[0],100),opts.auto.onTimeoutEnd&&opts.auto.onTimeoutEnd.call($tt0,perc,dur2),crsl.isScrolling?$cfs.trigger(cf_e("play",conf),b):$cfs.trigger(cf_e(b,conf),opts.auto)},dur2),opts.auto.onTimeoutStart&&opts.auto.onTimeoutStart.call($tt0,perc,dur2),!0}),$cfs.bind(cf_e("resume",conf),function(a){return a.stopPropagation(),scrl.isStopped?(scrl.isStopped=!1,crsl.isPaused=!1,crsl.isScrolling=!0,scrl.startTime=getTime(),sc_startScroll(scrl,conf)):$cfs.trigger(cf_e("play",conf)),!0}),$cfs.bind(cf_e("prev",conf)+" "+cf_e("next",conf),function(a,b,c,d,e){if(a.stopPropagation(),crsl.isStopped||$cfs.is(":hidden"))return a.stopImmediatePropagation(),debug(conf,"Carousel stopped or hidden: Not scrolling.");var f=is_number(opts.items.minimum)?opts.items.minimum:opts.items.visible+1;if(f>itms.total)return a.stopImmediatePropagation(),debug(conf,"Not enough items ("+itms.total+" total, "+f+" needed): Not scrolling.");var g=[b,c,d,e],h=["object","number/string","function","boolean"],i=cf_sortParams(g,h);b=i[0],c=i[1],d=i[2],e=i[3];var j=a.type.slice(conf.events.prefix.length);if(is_object(b)||(b={}),is_function(d)&&(b.onAfter=d),is_boolean(e)&&(b.queue=e),b=$.extend(!0,{},opts[j],b),b.conditions&&!b.conditions.call($tt0,j))return a.stopImmediatePropagation(),debug(conf,'Callback "conditions" returned false.');if(!is_number(c)){if("*"!=opts.items.filter)c="visible";else for(var k=[c,b.items,opts[j].items],i=0,l=k.length;l>i;i++)if(is_number(k[i])||"page"==k[i]||"visible"==k[i]){c=k[i];break}switch(c){case"page":return a.stopImmediatePropagation(),$cfs.triggerHandler(cf_e(j+"Page",conf),[b,d]);case"visible":opts.items.visibleConf.variable||"*"!=opts.items.filter||(c=opts.items.visible)}}if(scrl.isStopped)return $cfs.trigger(cf_e("resume",conf)),$cfs.trigger(cf_e("queue",conf),[j,[b,c,d]]),a.stopImmediatePropagation(),debug(conf,"Carousel resumed scrolling.");if(b.duration>0&&crsl.isScrolling)return b.queue&&("last"==b.queue&&(queu=[]),("first"!=b.queue||0==queu.length)&&$cfs.trigger(cf_e("queue",conf),[j,[b,c,d]])),a.stopImmediatePropagation(),debug(conf,"Carousel currently scrolling.");if(tmrs.timePassed=0,$cfs.trigger(cf_e("slide_"+j,conf),[b,c]),opts.synchronise)for(var m=opts.synchronise,n=[b,c],o=0,l=m.length;l>o;o++){var p=j;m[o][2]||(p="prev"==p?"next":"prev"),m[o][1]||(n[0]=m[o][0].triggerHandler("_cfs_triggerEvent",["configuration",p])),n[1]=c+m[o][3],m[o][0].trigger("_cfs_triggerEvent",["slide_"+p,n])}return!0}),$cfs.bind(cf_e("slide_prev",conf),function(a,b,c){a.stopPropagation();var d=$cfs.children();if(!opts.circular&&0==itms.first)return opts.infinite&&$cfs.trigger(cf_e("next",conf),itms.total-1),a.stopImmediatePropagation();if(sz_resetMargin(d,opts),!is_number(c)){if(opts.items.visibleConf.variable)c=gn_getVisibleItemsPrev(d,opts,itms.total-1);else if("*"!=opts.items.filter){var e=is_number(b.items)?b.items:gn_getVisibleOrg($cfs,opts);c=gn_getScrollItemsPrevFilter(d,opts,itms.total-1,e)}else c=opts.items.visible;c=cf_getAdjust(c,opts,b.items,$tt0)}if(opts.circular||itms.total-c<itms.first&&(c=itms.total-itms.first),opts.items.visibleConf.old=opts.items.visible,opts.items.visibleConf.variable){var f=cf_getItemsAdjust(gn_getVisibleItemsNext(d,opts,itms.total-c),opts,opts.items.visibleConf.adjust,$tt0);f>=opts.items.visible+c&&itms.total>c&&(c++,f=cf_getItemsAdjust(gn_getVisibleItemsNext(d,opts,itms.total-c),opts,opts.items.visibleConf.adjust,$tt0)),opts.items.visible=f}else if("*"!=opts.items.filter){var f=gn_getVisibleItemsNextFilter(d,opts,itms.total-c);opts.items.visible=cf_getItemsAdjust(f,opts,opts.items.visibleConf.adjust,$tt0)}if(sz_resetMargin(d,opts,!0),0==c)return a.stopImmediatePropagation(),debug(conf,"0 items to scroll: Not scrolling.");for(debug(conf,"Scrolling "+c+" items backward."),itms.first+=c;itms.first>=itms.total;)itms.first-=itms.total;opts.circular||(0==itms.first&&b.onEnd&&b.onEnd.call($tt0,"prev"),opts.infinite||nv_enableNavi(opts,itms.first,conf)),$cfs.children().slice(itms.total-c,itms.total).prependTo($cfs),itms.total<opts.items.visible+c&&$cfs.children().slice(0,opts.items.visible+c-itms.total).clone(!0).appendTo($cfs);var d=$cfs.children(),g=gi_getOldItemsPrev(d,opts,c),h=gi_getNewItemsPrev(d,opts),i=d.eq(c-1),j=g.last(),k=h.last();sz_resetMargin(d,opts);var l=0,m=0;if(opts.align){var n=cf_getAlignPadding(h,opts);l=n[0],m=n[1]}var o=0>l?opts.padding[opts.d[3]]:0,p=!1,q=$();if(c>opts.items.visible&&(q=d.slice(opts.items.visibleConf.old,c),"directscroll"==b.fx)){var r=opts.items[opts.d.width];p=q,i=k,sc_hideHiddenItems(p),opts.items[opts.d.width]="variable"}var s=!1,t=ms_getTotalSize(d.slice(0,c),opts,"width"),u=cf_mapWrapperSizes(ms_getSizes(h,opts,!0),opts,!opts.usePadding),v=0,w={},x={},y={},z={},A={},B={},C={},D=sc_getDuration(b,opts,c,t);switch(b.fx){case"cover":case"cover-fade":v=ms_getTotalSize(d.slice(0,opts.items.visible),opts,"width")}p&&(opts.items[opts.d.width]=r),sz_resetMargin(d,opts,!0),m>=0&&sz_resetMargin(j,opts,opts.padding[opts.d[1]]),l>=0&&sz_resetMargin(i,opts,opts.padding[opts.d[3]]),opts.align&&(opts.padding[opts.d[1]]=m,opts.padding[opts.d[3]]=l),B[opts.d.left]=-(t-o),C[opts.d.left]=-(v-o),x[opts.d.left]=u[opts.d.width];var E=function(){},F=function(){},G=function(){},H=function(){},I=function(){},J=function(){},K=function(){},L=function(){},M=function(){},N=function(){},O=function(){};switch(b.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":s=$cfs.clone(!0).appendTo($wrp)}switch(b.fx){case"crossfade":case"uncover":case"uncover-fade":s.children().slice(0,c).remove(),s.children().slice(opts.items.visibleConf.old).remove();break;case"cover":case"cover-fade":s.children().slice(opts.items.visible).remove(),s.css(C)}if($cfs.css(B),scrl=sc_setScroll(D,b.easing,conf),w[opts.d.left]=opts.usePadding?opts.padding[opts.d[3]]:0,("variable"==opts[opts.d.width]||"variable"==opts[opts.d.height])&&(E=function(){$wrp.css(u)},F=function(){scrl.anims.push([$wrp,u])}),opts.usePadding){switch(k.not(i).length&&(y[opts.d.marginRight]=i.data("_cfs_origCssMargin"),0>l?i.css(y):(K=function(){i.css(y)},L=function(){scrl.anims.push([i,y])})),b.fx){case"cover":case"cover-fade":s.children().eq(c-1).css(y)}k.not(j).length&&(z[opts.d.marginRight]=j.data("_cfs_origCssMargin"),G=function(){j.css(z)},H=function(){scrl.anims.push([j,z])}),m>=0&&(A[opts.d.marginRight]=k.data("_cfs_origCssMargin")+opts.padding[opts.d[1]],I=function(){k.css(A)},J=function(){scrl.anims.push([k,A])})}O=function(){$cfs.css(w)};var P=opts.items.visible+c-itms.total;N=function(){if(P>0&&($cfs.children().slice(itms.total).remove(),g=$($cfs.children().slice(itms.total-(opts.items.visible-P)).get().concat($cfs.children().slice(0,P).get()))),sc_showHiddenItems(p),opts.usePadding){var a=$cfs.children().eq(opts.items.visible+c-1);a.css(opts.d.marginRight,a.data("_cfs_origCssMargin"))}};var Q=sc_mapCallbackArguments(g,q,h,c,"prev",D,u);switch(M=function(){sc_afterScroll($cfs,s,b),crsl.isScrolling=!1,clbk.onAfter=sc_fireCallbacks($tt0,b,"onAfter",Q,clbk),queu=sc_fireQueue($cfs,queu,conf),crsl.isPaused||$cfs.trigger(cf_e("play",conf))},crsl.isScrolling=!0,tmrs=sc_clearTimers(tmrs),clbk.onBefore=sc_fireCallbacks($tt0,b,"onBefore",Q,clbk),b.fx){case"none":$cfs.css(w),E(),G(),I(),K(),O(),N(),M();break;case"fade":scrl.anims.push([$cfs,{opacity:0},function(){E(),G(),I(),K(),O(),N(),scrl=sc_setScroll(D,b.easing,conf),scrl.anims.push([$cfs,{opacity:1},M]),sc_startScroll(scrl,conf)}]);break;case"crossfade":$cfs.css({opacity:0}),scrl.anims.push([s,{opacity:0}]),scrl.anims.push([$cfs,{opacity:1},M]),F(),G(),I(),K(),O(),N();break;case"cover":scrl.anims.push([s,w,function(){G(),I(),K(),O(),N(),M()}]),F();break;case"cover-fade":scrl.anims.push([$cfs,{opacity:0}]),scrl.anims.push([s,w,function(){G(),I(),K(),O(),N(),M()}]),F();break;case"uncover":scrl.anims.push([s,x,M]),F(),G(),I(),K(),O(),N();break;case"uncover-fade":$cfs.css({opacity:0}),scrl.anims.push([$cfs,{opacity:1}]),scrl.anims.push([s,x,M]),F(),G(),I(),K(),O(),N();break;default:scrl.anims.push([$cfs,w,function(){N(),M()}]),F(),H(),J(),L()}return sc_startScroll(scrl,conf),cf_setCookie(opts.cookie,$cfs,conf),$cfs.trigger(cf_e("updatePageStatus",conf),[!1,u]),!0}),$cfs.bind(cf_e("slide_next",conf),function(a,b,c){a.stopPropagation();var d=$cfs.children();if(!opts.circular&&itms.first==opts.items.visible)return opts.infinite&&$cfs.trigger(cf_e("prev",conf),itms.total-1),a.stopImmediatePropagation();if(sz_resetMargin(d,opts),!is_number(c)){if("*"!=opts.items.filter){var e=is_number(b.items)?b.items:gn_getVisibleOrg($cfs,opts);c=gn_getScrollItemsNextFilter(d,opts,0,e)}else c=opts.items.visible;c=cf_getAdjust(c,opts,b.items,$tt0)}var f=0==itms.first?itms.total:itms.first;if(!opts.circular){if(opts.items.visibleConf.variable)var g=gn_getVisibleItemsNext(d,opts,c),e=gn_getVisibleItemsPrev(d,opts,f-1);else var g=opts.items.visible,e=opts.items.visible;
c+g>f&&(c=f-e)}if(opts.items.visibleConf.old=opts.items.visible,opts.items.visibleConf.variable){for(var g=cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(d,opts,c,f),opts,opts.items.visibleConf.adjust,$tt0);opts.items.visible-c>=g&&itms.total>c;)c++,g=cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(d,opts,c,f),opts,opts.items.visibleConf.adjust,$tt0);opts.items.visible=g}else if("*"!=opts.items.filter){var g=gn_getVisibleItemsNextFilter(d,opts,c);opts.items.visible=cf_getItemsAdjust(g,opts,opts.items.visibleConf.adjust,$tt0)}if(sz_resetMargin(d,opts,!0),0==c)return a.stopImmediatePropagation(),debug(conf,"0 items to scroll: Not scrolling.");for(debug(conf,"Scrolling "+c+" items forward."),itms.first-=c;0>itms.first;)itms.first+=itms.total;opts.circular||(itms.first==opts.items.visible&&b.onEnd&&b.onEnd.call($tt0,"next"),opts.infinite||nv_enableNavi(opts,itms.first,conf)),itms.total<opts.items.visible+c&&$cfs.children().slice(0,opts.items.visible+c-itms.total).clone(!0).appendTo($cfs);var d=$cfs.children(),h=gi_getOldItemsNext(d,opts),i=gi_getNewItemsNext(d,opts,c),j=d.eq(c-1),k=h.last(),l=i.last();sz_resetMargin(d,opts);var m=0,n=0;if(opts.align){var o=cf_getAlignPadding(i,opts);m=o[0],n=o[1]}var p=!1,q=$();if(c>opts.items.visibleConf.old&&(q=d.slice(opts.items.visibleConf.old,c),"directscroll"==b.fx)){var r=opts.items[opts.d.width];p=q,j=k,sc_hideHiddenItems(p),opts.items[opts.d.width]="variable"}var s=!1,t=ms_getTotalSize(d.slice(0,c),opts,"width"),u=cf_mapWrapperSizes(ms_getSizes(i,opts,!0),opts,!opts.usePadding),v=0,w={},x={},y={},z={},A={},B=sc_getDuration(b,opts,c,t);switch(b.fx){case"uncover":case"uncover-fade":v=ms_getTotalSize(d.slice(0,opts.items.visibleConf.old),opts,"width")}p&&(opts.items[opts.d.width]=r),opts.align&&0>opts.padding[opts.d[1]]&&(opts.padding[opts.d[1]]=0),sz_resetMargin(d,opts,!0),sz_resetMargin(k,opts,opts.padding[opts.d[1]]),opts.align&&(opts.padding[opts.d[1]]=n,opts.padding[opts.d[3]]=m),A[opts.d.left]=opts.usePadding?opts.padding[opts.d[3]]:0;var C=function(){},D=function(){},E=function(){},F=function(){},G=function(){},H=function(){},I=function(){},J=function(){},K=function(){};switch(b.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":s=$cfs.clone(!0).appendTo($wrp),s.children().slice(opts.items.visibleConf.old).remove()}switch(b.fx){case"crossfade":case"cover":case"cover-fade":$cfs.css("zIndex",1),s.css("zIndex",0)}if(scrl=sc_setScroll(B,b.easing,conf),w[opts.d.left]=-t,x[opts.d.left]=-v,0>m&&(w[opts.d.left]+=m),("variable"==opts[opts.d.width]||"variable"==opts[opts.d.height])&&(C=function(){$wrp.css(u)},D=function(){scrl.anims.push([$wrp,u])}),opts.usePadding){var L=l.data("_cfs_origCssMargin");n>=0&&(L+=opts.padding[opts.d[1]]),l.css(opts.d.marginRight,L),j.not(k).length&&(z[opts.d.marginRight]=k.data("_cfs_origCssMargin")),E=function(){k.css(z)},F=function(){scrl.anims.push([k,z])};var M=j.data("_cfs_origCssMargin");m>0&&(M+=opts.padding[opts.d[3]]),y[opts.d.marginRight]=M,G=function(){j.css(y)},H=function(){scrl.anims.push([j,y])}}K=function(){$cfs.css(A)};var N=opts.items.visible+c-itms.total;J=function(){N>0&&$cfs.children().slice(itms.total).remove();var a=$cfs.children().slice(0,c).appendTo($cfs).last();if(N>0&&(i=gi_getCurrentItems(d,opts)),sc_showHiddenItems(p),opts.usePadding){if(itms.total<opts.items.visible+c){var b=$cfs.children().eq(opts.items.visible-1);b.css(opts.d.marginRight,b.data("_cfs_origCssMargin")+opts.padding[opts.d[1]])}a.css(opts.d.marginRight,a.data("_cfs_origCssMargin"))}};var O=sc_mapCallbackArguments(h,q,i,c,"next",B,u);switch(I=function(){$cfs.css("zIndex",$cfs.data("_cfs_origCssZindex")),sc_afterScroll($cfs,s,b),crsl.isScrolling=!1,clbk.onAfter=sc_fireCallbacks($tt0,b,"onAfter",O,clbk),queu=sc_fireQueue($cfs,queu,conf),crsl.isPaused||$cfs.trigger(cf_e("play",conf))},crsl.isScrolling=!0,tmrs=sc_clearTimers(tmrs),clbk.onBefore=sc_fireCallbacks($tt0,b,"onBefore",O,clbk),b.fx){case"none":$cfs.css(w),C(),E(),G(),K(),J(),I();break;case"fade":scrl.anims.push([$cfs,{opacity:0},function(){C(),E(),G(),K(),J(),scrl=sc_setScroll(B,b.easing,conf),scrl.anims.push([$cfs,{opacity:1},I]),sc_startScroll(scrl,conf)}]);break;case"crossfade":$cfs.css({opacity:0}),scrl.anims.push([s,{opacity:0}]),scrl.anims.push([$cfs,{opacity:1},I]),D(),E(),G(),K(),J();break;case"cover":$cfs.css(opts.d.left,$wrp[opts.d.width]()),scrl.anims.push([$cfs,A,I]),D(),E(),G(),J();break;case"cover-fade":$cfs.css(opts.d.left,$wrp[opts.d.width]()),scrl.anims.push([s,{opacity:0}]),scrl.anims.push([$cfs,A,I]),D(),E(),G(),J();break;case"uncover":scrl.anims.push([s,x,I]),D(),E(),G(),K(),J();break;case"uncover-fade":$cfs.css({opacity:0}),scrl.anims.push([$cfs,{opacity:1}]),scrl.anims.push([s,x,I]),D(),E(),G(),K(),J();break;default:scrl.anims.push([$cfs,w,function(){K(),J(),I()}]),D(),F(),H()}return sc_startScroll(scrl,conf),cf_setCookie(opts.cookie,$cfs,conf),$cfs.trigger(cf_e("updatePageStatus",conf),[!1,u]),!0}),$cfs.bind(cf_e("slideTo",conf),function(a,b,c,d,e,f,g){a.stopPropagation();var h=[b,c,d,e,f,g],i=["string/number/object","number","boolean","object","string","function"],j=cf_sortParams(h,i);return e=j[3],f=j[4],g=j[5],b=gn_getItemIndex(j[0],j[1],j[2],itms,$cfs),0==b?!1:(is_object(e)||(e=!1),"prev"!=f&&"next"!=f&&(f=opts.circular?itms.total/2>=b?"next":"prev":0==itms.first||itms.first>b?"next":"prev"),"prev"==f&&(b=itms.total-b),$cfs.trigger(cf_e(f,conf),[e,b,g]),!0)}),$cfs.bind(cf_e("prevPage",conf),function(a,b,c){a.stopPropagation();var d=$cfs.triggerHandler(cf_e("currentPage",conf));return $cfs.triggerHandler(cf_e("slideToPage",conf),[d-1,b,"prev",c])}),$cfs.bind(cf_e("nextPage",conf),function(a,b,c){a.stopPropagation();var d=$cfs.triggerHandler(cf_e("currentPage",conf));return $cfs.triggerHandler(cf_e("slideToPage",conf),[d+1,b,"next",c])}),$cfs.bind(cf_e("slideToPage",conf),function(a,b,c,d,e){a.stopPropagation(),is_number(b)||(b=$cfs.triggerHandler(cf_e("currentPage",conf)));var f=opts.pagination.items||opts.items.visible,g=Math.ceil(itms.total/f)-1;return 0>b&&(b=g),b>g&&(b=0),$cfs.triggerHandler(cf_e("slideTo",conf),[b*f,0,!0,c,d,e])}),$cfs.bind(cf_e("jumpToStart",conf),function(a,b){if(a.stopPropagation(),b=b?gn_getItemIndex(b,0,!0,itms,$cfs):0,b+=itms.first,0!=b){if(itms.total>0)for(;b>itms.total;)b-=itms.total;$cfs.prepend($cfs.children().slice(b,itms.total))}return!0}),$cfs.bind(cf_e("synchronise",conf),function(a,b){if(a.stopPropagation(),b)b=cf_getSynchArr(b);else{if(!opts.synchronise)return debug(conf,"No carousel to synchronise.");b=opts.synchronise}for(var c=$cfs.triggerHandler(cf_e("currentPosition",conf)),d=!0,e=0,f=b.length;f>e;e++)b[e][0].triggerHandler(cf_e("slideTo",conf),[c,b[e][3],!0])||(d=!1);return d}),$cfs.bind(cf_e("queue",conf),function(a,b,c){return a.stopPropagation(),is_function(b)?b.call($tt0,queu):is_array(b)?queu=b:is_undefined(b)||queu.push([b,c]),queu}),$cfs.bind(cf_e("insertItem",conf),function(a,b,c,d,e){a.stopPropagation();var f=[b,c,d,e],g=["string/object","string/number/object","boolean","number"],h=cf_sortParams(f,g);if(b=h[0],c=h[1],d=h[2],e=h[3],is_object(b)&&!is_jquery(b)?b=$(b):is_string(b)&&(b=$(b)),!is_jquery(b)||0==b.length)return debug(conf,"Not a valid object.");is_undefined(c)&&(c="end"),sz_storeMargin(b,opts),sz_storeOrigCss(b);var i=c,j="before";"end"==c?d?(0==itms.first?(c=itms.total-1,j="after"):(c=itms.first,itms.first+=b.length),0>c&&(c=0)):(c=itms.total-1,j="after"):c=gn_getItemIndex(c,e,d,itms,$cfs);var k=$cfs.children().eq(c);return k.length?k[j](b):(debug(conf,"Correct insert-position not found! Appending item to the end."),$cfs.append(b)),"end"==i||d||itms.first>c&&(itms.first+=b.length),itms.total=$cfs.children().length,itms.first>=itms.total&&(itms.first-=itms.total),$cfs.trigger(cf_e("updateSizes",conf)),$cfs.trigger(cf_e("linkAnchors",conf)),!0}),$cfs.bind(cf_e("removeItem",conf),function(a,b,c,d){a.stopPropagation();var e=[b,c,d],f=["string/number/object","boolean","number"],g=cf_sortParams(e,f);if(b=g[0],c=g[1],d=g[2],b instanceof $&&b.length>1)return i=$(),b.each(function(){var e=$cfs.trigger(cf_e("removeItem",conf),[$(this),c,d]);e&&(i=i.add(e))}),i;if(is_undefined(b)||"end"==b)i=$cfs.children().last();else{b=gn_getItemIndex(b,d,c,itms,$cfs);var i=$cfs.children().eq(b);i.length&&itms.first>b&&(itms.first-=i.length)}return i&&i.length&&(i.detach(),itms.total=$cfs.children().length,$cfs.trigger(cf_e("updateSizes",conf))),i}),$cfs.bind(cf_e("onBefore",conf)+" "+cf_e("onAfter",conf),function(a,b){a.stopPropagation();var c=a.type.slice(conf.events.prefix.length);return is_array(b)&&(clbk[c]=b),is_function(b)&&clbk[c].push(b),clbk[c]}),$cfs.bind(cf_e("currentPosition",conf),function(a,b){if(a.stopPropagation(),0==itms.first)var c=0;else var c=itms.total-itms.first;return is_function(b)&&b.call($tt0,c),c}),$cfs.bind(cf_e("currentPage",conf),function(a,b){a.stopPropagation();var e,c=opts.pagination.items||opts.items.visible,d=Math.ceil(itms.total/c-1);return e=0==itms.first?0:itms.first<itms.total%c?0:itms.first!=c||opts.circular?Math.round((itms.total-itms.first)/c):d,0>e&&(e=0),e>d&&(e=d),is_function(b)&&b.call($tt0,e),e}),$cfs.bind(cf_e("currentVisible",conf),function(a,b){a.stopPropagation();var c=gi_getCurrentItems($cfs.children(),opts);return is_function(b)&&b.call($tt0,c),c}),$cfs.bind(cf_e("slice",conf),function(a,b,c,d){if(a.stopPropagation(),0==itms.total)return!1;var e=[b,c,d],f=["number","number","function"],g=cf_sortParams(e,f);if(b=is_number(g[0])?g[0]:0,c=is_number(g[1])?g[1]:itms.total,d=g[2],b+=itms.first,c+=itms.first,items.total>0){for(;b>itms.total;)b-=itms.total;for(;c>itms.total;)c-=itms.total;for(;0>b;)b+=itms.total;for(;0>c;)c+=itms.total}var i,h=$cfs.children();return i=c>b?h.slice(b,c):$(h.slice(b,itms.total).get().concat(h.slice(0,c).get())),is_function(d)&&d.call($tt0,i),i}),$cfs.bind(cf_e("isPaused",conf)+" "+cf_e("isStopped",conf)+" "+cf_e("isScrolling",conf),function(a,b){a.stopPropagation();var c=a.type.slice(conf.events.prefix.length),d=crsl[c];return is_function(b)&&b.call($tt0,d),d}),$cfs.bind(cf_e("configuration",conf),function(e,a,b,c){e.stopPropagation();var reInit=!1;if(is_function(a))a.call($tt0,opts);else if(is_object(a))opts_orig=$.extend(!0,{},opts_orig,a),b!==!1?reInit=!0:opts=$.extend(!0,{},opts,a);else if(!is_undefined(a))if(is_function(b)){var val=eval("opts."+a);is_undefined(val)&&(val=""),b.call($tt0,val)}else{if(is_undefined(b))return eval("opts."+a);"boolean"!=typeof c&&(c=!0),eval("opts_orig."+a+" = b"),c!==!1?reInit=!0:eval("opts."+a+" = b")}if(reInit){sz_resetMargin($cfs.children(),opts),FN._init(opts_orig),FN._bind_buttons();var sz=sz_setSizes($cfs,opts);$cfs.trigger(cf_e("updatePageStatus",conf),[!0,sz])}return opts}),$cfs.bind(cf_e("linkAnchors",conf),function(a,b,c){return a.stopPropagation(),is_undefined(b)?b=$("body"):is_string(b)&&(b=$(b)),is_jquery(b)&&0!=b.length?(is_string(c)||(c="a.caroufredsel"),b.find(c).each(function(){var a=this.hash||"";a.length>0&&-1!=$cfs.children().index($(a))&&$(this).unbind("click").click(function(b){b.preventDefault(),$cfs.trigger(cf_e("slideTo",conf),a)})}),!0):debug(conf,"Not a valid object.")}),$cfs.bind(cf_e("updatePageStatus",conf),function(a,b){if(a.stopPropagation(),opts.pagination.container){var d=opts.pagination.items||opts.items.visible,e=Math.ceil(itms.total/d);b&&(opts.pagination.anchorBuilder&&(opts.pagination.container.children().remove(),opts.pagination.container.each(function(){for(var a=0;e>a;a++){var b=$cfs.children().eq(gn_getItemIndex(a*d,0,!0,itms,$cfs));$(this).append(opts.pagination.anchorBuilder.call(b[0],a+1))}})),opts.pagination.container.each(function(){$(this).children().unbind(opts.pagination.event).each(function(a){$(this).bind(opts.pagination.event,function(b){b.preventDefault(),$cfs.trigger(cf_e("slideTo",conf),[a*d,-opts.pagination.deviation,!0,opts.pagination])})})}));var f=$cfs.triggerHandler(cf_e("currentPage",conf))+opts.pagination.deviation;return f>=e&&(f=0),0>f&&(f=e-1),opts.pagination.container.each(function(){$(this).children().removeClass(cf_c("selected",conf)).eq(f).addClass(cf_c("selected",conf))}),!0}}),$cfs.bind(cf_e("updateSizes",conf),function(){var b=opts.items.visible,c=$cfs.children(),d=ms_getParentSize($wrp,opts,"width");if(itms.total=c.length,crsl.primarySizePercentage?(opts.maxDimension=d,opts[opts.d.width]=ms_getPercentage(d,crsl.primarySizePercentage)):opts.maxDimension=ms_getMaxDimension(opts,d),opts.responsive?(opts.items.width=opts.items.sizesConf.width,opts.items.height=opts.items.sizesConf.height,opts=in_getResponsiveValues(opts,c,d),b=opts.items.visible,sz_setResponsiveSizes(opts,c)):opts.items.visibleConf.variable?b=gn_getVisibleItemsNext(c,opts,0):"*"!=opts.items.filter&&(b=gn_getVisibleItemsNextFilter(c,opts,0)),!opts.circular&&0!=itms.first&&b>itms.first){if(opts.items.visibleConf.variable)var e=gn_getVisibleItemsPrev(c,opts,itms.first)-itms.first;else if("*"!=opts.items.filter)var e=gn_getVisibleItemsPrevFilter(c,opts,itms.first)-itms.first;else var e=opts.items.visible-itms.first;debug(conf,"Preventing non-circular: sliding "+e+" items backward."),$cfs.trigger(cf_e("prev",conf),e)}opts.items.visible=cf_getItemsAdjust(b,opts,opts.items.visibleConf.adjust,$tt0),opts.items.visibleConf.old=opts.items.visible,opts=in_getAlignPadding(opts,c);var f=sz_setSizes($cfs,opts);return $cfs.trigger(cf_e("updatePageStatus",conf),[!0,f]),nv_showNavi(opts,itms.total,conf),nv_enableNavi(opts,itms.first,conf),f}),$cfs.bind(cf_e("destroy",conf),function(a,b){return a.stopPropagation(),tmrs=sc_clearTimers(tmrs),$cfs.data("_cfs_isCarousel",!1),$cfs.trigger(cf_e("finish",conf)),b&&$cfs.trigger(cf_e("jumpToStart",conf)),sz_restoreOrigCss($cfs.children()),sz_restoreOrigCss($cfs),FN._unbind_events(),FN._unbind_buttons(),"parent"==conf.wrapper?sz_restoreOrigCss($wrp):$wrp.replaceWith($cfs),!0}),$cfs.bind(cf_e("debug",conf),function(){return debug(conf,"Carousel width: "+opts.width),debug(conf,"Carousel height: "+opts.height),debug(conf,"Item widths: "+opts.items.width),debug(conf,"Item heights: "+opts.items.height),debug(conf,"Number of items visible: "+opts.items.visible),opts.auto.play&&debug(conf,"Number of items scrolled automatically: "+opts.auto.items),opts.prev.button&&debug(conf,"Number of items scrolled backward: "+opts.prev.items),opts.next.button&&debug(conf,"Number of items scrolled forward: "+opts.next.items),conf.debug}),$cfs.bind("_cfs_triggerEvent",function(a,b,c){return a.stopPropagation(),$cfs.triggerHandler(cf_e(b,conf),c)})},FN._unbind_events=function(){$cfs.unbind(cf_e("",conf)),$cfs.unbind(cf_e("",conf,!1)),$cfs.unbind("_cfs_triggerEvent")},FN._bind_buttons=function(){if(FN._unbind_buttons(),nv_showNavi(opts,itms.total,conf),nv_enableNavi(opts,itms.first,conf),opts.auto.pauseOnHover){var a=bt_pauseOnHoverConfig(opts.auto.pauseOnHover);$wrp.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),a)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.auto.button&&opts.auto.button.bind(cf_e(opts.auto.event,conf,!1),function(a){a.preventDefault();var b=!1,c=null;crsl.isPaused?b="play":opts.auto.pauseOnEvent&&(b="pause",c=bt_pauseOnHoverConfig(opts.auto.pauseOnEvent)),b&&$cfs.trigger(cf_e(b,conf),c)}),opts.prev.button&&(opts.prev.button.bind(cf_e(opts.prev.event,conf,!1),function(a){a.preventDefault(),$cfs.trigger(cf_e("prev",conf))}),opts.prev.pauseOnHover)){var a=bt_pauseOnHoverConfig(opts.prev.pauseOnHover);opts.prev.button.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),a)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.next.button&&(opts.next.button.bind(cf_e(opts.next.event,conf,!1),function(a){a.preventDefault(),$cfs.trigger(cf_e("next",conf))}),opts.next.pauseOnHover)){var a=bt_pauseOnHoverConfig(opts.next.pauseOnHover);opts.next.button.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),a)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.pagination.container&&opts.pagination.pauseOnHover){var a=bt_pauseOnHoverConfig(opts.pagination.pauseOnHover);opts.pagination.container.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),a)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if((opts.prev.key||opts.next.key)&&$(document).bind(cf_e("keyup",conf,!1,!0,!0),function(a){var b=a.keyCode;b==opts.next.key&&(a.preventDefault(),$cfs.trigger(cf_e("next",conf))),b==opts.prev.key&&(a.preventDefault(),$cfs.trigger(cf_e("prev",conf)))}),opts.pagination.keys&&$(document).bind(cf_e("keyup",conf,!1,!0,!0),function(a){var b=a.keyCode;b>=49&&58>b&&(b=(b-49)*opts.items.visible,itms.total>=b&&(a.preventDefault(),$cfs.trigger(cf_e("slideTo",conf),[b,0,!0,opts.pagination])))}),$.fn.swipe){var b="ontouchstart"in window;if(b&&opts.swipe.onTouch||!b&&opts.swipe.onMouse){var c=$.extend(!0,{},opts.prev,opts.swipe),d=$.extend(!0,{},opts.next,opts.swipe),e=function(){$cfs.trigger(cf_e("prev",conf),[c])},f=function(){$cfs.trigger(cf_e("next",conf),[d])};switch(opts.direction){case"up":case"down":opts.swipe.options.swipeUp=f,opts.swipe.options.swipeDown=e;break;default:opts.swipe.options.swipeLeft=f,opts.swipe.options.swipeRight=e}crsl.swipe&&$cfs.swipe("destroy"),$wrp.swipe(opts.swipe.options),$wrp.css("cursor","move"),crsl.swipe=!0}}if($.fn.mousewheel&&opts.mousewheel){var g=$.extend(!0,{},opts.prev,opts.mousewheel),h=$.extend(!0,{},opts.next,opts.mousewheel);crsl.mousewheel&&$wrp.unbind(cf_e("mousewheel",conf,!1)),$wrp.bind(cf_e("mousewheel",conf,!1),function(a,b){a.preventDefault(),b>0?$cfs.trigger(cf_e("prev",conf),[g]):$cfs.trigger(cf_e("next",conf),[h])}),crsl.mousewheel=!0}if(opts.auto.play&&$cfs.trigger(cf_e("play",conf),opts.auto.delay),crsl.upDateOnWindowResize){var i=function(){$cfs.trigger(cf_e("finish",conf)),opts.auto.pauseOnResize&&!crsl.isPaused&&$cfs.trigger(cf_e("play",conf)),sz_resetMargin($cfs.children(),opts),$cfs.trigger(cf_e("updateSizes",conf))},j=$(window),k=null;if($.debounce&&"debounce"==conf.onWindowResize)k=$.debounce(200,i);else if($.throttle&&"throttle"==conf.onWindowResize)k=$.throttle(300,i);else{var l=0,m=0;k=function(){var a=j.width(),b=j.height();(a!=l||b!=m)&&(i(),l=a,m=b)}}j.bind(cf_e("resize",conf,!1,!0,!0),k)}},FN._unbind_buttons=function(){var b=(cf_e("",conf),cf_e("",conf,!1));ns3=cf_e("",conf,!1,!0,!0),$(document).unbind(ns3),$(window).unbind(ns3),$wrp.unbind(b),opts.auto.button&&opts.auto.button.unbind(b),opts.prev.button&&opts.prev.button.unbind(b),opts.next.button&&opts.next.button.unbind(b),opts.pagination.container&&(opts.pagination.container.unbind(b),opts.pagination.anchorBuilder&&opts.pagination.container.children().remove()),crsl.swipe&&($cfs.swipe("destroy"),$wrp.css("cursor","default"),crsl.swipe=!1),crsl.mousewheel&&(crsl.mousewheel=!1),nv_showNavi(opts,"hide",conf),nv_enableNavi(opts,"removeClass",conf)},is_boolean(configs)&&(configs={debug:configs});var crsl={direction:"next",isPaused:!0,isScrolling:!1,isStopped:!1,mousewheel:!1,swipe:!1},itms={total:$cfs.children().length,first:0},tmrs={auto:null,progress:null,startTime:getTime(),timePassed:0},scrl={isStopped:!1,duration:0,startTime:0,easing:"",anims:[]},clbk={onBefore:[],onAfter:[]},queu=[],conf=$.extend(!0,{},$.fn.carouFredSel.configs,configs),opts={},opts_orig=$.extend(!0,{},options),$wrp="parent"==conf.wrapper?$cfs.parent():$cfs.wrap("<"+conf.wrapper.element+' class="'+conf.wrapper.classname+'" />').parent();if(conf.selector=$cfs.selector,conf.serialNumber=$.fn.carouFredSel.serialNumber++,conf.transition=conf.transition&&$.fn.transition?"transition":"animate",FN._init(opts_orig,!0,starting_position),FN._build(),FN._bind_events(),FN._bind_buttons(),is_array(opts.items.start))var start_arr=opts.items.start;else{var start_arr=[];0!=opts.items.start&&start_arr.push(opts.items.start)}if(opts.cookie&&start_arr.unshift(parseInt(cf_getCookie(opts.cookie),10)),start_arr.length>0)for(var a=0,l=start_arr.length;l>a;a++){var s=start_arr[a];if(0!=s){if(s===!0){if(s=window.location.hash,1>s.length)continue}else"random"===s&&(s=Math.floor(Math.random()*itms.total));if($cfs.triggerHandler(cf_e("slideTo",conf),[s,0,!0,{fx:"none"}]))break}}var siz=sz_setSizes($cfs,opts),itm=gi_getCurrentItems($cfs.children(),opts);return opts.onCreate&&opts.onCreate.call($tt0,{width:siz.width,height:siz.height,items:itm}),$cfs.trigger(cf_e("updatePageStatus",conf),[!0,siz]),$cfs.trigger(cf_e("linkAnchors",conf)),conf.debug&&$cfs.trigger(cf_e("debug",conf)),$cfs},$.fn.carouFredSel.serialNumber=1,$.fn.carouFredSel.defaults={synchronise:!1,infinite:!0,circular:!0,responsive:!1,direction:"left",items:{start:0},scroll:{easing:"swing",duration:500,pauseOnHover:!1,event:"click",queue:!1}},$.fn.carouFredSel.configs={debug:!1,transition:!1,onWindowResize:"throttle",events:{prefix:"",namespace:"cfs"},wrapper:{element:"div",classname:"caroufredsel_wrapper"},classnames:{}},$.fn.carouFredSel.pageAnchorBuilder=function(a){return'<a href="#"><span>'+a+"</span></a>"},$.fn.carouFredSel.progressbarUpdater=function(a){$(this).css("width",a+"%")},$.fn.carouFredSel.cookie={get:function(a){a+="=";for(var b=document.cookie.split(";"),c=0,d=b.length;d>c;c++){for(var e=b[c];" "==e.charAt(0);)e=e.slice(1);if(0==e.indexOf(a))return e.slice(a.length)}return 0},set:function(a,b,c){var d="";if(c){var e=new Date;e.setTime(e.getTime()+864e5*c),d="; expires="+e.toGMTString()}document.cookie=a+"="+b+d+"; path=/"},remove:function(a){$.fn.carouFredSel.cookie.set(a,"",-1)}},$.extend($.easing,{quadratic:function(a){var b=a*a;return a*(-b*a+4*b-6*a+4)},cubic:function(a){return a*(4*a*a-9*a+6)},elastic:function(a){var b=a*a;return a*(33*b*b-106*b*a+126*b-67*a+15)}}))}(jQuery),function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0;var i=t.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function s(){var s;return i.settings.submitHandler?(i.submitButton&&(s=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&s.remove(),!1):!0}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)},valid:function(){if(t(this[0]).is("form"))return this.validate().form();var e=!0,i=t(this[0].form).validate();return this.each(function(){e=e&&i.element(this)}),e},removeAttrs:function(e){var i={},s=this;return t.each(e.split(/\s/),function(t,e){i[e]=s.attr(e),s.removeAttr(e)}),i},rules:function(e,i){var s=this[0];if(e){var r=t.data(s.form,"validator").settings,n=r.rules,a=t.validator.staticRules(s);switch(e){case"add":t.extend(a,t.validator.normalizeRule(i)),delete a.messages,n[s.name]=a,i.messages&&(r.messages[s.name]=t.extend(r.messages[s.name],i.messages));break;case"remove":if(!i)return delete n[s.name],a;var u={};return t.each(i.split(/\s/),function(t,e){u[e]=a[e],delete a[e]}),u}}var o=t.validator.normalizeRules(t.extend({},t.validator.classRules(s),t.validator.attributeRules(s),t.validator.dataRules(s),t.validator.staticRules(s)),s);if(o.required){var l=o.required;delete o.required,o=t.extend({required:l},o)}return o}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(t)).hide())},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(s):t(e).addClass(i).removeClass(s)},unhighlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(s):t(e).removeClass(i).addClass(s)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),s="on"+e.type.replace(/^validate/,"");i.settings[s]&&i.settings[s].call(i,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};t.each(this.settings.groups,function(e,s){"string"==typeof s&&(s=s.split(/\s/)),t.each(s,function(t,s){i[s]=e})});var s=this.settings.rules;t.each(s,function(e,i){s[e]=t.validator.normalizeRule(i)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=t(e);var i=this.check(e)!==!1;return i?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0;for(var i in t)e++;return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!e.objectLength(t(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i=t(e).attr("type"),s=t(e).val();return"radio"===i||"checkbox"===i?t("input[name='"+t(e).attr("name")+"']:checked").val():"string"==typeof s?s.replace(/\r/g,""):s},check:function(e){e=this.validationTargetFor(this.clean(e));var i,s=t(e).rules(),r=!1,n=this.elementValue(e);for(var a in s){var u={method:a,parameters:s[a]};try{if(i=t.validator.methods[a].call(this,n,e,u.parameters),"dependency-mismatch"===i){r=!0;continue}if(r=!1,"pending"===i)return this.toHide=this.toHide.not(this.errorsFor(e)),void 0;if(!i)return this.formatAndAdd(e,u),!1}catch(o){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+u.method+"' method.",o),o}}return r?void 0:(this.objectLength(s)&&this.successList.push(e),!0)},customDataMessage:function(e,i){return t(e).data("msg-"+i.toLowerCase())||e.attributes&&t(e).attr("data-msg-"+i.toLowerCase())},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;arguments.length>t;t++)if(void 0!==arguments[t])return arguments[t];return void 0},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var s=this.defaultMessage(e,i.method),r=/\$?\{(\d+)\}/g;"function"==typeof s?s=s.call(this,i.parameters,e):r.test(s)&&(s=t.validator.format(s.replace(r,"{$1}"),i.parameters)),this.errorList.push({message:s,element:e}),this.errorMap[e.name]=s,this.submitted[e.name]=s},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t
},defaultShowErrors:function(){var t,e;for(t=0;this.errorList[t];t++){var i=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var s=this.errorsFor(e);s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(i)):(s=t("<"+this.settings.errorElement+">").attr("for",this.idOrName(e)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(s=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(s).length||(this.settings.errorPlacement?this.settings.errorPlacement(s,t(e)):s.insertAfter(e))),!i&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,e)),this.toShow=this.toShow.add(s)},errorsFor:function(e){var i=this.idOrName(e);return this.errors().filter(function(){return t(this).attr("for")===i})},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]),t},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,0>this.pendingRequest&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},s=t(e).attr("class");return s&&t.each(s.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i={},s=t(e),r=s[0].getAttribute("type");for(var n in t.validator.methods){var a;"required"===n?(a=s.get(0).getAttribute(n),""===a&&(a=!0),a=!!a):a=s.attr(n),/min|max/.test(n)&&(null===r||/number|range|text/.test(r))&&(a=Number(a)),a?i[n]=a:r===n&&"range"!==r&&(i[n]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var i,s,r={},n=t(e);for(i in t.validator.methods)s=n.data("rule-"+i.toLowerCase()),void 0!==s&&(r[i]=s);return r},staticRules:function(e){var i={},s=t.data(e.form,"validator");return s.settings.rules&&(i=t.validator.normalizeRule(s.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(s,r){if(r===!1)return delete e[s],void 0;if(r.param||r.depends){var n=!0;switch(typeof r.depends){case"string":n=!!t(r.depends,i.form).length;break;case"function":n=r.depends.call(i,i)}n?e[s]=void 0!==r.param?r.param:!0:delete e[s]}}),t.each(e,function(s,r){e[s]=t.isFunction(r)?r(i):r}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,s){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==s?s:t.validator.messages[e],3>i.length&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,s){if(!this.depend(s,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var r=t(i).val();return r&&r.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(""+new Date(t))},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i=0,s=0,r=!1;t=t.replace(/\D/g,"");for(var n=t.length-1;n>=0;n--){var a=t.charAt(n);s=parseInt(a,10),r&&(s*=2)>9&&(s-=9),i+=s,r=!r}return 0===i%10},minlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||r>=s},maxlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||s>=r},rangelength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||r>=s[0]&&s[1]>=r},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&i[1]>=t},equalTo:function(e,i,s){var r=t(s);return this.settings.onfocusout&&r.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===r.val()},remote:function(e,i,s){if(this.optional(i))return"dependency-mismatch";var r=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),r.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=r.message,s="string"==typeof s&&{url:s}||s,r.old===e)return r.valid;r.old=e;var n=this;this.startRequest(i);var a={};return a[i.name]=e,t.ajax(t.extend(!0,{url:s,mode:"abort",port:"validate"+i.name,dataType:"json",data:a,success:function(s){n.settings.messages[i.name].remote=r.originalMessage;var a=s===!0||"true"===s;if(a){var u=n.formSubmitted;n.prepareElement(i),n.formSubmitted=u,n.successList.push(i),delete n.invalid[i.name],n.showErrors()}else{var o={},l=s||n.defaultMessage(i,"remote");o[i.name]=r.message=t.isFunction(l)?l(e):l,n.invalid[i.name]=!0,n.showErrors(o)}r.valid=a,n.stopRequest(i,a)}},s)),"pending"}}}),t.format=t.validator.format}(jQuery),function(t){var e={};if(t.ajaxPrefilter)t.ajaxPrefilter(function(t,i,s){var r=t.port;"abort"===t.mode&&(e[r]&&e[r].abort(),e[r]=s)});else{var i=t.ajax;t.ajax=function(s){var r=("mode"in s?s:t.ajaxSettings).mode,n=("port"in s?s:t.ajaxSettings).port;return"abort"===r?(e[n]&&e[n].abort(),e[n]=i.apply(this,arguments),e[n]):i.apply(this,arguments)}}}(jQuery),function(t){t.extend(t.fn,{validateDelegate:function(e,i,s){return this.bind(i,function(i){var r=t(i.target);return r.is(e)?s.apply(r,arguments):void 0})}})}(jQuery),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},e=[].slice;!function(t,e){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(n){return e(n,t)}):e(t.jQuery,t)}(this,function(n,r){var i,o,l,s,f,u,a,c,h,d,p,y,v,w,g,m;return i=n(r),c=t.call(r,"ontouchstart")>=0,s={horizontal:{},vertical:{}},f=1,a={},u="waypoints-context-id",p="resize.waypoints",y="scroll.waypoints",v=1,w="waypoints-waypoint-ids",g="waypoint",m="waypoints",o=function(){function t(t){var e=this;this.$element=t,this.element=t[0],this.didResize=!1,this.didScroll=!1,this.id="context"+f++,this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()},this.waypoints={horizontal:{},vertical:{}},t.data(u,this.id),a[this.id]=this,t.bind(y,function(){var t;return e.didScroll||c?void 0:(e.didScroll=!0,t=function(){return e.doScroll(),e.didScroll=!1},r.setTimeout(t,n[m].settings.scrollThrottle))}),t.bind(p,function(){var t;return e.didResize?void 0:(e.didResize=!0,t=function(){return n[m]("refresh"),e.didResize=!1},r.setTimeout(t,n[m].settings.resizeThrottle))})}return t.prototype.doScroll=function(){var t,e=this;return t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!c||t.vertical.oldScroll&&t.vertical.newScroll||n[m]("refresh"),n.each(t,function(t,r){var i,o,l;return l=[],o=r.newScroll>r.oldScroll,i=o?r.forward:r.backward,n.each(e.waypoints[t],function(t,e){var n,i;return r.oldScroll<(n=e.offset)&&n<=r.newScroll?l.push(e):r.newScroll<(i=e.offset)&&i<=r.oldScroll?l.push(e):void 0}),l.sort(function(t,e){return t.offset-e.offset}),o||l.reverse(),n.each(l,function(t,e){return e.options.continuous||t===l.length-1?e.trigger([i]):void 0})}),this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.refresh=function(){var t,e,r,i=this;return r=n.isWindow(this.element),e=this.$element.offset(),this.doScroll(),t={horizontal:{contextOffset:r?0:e.left,contextScroll:r?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:r?0:e.top,contextScroll:r?0:this.oldScroll.y,contextDimension:r?n[m]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},n.each(t,function(t,e){return n.each(i.waypoints[t],function(t,r){var i,o,l,s,f;return i=r.options.offset,l=r.offset,o=n.isWindow(r.element)?0:r.$element.offset()[e.offsetProp],n.isFunction(i)?i=i.apply(r.element):"string"==typeof i&&(i=parseFloat(i),r.options.offset.indexOf("%")>-1&&(i=Math.ceil(e.contextDimension*i/100))),r.offset=o-e.contextOffset+e.contextScroll-i,r.options.onlyOnScroll&&null!=l||!r.enabled?void 0:null!==l&&l<(s=e.oldScroll)&&s<=r.offset?r.trigger([e.backward]):null!==l&&l>(f=e.oldScroll)&&f>=r.offset?r.trigger([e.forward]):null===l&&e.oldScroll>=r.offset?r.trigger([e.forward]):void 0})})},t.prototype.checkEmpty=function(){return n.isEmptyObject(this.waypoints.horizontal)&&n.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([p,y].join(" ")),delete a[this.id]):void 0},t}(),l=function(){function t(t,e,r){var i,o;r=n.extend({},n.fn[g].defaults,r),"bottom-in-view"===r.offset&&(r.offset=function(){var t;return t=n[m]("viewportHeight"),n.isWindow(e.element)||(t=e.$element.height()),t-n(this).outerHeight()}),this.$element=t,this.element=t[0],this.axis=r.horizontal?"horizontal":"vertical",this.callback=r.handler,this.context=e,this.enabled=r.enabled,this.id="waypoints"+v++,this.offset=null,this.options=r,e.waypoints[this.axis][this.id]=this,s[this.axis][this.id]=this,i=null!=(o=t.data(w))?o:[],i.push(this.id),t.data(w,i)}return t.prototype.trigger=function(t){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,t),this.options.triggerOnce?this.destroy():void 0):void 0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},t.prototype.destroy=function(){return delete s[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},t.getWaypointsByElement=function(t){var e,r;return(r=n(t).data(w))?(e=n.extend({},s.horizontal,s.vertical),n.map(r,function(t){return e[t]})):[]},t}(),d={init:function(t,e){var r;return null==e&&(e={}),null==(r=e.handler)&&(e.handler=t),this.each(function(){var t,r,i,s;return t=n(this),i=null!=(s=e.context)?s:n.fn[g].defaults.context,n.isWindow(i)||(i=t.closest(i)),i=n(i),r=a[i.data(u)],r||(r=new o(i)),new l(t,r,e)}),n[m]("refresh"),this},disable:function(){return d._invoke(this,"disable")},enable:function(){return d._invoke(this,"enable")},destroy:function(){return d._invoke(this,"destroy")},prev:function(t,e){return d._traverse.call(this,t,e,function(t,e,n){return e>0?t.push(n[e-1]):void 0})},next:function(t,e){return d._traverse.call(this,t,e,function(t,e,n){return e<n.length-1?t.push(n[e+1]):void 0})},_traverse:function(t,e,i){var o,l;return null==t&&(t="vertical"),null==e&&(e=r),l=h.aggregate(e),o=[],this.each(function(){var e;return e=n.inArray(this,l[t]),i(o,e,l[t])}),this.pushStack(o)},_invoke:function(t,e){return t.each(function(){var t;return t=l.getWaypointsByElement(this),n.each(t,function(t,n){return n[e](),!0})}),this}},n.fn[g]=function(){var t,r;return r=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],d[r]?d[r].apply(this,t):n.isFunction(r)?d.init.apply(this,arguments):n.isPlainObject(r)?d.init.apply(this,[null,r]):r?n.error("The "+r+" method does not exist in jQuery Waypoints."):n.error("jQuery Waypoints needs a callback function or handler option.")},n.fn[g].defaults={context:r,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},h={refresh:function(){return n.each(a,function(t,e){return e.refresh()})},viewportHeight:function(){var t;return null!=(t=r.innerHeight)?t:i.height()},aggregate:function(t){var e,r,i;return e=s,t&&(e=null!=(i=a[n(t).data(u)])?i.waypoints:void 0),e?(r={horizontal:[],vertical:[]},n.each(r,function(t,i){return n.each(e[t],function(t,e){return i.push(e)}),i.sort(function(t,e){return t.offset-e.offset}),r[t]=n.map(i,function(t){return t.element}),r[t]=n.unique(r[t])}),r):[]},above:function(t){return null==t&&(t=r),h._filter(t,"vertical",function(t,e){return e.offset<=t.oldScroll.y})},below:function(t){return null==t&&(t=r),h._filter(t,"vertical",function(t,e){return e.offset>t.oldScroll.y})},left:function(t){return null==t&&(t=r),h._filter(t,"horizontal",function(t,e){return e.offset<=t.oldScroll.x})},right:function(t){return null==t&&(t=r),h._filter(t,"horizontal",function(t,e){return e.offset>t.oldScroll.x})},enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(t,e){return d[t]=e},_invoke:function(t){var e;return e=n.extend({},s.vertical,s.horizontal),n.each(e,function(e,n){return n[t](),!0})},_filter:function(t,e,r){var i,o;return(i=a[n(t).data(u)])?(o=[],n.each(i.waypoints[e],function(t,e){return r(i,e)?o.push(e):void 0}),o.sort(function(t,e){return t.offset-e.offset}),n.map(o,function(t){return t.element})):[]}},n[m]=function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],h[n]?h[n].apply(null,t):h.aggregate.call(null,n)},n[m].settings={resizeThrottle:100,scrollThrottle:30},i.load(function(){return n[m]("refresh")})})}.call(this),function(){!function(t,n){return"function"==typeof define&&define.amd?define(["jquery","waypoints"],n):n(t.jQuery)}(this,function(t){var n,s;return n={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck"},s=function(t,n){return t.wrap(n.wrapper),t.parent()},t.waypoints("extendFn","sticky",function(e){var i,r,a;return r=t.extend({},t.fn.waypoint.defaults,n,e),i=s(this,r),a=r.handler,r.handler=function(n){var s,e;return s=t(this).children(":first"),e="down"===n||"right"===n,s.toggleClass(r.stuckClass,e),i.height(e?s.outerHeight():""),null!=a?a.call(this,n):void 0},i.waypoint(r),this.data("stuckClass",r.stuckClass)}),t.waypoints("extendFn","unsticky",function(){return this.parent().waypoint("destroy"),this.unwrap(),this.removeClass(this.data("stuckClass"))})})}.call(this),function(h,o,g){var p=function(){for(var b=/audio(.min)?.js.*/,a=document.getElementsByTagName("script"),c=0,d=a.length;d>c;c++){var e=a[c].getAttribute("src");if(b.test(e))return e.replace(b,"")}}();g[h]={instanceCount:0,instances:{},flashSource:'      <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="$1" width="1" height="1" name="$1" style="position: absolute; left: -1px;">         <param name="movie" value="$2?playerInstance='+h+'.instances[\'$1\']&datetime=$3">         <param name="allowscriptaccess" value="always">         <embed name="$1" src="$2?playerInstance='+h+'.instances[\'$1\']&datetime=$3" width="1" height="1" allowscriptaccess="always">       </object>',settings:{autoplay:!1,loop:!1,preload:!0,imageLocation:p+"player-graphics.gif",swfLocation:p+"audiojs.swf",useFlash:function(){var b=document.createElement("audio");return!(b.canPlayType&&b.canPlayType("audio/mpeg;").replace(/no/,""))}(),hasFlash:function(){if(navigator.plugins&&navigator.plugins.length&&navigator.plugins["Shockwave Flash"])return!0;if(navigator.mimeTypes&&navigator.mimeTypes.length){var b=navigator.mimeTypes["application/x-shockwave-flash"];return b&&b.enabledPlugin}try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),!0}catch(a){}return!1}(),createPlayer:{markup:'          <div class="play-pause">             <p class="play"></p>             <p class="pause"></p>             <p class="loading"></p>             <p class="error"></p>           </div>           <div class="scrubber">             <div class="progress"></div>             <div class="loaded"></div>           </div>           <div class="time">             <em class="played">00:00</em>/<strong class="duration">00:00</strong>           </div>           <div class="error-message"></div>',playPauseClass:"play-pause",scrubberClass:"scrubber",progressClass:"progress",loaderClass:"loaded",timeClass:"time",durationClass:"duration",playedClass:"played",errorMessageClass:"error-message",playingClass:"playing",loadingClass:"loading",errorClass:"error"},css:'        .audiojs audio { position: absolute; left: -1px; }         .audiojs { width: 460px; height: 36px; background: #404040; overflow: hidden; font-family: monospace; font-size: 12px;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #444), color-stop(0.5, #555), color-stop(0.51, #444), color-stop(1, #444));           background-image: -moz-linear-gradient(center top, #444 0%, #555 50%, #444 51%, #444 100%);           -webkit-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); -moz-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3);           -o-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); }         .audiojs .play-pause { width: 25px; height: 40px; padding: 4px 6px; margin: 0px; float: left; overflow: hidden; border-right: 1px solid #000; }         .audiojs p { display: none; width: 25px; height: 40px; margin: 0px; cursor: pointer; }         .audiojs .play { display: block; }         .audiojs .scrubber { position: relative; float: left; width: 280px; background: #5a5a5a; height: 14px; margin: 10px; border-top: 1px solid #3f3f3f; border-left: 0px; border-bottom: 0px; overflow: hidden; }         .audiojs .progress { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #ccc; z-index: 1;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #ccc), color-stop(0.5, #ddd), color-stop(0.51, #ccc), color-stop(1, #ccc));           background-image: -moz-linear-gradient(center top, #ccc 0%, #ddd 50%, #ccc 51%, #ccc 100%); }         .audiojs .loaded { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #000;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #222), color-stop(0.5, #333), color-stop(0.51, #222), color-stop(1, #222));           background-image: -moz-linear-gradient(center top, #222 0%, #333 50%, #222 51%, #222 100%); }         .audiojs .time { float: left; height: 36px; line-height: 36px; margin: 0px 0px 0px 6px; padding: 0px 6px 0px 12px; border-left: 1px solid #000; color: #ddd; text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.5); }         .audiojs .time em { padding: 0px 2px 0px 0px; color: #f9f9f9; font-style: normal; }         .audiojs .time strong { padding: 0px 0px 0px 2px; font-weight: normal; }         .audiojs .error-message { float: left; display: none; margin: 0px 10px; height: 36px; width: 400px; overflow: hidden; line-height: 36px; white-space: nowrap; color: #fff;           text-overflow: ellipsis; -o-text-overflow: ellipsis; -icab-text-overflow: ellipsis; -khtml-text-overflow: ellipsis; -moz-text-overflow: ellipsis; -webkit-text-overflow: ellipsis; }         .audiojs .error-message a { color: #eee; text-decoration: none; padding-bottom: 1px; border-bottom: 1px solid #999; white-space: wrap; }                 .audiojs .play { background: url("$1") -2px -1px no-repeat; }         .audiojs .loading { background: url("$1") -2px -31px no-repeat; }         .audiojs .error { background: url("$1") -2px -61px no-repeat; }         .audiojs .pause { background: url("$1") -2px -91px no-repeat; }                 .playing .play, .playing .loading, .playing .error { display: none; }         .playing .pause { display: block; }                 .loading .play, .loading .pause, .loading .error { display: none; }         .loading .loading { display: block; }                 .error .time, .error .play, .error .pause, .error .scrubber, .error .loading { display: none; }         .error .error { display: block; }         .error .play-pause p { cursor: auto; }         .error .error-message { display: block; }',trackEnded:function(){},flashError:function(){var b=this.settings.createPlayer,a=j(b.errorMessageClass,this.wrapper),c='Missing <a href="http://get.adobe.com/flashplayer/">flash player</a> plugin.';this.mp3&&(c+=' <a href="'+this.mp3+'">Download audio file</a>.'),g[h].helpers.removeClass(this.wrapper,b.loadingClass),g[h].helpers.addClass(this.wrapper,b.errorClass),a.innerHTML=c},loadError:function(){var b=this.settings.createPlayer,a=j(b.errorMessageClass,this.wrapper);g[h].helpers.removeClass(this.wrapper,b.loadingClass),g[h].helpers.addClass(this.wrapper,b.errorClass),a.innerHTML='Error loading: "'+this.mp3+'"'},init:function(){g[h].helpers.addClass(this.wrapper,this.settings.createPlayer.loadingClass)},loadStarted:function(){var b=this.settings.createPlayer,a=j(b.durationClass,this.wrapper),c=Math.floor(this.duration/60),d=Math.floor(this.duration%60);g[h].helpers.removeClass(this.wrapper,b.loadingClass),a.innerHTML=(10>c?"0":"")+c+":"+(10>d?"0":"")+d},loadProgress:function(b){var a=this.settings.createPlayer,c=j(a.scrubberClass,this.wrapper);j(a.loaderClass,this.wrapper).style.width=c.offsetWidth*b+"px"},playPause:function(){this.playing?this.settings.play():this.settings.pause()},play:function(){g[h].helpers.addClass(this.wrapper,this.settings.createPlayer.playingClass)},pause:function(){g[h].helpers.removeClass(this.wrapper,this.settings.createPlayer.playingClass)},updatePlayhead:function(b){var a=this.settings.createPlayer,c=j(a.scrubberClass,this.wrapper);j(a.progressClass,this.wrapper).style.width=c.offsetWidth*b+"px",a=j(a.playedClass,this.wrapper),c=this.duration*b,b=Math.floor(c/60),c=Math.floor(c%60),a.innerHTML=(10>b?"0":"")+b+":"+(10>c?"0":"")+c}},create:function(b,a){return a=a||{},b.length?this.createAll(a,b):this.newInstance(b,a)},createAll:function(b,a){var c=a||document.getElementsByTagName("audio"),d=[];b=b||{};for(var e=0,i=c.length;i>e;e++)d.push(this.newInstance(c[e],b));return d},newInstance:function(b,a){var c=this.helpers.clone(this.settings),d="audiojs"+this.instanceCount,e="audiojs_wrapper"+this.instanceCount;return this.instanceCount++,null!=b.getAttribute("autoplay")&&(c.autoplay=!0),null!=b.getAttribute("loop")&&(c.loop=!0),"none"==b.getAttribute("preload")&&(c.preload=!1),a&&this.helpers.merge(c,a),c.createPlayer.markup?b=this.createPlayer(b,c.createPlayer,e):b.parentNode.setAttribute("id",e),e=new g[o](b,c),c.css&&this.helpers.injectCss(e,c.css),c.useFlash&&c.hasFlash?(this.injectFlash(e,d),this.attachFlashEvents(e.wrapper,e)):c.useFlash&&!c.hasFlash&&this.settings.flashError.apply(e),(!c.useFlash||c.useFlash&&c.hasFlash)&&this.attachEvents(e.wrapper,e),this.instances[d]=e},createPlayer:function(b,a,c){var d=document.createElement("div"),e=b.cloneNode(!0);return d.setAttribute("class","audiojs"),d.setAttribute("className","audiojs"),d.setAttribute("id",c),e.outerHTML&&!document.createElement("audio").canPlayType?(e=this.helpers.cloneHtml5Node(b),d.innerHTML=a.markup,d.appendChild(e),b.outerHTML=d.outerHTML,d=document.getElementById(c)):(d.appendChild(e),d.innerHTML+=a.markup,b.parentNode.replaceChild(d,b)),d.getElementsByTagName("audio")[0]},attachEvents:function(b,a){if(a.settings.createPlayer){var c=a.settings.createPlayer,d=j(c.playPauseClass,b),e=j(c.scrubberClass,b);g[h].events.addListener(d,"click",function(){a.playPause.apply(a)}),g[h].events.addListener(e,"click",function(i){i=i.clientX;var f=this,k=0;if(f.offsetParent)do k+=f.offsetLeft;while(f=f.offsetParent);a.skipTo((i-k)/e.offsetWidth)}),a.settings.useFlash||(g[h].events.trackLoadProgress(a),g[h].events.addListener(a.element,"timeupdate",function(){a.updatePlayhead.apply(a)}),g[h].events.addListener(a.element,"ended",function(){a.trackEnded.apply(a)}),g[h].events.addListener(a.source,"error",function(){clearInterval(a.readyTimer),clearInterval(a.loadTimer),a.settings.loadError.apply(a)}))}},attachFlashEvents:function(b,a){a.swfReady=!1,a.load=function(c){a.mp3=c,a.swfReady&&a.element.load(c)},a.loadProgress=function(c,d){a.loadedPercent=c,a.duration=d,a.settings.loadStarted.apply(a),a.settings.loadProgress.apply(a,[c])},a.skipTo=function(c){c>a.loadedPercent||(a.updatePlayhead.call(a,[c]),a.element.skipTo(c))},a.updatePlayhead=function(c){a.settings.updatePlayhead.apply(a,[c])},a.play=function(){a.settings.preload||(a.settings.preload=!0,a.element.init(a.mp3)),a.playing=!0,a.element.pplay(),a.settings.play.apply(a)},a.pause=function(){a.playing=!1,a.element.ppause(),a.settings.pause.apply(a)},a.setVolume=function(c){a.element.setVolume(c)},a.loadStarted=function(){a.swfReady=!0,a.settings.preload&&a.element.init(a.mp3),a.settings.autoplay&&a.play.apply(a)}},injectFlash:function(b,a){var c=this.flashSource.replace(/\$1/g,a);c=c.replace(/\$2/g,b.settings.swfLocation),c=c.replace(/\$3/g,+new Date+Math.random());var d=b.wrapper.innerHTML,e=document.createElement("div");e.innerHTML=c+d,b.wrapper.innerHTML=e.innerHTML,b.element=this.helpers.getSwf(a)},helpers:{merge:function(b,a){for(attr in a)(b.hasOwnProperty(attr)||a.hasOwnProperty(attr))&&(b[attr]=a[attr])},clone:function(b){if(null==b||"object"!=typeof b)return b;var c,a=new b.constructor;for(c in b)a[c]=arguments.callee(b[c]);return a},addClass:function(b,a){RegExp("(\\s|^)"+a+"(\\s|$)").test(b.className)||(b.className+=" "+a)},removeClass:function(b,a){b.className=b.className.replace(RegExp("(\\s|^)"+a+"(\\s|$)")," ")},injectCss:function(b,a){for(var c="",d=document.getElementsByTagName("style"),e=a.replace(/\$1/g,b.settings.imageLocation),i=0,f=d.length;f>i;i++){var k=d[i].getAttribute("title");if(k&&~k.indexOf("audiojs")){if(f=d[i],f.innerHTML===e)return;c=f.innerHTML;break}}d=document.getElementsByTagName("head")[0],i=d.firstChild,f=document.createElement("style"),d&&(f.setAttribute("type","text/css"),f.setAttribute("title","audiojs"),f.styleSheet?f.styleSheet.cssText=c+e:f.appendChild(document.createTextNode(c+e)),i?d.insertBefore(f,i):d.appendChild(styleElement))},cloneHtml5Node:function(b){var a=document.createDocumentFragment(),c=a.createElement?a:document;return c.createElement("audio"),c=c.createElement("div"),a.appendChild(c),c.innerHTML=b.outerHTML,c.firstChild},getSwf:function(b){return b=document[b]||window[b],b.length>1?b[b.length-1]:b}},events:{memoryLeaking:!1,listeners:[],addListener:function(b,a,c){b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent&&(this.listeners.push(b),this.memoryLeaking||(window.attachEvent("onunload",function(){if(this.listeners)for(var d=0,e=this.listeners.length;e>d;d++)g[h].events.purge(this.listeners[d])}),this.memoryLeaking=!0),b.attachEvent("on"+a,function(){c.call(b,window.event)}))},trackLoadProgress:function(b){if(b.settings.preload){var a,c;b=b;var d=/(ipod|iphone|ipad)/i.test(navigator.userAgent);a=setInterval(function(){b.element.readyState>-1&&(d||b.init.apply(b)),b.element.readyState>1&&(b.settings.autoplay&&b.play.apply(b),clearInterval(a),c=setInterval(function(){b.loadProgress.apply(b),b.loadedPercent>=1&&clearInterval(c)}))},10),b.readyTimer=a,b.loadTimer=c}},purge:function(b){var c,a=b.attributes;if(a)for(c=0;c<a.length;c+=1)"function"==typeof b[a[c].name]&&(b[a[c].name]=null);if(a=b.childNodes)for(c=0;c<a.length;c+=1)purge(b.childNodes[c])},ready:function(){return function(b){var a=window,c=!1,d=!0,e=a.document,i=e.documentElement,f=e.addEventListener?"addEventListener":"attachEvent",k=e.addEventListener?"removeEventListener":"detachEvent",n=e.addEventListener?"":"on",m=function(l){("readystatechange"!=l.type||"complete"==e.readyState)&&(("load"==l.type?a:e)[k](n+l.type,m,!1),!c&&(c=!0)&&b.call(a,l.type||l))
},q=function(){try{i.doScroll("left")}catch(l){return setTimeout(q,50),void 0}m("poll")};if("complete"==e.readyState)b.call(a,"lazy");else{if(e.createEventObject&&i.doScroll){try{d=!a.frameElement}catch(r){}d&&q()}e[f](n+"DOMContentLoaded",m,!1),e[f](n+"readystatechange",m,!1),a[f](n+"load",m,!1)}}}()}},g[o]=function(b,a){this.element=b,this.wrapper=b.parentNode,this.source=b.getElementsByTagName("source")[0]||b,this.mp3=function(c){var d=c.getElementsByTagName("source")[0];return c.getAttribute("src")||(d?d.getAttribute("src"):null)}(b),this.settings=a,this.loadStartedCalled=!1,this.loadedPercent=0,this.duration=1,this.playing=!1},g[o].prototype={updatePlayhead:function(){this.settings.updatePlayhead.apply(this,[this.element.currentTime/this.duration])},skipTo:function(b){b>this.loadedPercent||(this.element.currentTime=this.duration*b,this.updatePlayhead())},load:function(b){this.loadStartedCalled=!1,this.source.setAttribute("src",b),this.element.load(),this.mp3=b,g[h].events.trackLoadProgress(this)},loadError:function(){this.settings.loadError.apply(this)},init:function(){this.settings.init.apply(this)},loadStarted:function(){return this.element.duration?(this.duration=this.element.duration,this.updatePlayhead(),this.settings.loadStarted.apply(this),void 0):!1},loadProgress:function(){null!=this.element.buffered&&this.element.buffered.length&&(this.loadStartedCalled||(this.loadStartedCalled=this.loadStarted()),this.loadedPercent=this.element.buffered.end(this.element.buffered.length-1)/this.duration,this.settings.loadProgress.apply(this,[this.loadedPercent]))},playPause:function(){this.playing?this.pause():this.play()},play:function(){/(ipod|iphone|ipad)/i.test(navigator.userAgent)&&0==this.element.readyState&&this.init.apply(this),this.settings.preload||(this.settings.preload=!0,this.element.setAttribute("preload","auto"),g[h].events.trackLoadProgress(this)),this.playing=!0,this.element.play(),this.settings.play.apply(this)},pause:function(){this.playing=!1,this.element.pause(),this.settings.pause.apply(this)},setVolume:function(b){this.element.volume=b},trackEnded:function(){this.skipTo.apply(this,[0]),this.settings.loop||this.pause.apply(this),this.settings.trackEnded.apply(this)}};var j=function(b,a){var c=[];if(a=a||document,a.getElementsByClassName)c=a.getElementsByClassName(b);else{var d,e,i=a.getElementsByTagName("*"),f=RegExp("(^|\\s)"+b+"(\\s|$)");for(d=0,e=i.length;e>d;d++)f.test(i[d].className)&&c.push(i[d])}return c.length>1?c:c[0]}}("audiojs","audiojsInstance",this),function(){function EventEmitter(){}function indexOfListener(listeners,listener){for(var i=listeners.length;i--;)if(listeners[i].listener===listener)return i;return-1}function alias(name){return function(){return this[name].apply(this,arguments)}}var proto=EventEmitter.prototype;proto.getListeners=function(evt){var response,key,events=this._getEvents();if("object"==typeof evt){response={};for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&(response[key]=events[key])}else response=events[evt]||(events[evt]=[]);return response},proto.flattenListeners=function(listeners){var i,flatListeners=[];for(i=0;i<listeners.length;i+=1)flatListeners.push(listeners[i].listener);return flatListeners},proto.getListenersAsObject=function(evt){var response,listeners=this.getListeners(evt);return listeners instanceof Array&&(response={},response[evt]=listeners),response||listeners},proto.addListener=function(evt,listener){var key,listeners=this.getListenersAsObject(evt),listenerIsWrapped="object"==typeof listener;for(key in listeners)listeners.hasOwnProperty(key)&&-1===indexOfListener(listeners[key],listener)&&listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:!1});return this},proto.on=alias("addListener"),proto.addOnceListener=function(evt,listener){return this.addListener(evt,{listener:listener,once:!0})},proto.once=alias("addOnceListener"),proto.defineEvent=function(evt){return this.getListeners(evt),this},proto.defineEvents=function(evts){for(var i=0;i<evts.length;i+=1)this.defineEvent(evts[i]);return this},proto.removeListener=function(evt,listener){var index,key,listeners=this.getListenersAsObject(evt);for(key in listeners)listeners.hasOwnProperty(key)&&(index=indexOfListener(listeners[key],listener),-1!==index&&listeners[key].splice(index,1));return this},proto.off=alias("removeListener"),proto.addListeners=function(evt,listeners){return this.manipulateListeners(!1,evt,listeners)},proto.removeListeners=function(evt,listeners){return this.manipulateListeners(!0,evt,listeners)},proto.manipulateListeners=function(remove,evt,listeners){var i,value,single=remove?this.removeListener:this.addListener,multiple=remove?this.removeListeners:this.addListeners;if("object"!=typeof evt||evt instanceof RegExp)for(i=listeners.length;i--;)single.call(this,evt,listeners[i]);else for(i in evt)evt.hasOwnProperty(i)&&(value=evt[i])&&("function"==typeof value?single.call(this,i,value):multiple.call(this,i,value));return this},proto.removeEvent=function(evt){var key,type=typeof evt,events=this._getEvents();if("string"===type)delete events[evt];else if("object"===type)for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&delete events[key];else delete this._events;return this},proto.removeAllListeners=alias("removeEvent"),proto.emitEvent=function(evt,args){var listener,i,key,response,listeners=this.getListenersAsObject(evt);for(key in listeners)if(listeners.hasOwnProperty(key))for(i=listeners[key].length;i--;)listener=listeners[key][i],listener.once===!0&&this.removeListener(evt,listener.listener),response=listener.listener.apply(this,args||[]),response===this._getOnceReturnValue()&&this.removeListener(evt,listener.listener);return this},proto.trigger=alias("emitEvent"),proto.emit=function(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args)},proto.setOnceReturnValue=function(value){return this._onceReturnValue=value,this},proto._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},proto._getEvents=function(){return this._events||(this._events={})},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return EventEmitter}):"object"==typeof module&&module.exports?module.exports=EventEmitter:this.EventEmitter=EventEmitter}.call(this),function(window){var docElem=document.documentElement,bind=function(){};docElem.addEventListener?bind=function(obj,type,fn){obj.addEventListener(type,fn,!1)}:docElem.attachEvent&&(bind=function(obj,type,fn){obj[type+fn]=fn.handleEvent?function(){var event=window.event;event.target=event.target||event.srcElement,fn.handleEvent.call(fn,event)}:function(){var event=window.event;event.target=event.target||event.srcElement,fn.call(obj,event)},obj.attachEvent("on"+type,obj[type+fn])});var unbind=function(){};docElem.removeEventListener?unbind=function(obj,type,fn){obj.removeEventListener(type,fn,!1)}:docElem.detachEvent&&(unbind=function(obj,type,fn){obj.detachEvent("on"+type,obj[type+fn]);try{delete obj[type+fn]}catch(err){obj[type+fn]=void 0}});var eventie={bind:bind,unbind:unbind};"function"==typeof define&&define.amd?define("eventie/eventie",eventie):window.eventie=eventie}(this),function(window){function extend(a,b){for(var prop in b)a[prop]=b[prop];return a}function isArray(obj){return"[object Array]"===objToString.call(obj)}function makeArray(obj){var ary=[];if(isArray(obj))ary=obj;else if("number"==typeof obj.length)for(var i=0,len=obj.length;len>i;i++)ary.push(obj[i]);else ary.push(obj);return ary}function defineImagesLoaded(EventEmitter,eventie){function ImagesLoaded(elem,options,onAlways){if(!(this instanceof ImagesLoaded))return new ImagesLoaded(elem,options);"string"==typeof elem&&(elem=document.querySelectorAll(elem)),this.elements=makeArray(elem),this.options=extend({},this.options),"function"==typeof options?onAlways=options:extend(this.options,options),onAlways&&this.on("always",onAlways),this.getImages(),$&&(this.jqDeferred=new $.Deferred);var _this=this;setTimeout(function(){_this.check()})}function LoadingImage(img){this.img=img}ImagesLoaded.prototype=new EventEmitter,ImagesLoaded.prototype.options={},ImagesLoaded.prototype.getImages=function(){this.images=[];for(var i=0,len=this.elements.length;len>i;i++){var elem=this.elements[i];"IMG"===elem.nodeName&&this.addImage(elem);for(var childElems=elem.querySelectorAll("img"),j=0,jLen=childElems.length;jLen>j;j++){var img=childElems[j];this.addImage(img)}}},ImagesLoaded.prototype.addImage=function(img){var loadingImage=new LoadingImage(img);this.images.push(loadingImage)},ImagesLoaded.prototype.check=function(){function onConfirm(image,message){return _this.options.debug&&hasConsole&&console.log("confirm",image,message),_this.progress(image),checkedCount++,checkedCount===length&&_this.complete(),!0}var _this=this,checkedCount=0,length=this.images.length;if(this.hasAnyBroken=!1,!length)return this.complete(),void 0;for(var i=0;length>i;i++){var loadingImage=this.images[i];loadingImage.on("confirm",onConfirm),loadingImage.check()}},ImagesLoaded.prototype.progress=function(image){this.hasAnyBroken=this.hasAnyBroken||!image.isLoaded;var _this=this;setTimeout(function(){_this.emit("progress",_this,image),_this.jqDeferred&&_this.jqDeferred.notify(_this,image)})},ImagesLoaded.prototype.complete=function(){var eventName=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var _this=this;setTimeout(function(){if(_this.emit(eventName,_this),_this.emit("always",_this),_this.jqDeferred){var jqMethod=_this.hasAnyBroken?"reject":"resolve";_this.jqDeferred[jqMethod](_this)}})},$&&($.fn.imagesLoaded=function(options,callback){var instance=new ImagesLoaded(this,options,callback);return instance.jqDeferred.promise($(this))});var cache={};return LoadingImage.prototype=new EventEmitter,LoadingImage.prototype.check=function(){var cached=cache[this.img.src];if(cached)return this.useCached(cached),void 0;if(cache[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;var proxyImage=this.proxyImage=new Image;eventie.bind(proxyImage,"load",this),eventie.bind(proxyImage,"error",this),proxyImage.src=this.img.src},LoadingImage.prototype.useCached=function(cached){if(cached.isConfirmed)this.confirm(cached.isLoaded,"cached was confirmed");else{var _this=this;cached.on("confirm",function(image){return _this.confirm(image.isLoaded,"cache emitted confirmed"),!0})}},LoadingImage.prototype.confirm=function(isLoaded,message){this.isConfirmed=!0,this.isLoaded=isLoaded,this.emit("confirm",this,message)},LoadingImage.prototype.handleEvent=function(event){var method="on"+event.type;this[method]&&this[method](event)},LoadingImage.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindProxyEvents()},LoadingImage.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindProxyEvents()},LoadingImage.prototype.unbindProxyEvents=function(){eventie.unbind(this.proxyImage,"load",this),eventie.unbind(this.proxyImage,"error",this)},ImagesLoaded}var $=window.jQuery,console=window.console,hasConsole="undefined"!=typeof console,objToString=Object.prototype.toString;"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],defineImagesLoaded):window.imagesLoaded=defineImagesLoaded(window.EventEmitter,window.eventie)}(window),function($){$(function(){function toggleThankYou(){var $taAction=$(".take-action__action"),$taThankYou=$(".take-action__thank-you");$taAction.toggleClass("is-hidden"),window.setTimeout(function(){$taAction.toggleClass("hide"),$taThankYou.toggleClass("show"),$taThankYou.toggleClass("is-hidden")},300)}function parseReps(data){var officialsById={};return $.each(data.offices,function(i,office){"federal"!==office.level||-1===office.name.indexOf("House")&&-1===office.name.indexOf("Senate")||$.each(office.officialIds,function(i,id){officialsById[id]={office:office.name}})}),$.each(officialsById,function(id,official){official=$.extend(official,data.officials[id]),official.party="Democratic"===official.party?"Democrat":official.party,official.channels&&$.each(official.channels,function(){return"Twitter"===this.type?(official.twitter=this.id,!1):void 0})}),$.map(officialsById,function(official){return official.twitter?official:null})}function lookupReps(address,success,error){$.ajax({url:"https://www.googleapis.com/civicinfo/us_v1/representatives/lookup?key="+window.googleApiKey,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({address:address}),dataType:"json",success:function(data){"success"===data.status?success(parseReps(data)):error(data)}})}function renderReps(reps,tweetUrl,tweetMessage){var $politicians=$("#tweet-a-politician").empty();$("#tweet-a-politician-container").show(),$.each(reps,function(){$politicians.append(politicianTemplate(this,tweetUrl,tweetMessage))})}function politicianTemplate(politician,shortUrl,message){var twitterUrl="https://twitter.com/share?url="+encodeURIComponent(shortUrl)+"&text="+encodeURIComponent("@"+politician.twitter+" "+message)+"&via=nationswell";return twigs["views-client/politician.twig"].render({politician:politician,twitterUrl:twitterUrl})}var $body=$("body");$.scout(),$(".hero-read-link").on("click",function(e){e.preventDefault();var top=$($(this).attr("href")).offset().top-$("#page-header").height();$body.animate({scrollTop:top},"500")});var $fullNavBar=$(".full-header");$fullNavBar.waypoint("sticky",{stuckClass:"stuck"}),$(".mc-form").ajaxChimp({callback:function(resp){"success"===resp.result?setTimeout(function(){toggleThankYou()},500):"error"===resp.result}}),audiojs.events.ready(function(){audiojs.createAll()}),$body.on("click",".btn--share",function(){var width=575,height=400,left=($(window).width()-width)/2,top=($(window).height()-height)/2,url=this.href,opts="status=1,width="+width+",height="+height+",top="+top+",left="+left;return window.open(url,"twitter",opts),!1}),$.each($("[data-modal-pageload='true']"),function(){if(!$.cookie($(this).data("modal"))){var that=this;setTimeout(function(){$(that).addClass("is-visible"),$body.addClass("is-locked")},1500)}});var fitTakeAction=function(modal){var windowHeight=$(window).height(),$taContent=(modal.outerHeight(),modal.find(".take-action__inner"));$taContent.css("height",.44*windowHeight)};$("[data-modal-target]").on("click",function(e){var modalType=$(this).attr("data-modal-target"),$modal=$(".modal--"+modalType),$modalContent=$modal.find(".modal__content");if($modal.length){if("take-action"===modalType){var taContent=$(".story__take-action").contents();$modalContent.empty().append(taContent),fitTakeAction($modal),$(window).on("resize.resizeModal",function(){fitTakeAction($modal)})}$modal.addClass("is-visible")}return e.preventDefault(),!1}),$("[data-modal]").on("disable",function(event,expireDuration){event.stopPropagation(),$.cookie($(this).data("modal"),"disabled",{expires:expireDuration,path:"/"})});var $modalClose=$(".modal-overlay, [data-modal-action='close']");$modalClose.on("click",function(){var $modal=$(".modal.is-visible");$modal.removeClass("is-visible"),$modal.hasClass("modal--take-action")&&($modal.find(".take-action__inner").css("height",""),$(".story__take-action").append($modal.find(".modal__content").contents())),$(window).off(".resizeModal"),$(this).data("modal-disable")&&$("[data-modal]:visible").trigger("disable",[$(this).data("modal-disable")])}),$body.on("focus.textareaClear","textarea",function(){$(this).empty().unbind(".textareaClear")}),window.fbAsyncInit=function(){FB.Event.subscribe("edge.create",function(){$.cookie("flyout","disabled",{expires:1,path:"/"})})},$.cookie("flyout")||setTimeout(function(){$("#flyout").toggleClass("is-visible")},3e4),$("[data-flyout-action='close']").on("click",function(){var $flyout=$(this).closest("#flyout");$flyout.remove(),$.cookie("flyout","disabled",{expires:1,path:"/"})}),$('[for*="nav-"]').on("click",function(e){var $this=$(this),input=$this.attr("for"),$field=$("#"+input),isOpen=$field.hasClass("is-open");$('[id*="nav-"]').removeClass("is-open"),"nav-subscribe"===$this.attr("for")&&$this.removeClass("error valid"),isOpen?e.preventDefault():$field.addClass("is-open")}),enquire.register("screen and (max-device-width: 767px)",{match:function(){$(".toggle-collapse").on("click.toggle-collapse",function(e){var $this=$(this),target=$this.data("mobile-target"),$target=$(target);$this.toggleClass("is-toggled"),$target.toggleClass("panel--is-open"),e.preventDefault()}),$(".more-stories-drawer").swipe({swipeRight:function(){$body.hasClass("panel--is-open")&&($body.removeClass("panel--is-open"),$(".more-stories-toggle").removeClass("is-toggled"))}});var $storySocial=$(".story__social").detach(),$storyContent=$("#story");$storyContent&&(console.log("bug"),$storySocial.clone().prependTo($storyContent),$storySocial.clone().appendTo($storyContent)),$(".mobile-carousel").each(function(){function unhighlight(items){return items.removeClass("active"),isPeek&&$externalContainer.addClass("transitioning"),items}function highlight(items){if(isPeek){var $activeSlide=isFullPeek?items.filter(":eq(1)"):items.filter(":eq(0)"),$activeCaption=$activeSlide.find(".carousel-item__title > span").text(),$activeIndicator=$activeSlide.find(".indicator").detach().removeClass("hide_mobile"),$externalContainerLink=$externalContainer.find(".link-wrapper"),activeHref=$activeSlide.find(".link-wrapper").attr("href");$externalCaption.html($activeCaption),$externalIndicator&&$activeIndicator&&$externalIndicator.replaceWith($activeIndicator),$externalContainerLink.length&&$externalContainerLink.attr("href",activeHref),$externalContainer.removeClass("transitioning"),$activeSlide.addClass("active")}else items.addClass("active");if(isStory){$activeSlide=items.filter(":eq(0)");var $informationContainer=$(".hero-information"),$slideCredit=$informationContainer.find(".hero-information__caption"),$slideCaption=$informationContainer.find(".hero-information__credit"),activeSlideCredit=$activeSlide.data("item-caption"),activeSlideCaption=$activeSlide.data("item-credit");activeSlideCredit||activeSlideCaption?($informationContainer.fadeIn(300),activeSlideCaption?$slideCaption.html(activeSlideCaption):$.noop(),activeSlideCredit?$slideCredit.html(activeSlideCredit):$.noop()):$informationContainer.fadeOut(300)}return items}var $this=$(this),$carousel=$this.find(".carousel__items"),$externalContainer=$this.find(".mobile-carousel__external-container"),$externalCaption=$externalContainer.find(".carousel-item__title"),$externalIndicator=$externalContainer.find(".indicator");$this.imagesLoaded(function(){}),$carousel.length||($this.wrapInner('<ul class="carousel__items" />'),$carousel=$this.find(".carousel__items"));var isPeek=$this.hasClass("mobile-carousel--peek"),isFullPeek=isPeek&&$carousel.children().length>3,isSingle=$this.hasClass("mobile-carousel--single"),isStory=$this.closest(".hero--story").length;isSingle&&$this.append('<div class="carousel__pagination z3" />'),$carousel.find(".carousel-item").first().addClass("active"),$carousel.carouFredSel({responsive:isSingle?!0:!1,width:"100%",transition:!0,items:{visible:isFullPeek?3:1,start:isFullPeek?-1:0},scroll:{items:1,duration:300,onBefore:function(data){unhighlight(data.items.old)},onAfter:function(data){highlight(data.items.visible)}},auto:{play:!1,timeoutDuration:6e3},swipe:{onTouch:!0},pagination:{container:$this.find(".carousel__pagination"),deviation:isFullPeek?1:0}})})}}).register("screen and (min-device-width: 768px)",{match:function(){$(".toggle-collapse").on("click.toggle-collapse",function(e){var $this=$(this),target=$this.data("desktop-target"),$target=$(target);$this.toggleClass("is-toggled"),$target.toggleClass("panel--is-open"),e.preventDefault()}),$("#more-stories").swipe({swipeUp:function(){var $moreStories=$("#more-stories");$moreStories.hasClass("panel--is-open")&&($moreStories.removeClass("panel--is-open"),$(".more-stories-toggle").removeClass("is-toggled"))}}),$(".carousel").each(function(){function highlight(items){if(isPeek){var $activeSlide=items.filter(":eq(1)").addClass("active");if(isStory){var $informationContainer=$(".hero-information"),$slideCredit=$informationContainer.find(".hero-information__caption"),$slideCaption=$informationContainer.find(".hero-information__credit"),activeSlideCredit=$activeSlide.data("item-caption"),activeSlideCaption=$activeSlide.data("item-credit");activeSlideCredit||activeSlideCaption?($informationContainer.fadeIn(300),activeSlideCaption?$slideCaption.html(activeSlideCaption):$.noop(),activeSlideCredit?$slideCredit.html(activeSlideCredit):$.noop()):$informationContainer.fadeOut(300)}}else items.addClass("active");return items}function unhighlight(items){return items.removeClass("active"),items}var $this=$(this),$carousel=$this.find(".carousel__items"),isPeek=$this.hasClass("carousel--peek")&&$carousel.children().length>3,isSeries=$this.hasClass("carousel--series"),isStory=$this.closest(".hero--story").length;$this.imagesLoaded(function(){$this.find("img").addClass("is-visible")}),$carousel.carouFredSel({responsive:isSeries?!0:!1,width:"100%",transition:!0,items:{visible:isPeek?3:1,start:isPeek?-1:1},scroll:{items:1,duration:300,onBefore:function(data){unhighlight(data.items.old)},onAfter:function(data){highlight(data.items.visible)}},auto:{play:!1},prev:{button:$this.find(".carousel__control--prev"),key:"left"},next:{button:$this.find(".carousel__control--next"),key:"right"},swipe:{onTouch:!0}})});var $stickyBar=$(".story__sticky-container"),$stickySocial=$(".sticky-social"),$stickyTakeAction=$(".sticky-take-action");$stickyBar.waypoint("sticky",{stuckClass:"stuck",offset:132});var $storySocial=$(".story__social");$storySocial.waypoint(function(direction){$storySocial.toggleClass("is-visible","down"===direction),$stickySocial.toggleClass("is-hidden","down"===direction)},{offset:function(){var offsetHeight;return offsetHeight=$stickyTakeAction.length?$stickyBar.outerHeight()-1.2*$stickySocial.outerHeight():.8*$stickyBar.outerHeight()}});var $storyTakeAction=$(".story__take-action");$storyTakeAction.length&&$storyTakeAction.waypoint(function(direction){$storyTakeAction.toggleClass("is-visible","down"===direction),$stickyTakeAction.toggleClass("is-hidden","down"===direction)},{offset:function(){var offsetHeight=.8*$stickyBar.outerHeight();return offsetHeight}})}}),$("#page-content").on("click",".btn--load-more",function(e){var $link=$(this),$container=$link.parent(".btn-container"),url=$link.attr("href")+"?ajax-more=true";$.get(url,function(html){$container.replaceWith(html)}),e.preventDefault()}),$body.on("click.taBack",".take-action__social_back",function(e){toggleThankYou(),e.preventDefault()}),$body.on("click.taSubmit",".take-action__submit",function(e){toggleThankYou(),$(window).off(".taSubmit"),$(this).hasClass("icon_external")||e.preventDefault()}),$("#change-org-petition").submit(function(e){e.preventDefault()}).validate({submitHandler:function(form){var $form=$(form),$formErrors=$form.find(".form-errors"),url="/wp-admin/admin-ajax.php?action=sign_petition&cta_id="+$form.attr("data-cta-id");$formErrors.empty().addClass("hide"),$.post(url,$form.serialize()).done(function(){toggleThankYou()}).fail(function(data){var messages=data.responseJSON.messages;messages&&$formErrors.removeClass("hide").html(messages[0])})}});var $politicianLookup=$("#politician-lookup"),lookupValidator=$politicianLookup.validate({submitHandler:function(form){var $form=$(form),$modal=$form.closest(".take-action__full").closest(".modal"),$tweet=$("#tweet-message");lookupReps($form.find("[name=ta-address]").val(),function(reps){renderReps(reps,$tweet.attr("data-tweet-url"),$tweet.attr("data-tweet-message"))},function(data){"addressUnparseable"===data.status&&lookupValidator.showErrors({"ta-address":"Sorry we don't recognize this address"})}),$modal.length&&fitTakeAction($modal)}});$politicianLookup.submit(function(event){event.preventDefault()})})}(jQuery);